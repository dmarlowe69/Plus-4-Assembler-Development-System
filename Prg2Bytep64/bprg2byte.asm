;.PAGE 'PRG2BYTE";.OPT LIST;**********************************=$1001        ;START OF BASIC PLUS 4;*********************************; SET BSTUB TO ONE TO ALLOW FOR; INSERTION OF BASIC STUB CODE;*********************************BSTUB = 1;*********************************;;         PRG2BYTE64;      PRG2BYTE.C64 V072882;     CONVERT PROGRAM FILE;  TO ASSEMBLER64 SOURCE FILE;          BYTE,WORD ;; (C) 1982 BY COMMODORE MACHINES;;  WRITTEN BY DENTON MARLOWE;********************************;; BASIC FORMAT PROGRAM;; 10 SYS(4111);;*********************************.IF  BSTUB == 1;.IFN BSTUB <;*********************************HH1001 .WORD BASIC    ;LINE LINK POINTER       .BYTE $0A,$00  ;LINE NUMBER (10)       .BYTE $9E      ;SYS COMMAND TOKEN       .TEXT '(4111)' ;CALL TO $100F       .BYTE $00      ;END OF LINEBASIC  .BYTE $00,$00  ;END OF BASIC;*********************************;>.FI;*********************************; PLUS 4 SPECIFIC EQUATES;*********************************BASICW = $867E ;BASIC WARM STARTCHROUE = $DC49 ;OUTPUT CHAR TO SCREENSCROLY = $FF06 ;SCREEN CONTROL;********************************;*=$100F        ;PROGRAMP64 ORGIN;*********************************; JUMP OVER ; PROCESSOR SPECIFIC UTILITIES;*********************************       JMP START;********************************; LIBRARY FUNCTIONS;********************************; TOP OF MEMORY PLUS4;********************************MEMSIZ = $37 ;TOP OF FREE RAM+1MEMEND = $8000MEMSAV  .WORD $FFFF;********************************; SET TOP OF MEMORY C128 AND PLUS4;********************************SETMEM LDA MEMSIZ       STA MEMSAV       LDA MEMSIZ+1       STA MEMSAV+1;       LDA #<MEMEND       STA MEMSIZ       LDA #>MEMEND       STA MEMSIZ+1;       RTS;********************************; EXIT TO BASIC;********************************EXIT   LDA MEMSAV       STA MEMSIZ       LDA MEMSAV+1       STA MEMSIZ+1;       LDA #$00  ;BANK 15       STA $FF00 ;;       JMP BASICW ;EXIT TO BASIC;*********************************       ; SET FLAG TO ALLOW BASIC; AND KERNAL (ERROR) MESSAGES; $80 FOR BASIC; $40 FOR KERNAL;*********************************;;*********************************SETMSG=$FF90;*********************************START  LDA #$40     ;ALLOW KERNAL MESSAGES       JSR SETMSG   ;KERNAL FLAG;*********************************; MAIN BODY OF CODE;*********************************.INCLUDE "prg2byte.asm";*********************************.END