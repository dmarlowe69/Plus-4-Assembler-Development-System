PDISASS64.ASM......PAGE 0001

LINE# LOC   CODE        LINE


00001  0000              ;.PAGE 'DISASSEMBLER64'
00002  0000              ;.OPT LIST
00003  0000              ;*********************************
00004  0000              *=$1001                ;START OF BASIC
00005  1001              ;*********************************
00006  1001              ; SET BSTUB TO ONE TO ALLOW FOR
00007  1001              ; INSERTION OF BASIC STUB CODE
00008  1001              ;*********************************
00009  1001              BSTUB  = 1
00010  1001              ;*********************************
00011  1001              ;
00012  1001              ;        DISASSEMBLER64
00013  1001              ;    DISASSEMBLER.C64 V080282
00014  1001              ;    SYMBOLIC DISASSEMBLER
00015  1001              ;       BY DENTON MARLOWE
00016  1001              ;
00017  1001              ;  (C)1986 BY DENTON MARLOWE
00018  1001              ;
00019  1001              ; MACRO ASSEMBLER DEVELOPMENT SYSTEM
00020  1001              ;  (C) 1982 BY COMMODORE MACHINES
00021  1001              ;
00022  1001              ;*********************************
00023  1001              ;
00024  1001              ; BASIC FORMAT PROGRAM
00025  1001              ;
00026  1001              ; 10 SYS(4111)
00027  1001              ;
00028  1001              ;*********************************
00030  1001              ;.IF  BSTUB == 1
00031  1001  0D 10              .WORD BASIC     ;NEXT LINE POINTER
00032  1003  0A                 .BYTE $0A,$00   ;LINE NUMBER
00032  1004  00 
00033  1005  9E                 .BYTE $9E       ;SYS COMMAND
00034  1006  28 34              .BYTE '(4111)'  ;ASCII (4111)
00035  100C  00                 .BYTE 0         ;END OF LINE
00036  100D  00          BASIC  .BYTE 0,0       ;END OF BASIC
00036  100E  00 
00038  100F              ;.FI
00039  100F              ;*********************************
00040  100F              ;.LIB DIS.ASM
00041  100F              ;*********************************
00042  100F              ;.LIB OPTION.ASM
00043  100F              ;*********************************
00044  100F              ;.LIB UTIL.ASM
00045  100F              ;*********************************
00046  100F              ;.LIB MODE.ASM
00047  100F              ;*********************************
00048  100F              ;.LIB INTERNAL.ASM
00049  100F              ;*********************************
00050  100F              ;.LIB ASC.ASM
00051  100F              ;*********************************
00052  100F              ;.LIB TABLE.ASM
00053  100F              ;*********************************
00054  100F              ;.LIB SYM.ASM
00055  100F              ;*********************************






PDISASS64.ASM......PAGE 0002

LINE# LOC   CODE        LINE


00056  100F              ;.END
00057  100F              ;*********************************
00058  100F              ; FILE DIS.ASM
00059  100F              ;*********************************
00060  100F              ;
00061  100F              ;        DISASSEMBLER64
00062  100F              ;    SYMBOLIC DISASSEMBLER
00063  100F              ;       BY DENTON MARLOWE
00064  100F              ;
00065  100F              ;  (C)1986 BY DENTON MARLOWE
00066  100F              ;
00067  100F              ;*********************************
00068  100F              ; KERNAL ADDRESS
00069  100F              ;*********************************
00070  100F              VICREG=$D011           ;SCREEN REGISTER
00071  100F              CHROUT=$FFD2           ;OUTPUT CHARACTER
00072  100F              CHKIN  =$FFC6          ;OPEN INPUT FILE
00073  100F              CHRIN  =$FFCF          ;GET KEYBOARD INPUT
00074  100F              GETIN  =$FFE4          ;GET KEYBOARD CHAR
00075  100F              CLRCHN=$FFCC           ;RESET I/O CHANNELS
00076  100F              STOP   =$FFE1          ;CHECK FOR STOP
00077  100F              READST=$FFB7           ;READ ST
00078  100F              SETNAM=$FFBD           ;SET FILENAME
00079  100F              SETLFS=$FFBA           ;SET LOGICAL FILE
00080  100F              OPEN   =$FFC0          ;OPEN FILE
00081  100F              CHKOUT=$FFC9           ;OPEN OUTPUT CHANNEL
00082  100F              CLOSE  =$FFC3          ;CLOSE LOGICAL FILE
00083  100F              ;*********************************
00084  100F              ; RETURN TO BASIC (RESTORE)
00085  100F              ;*********************************
00086  100F              ;WREADY=$E391 ;BASIC RETURN
00087  100F              WREADY = $867E         ;BASICW
00088  100F              ;*********************************
00089  100F              ; ZEROPAGE USAGE EQUATES
00090  100F              ;*********************************
00091  100F              ;ZEROUR=$02 ;ZEROPAGE POINTER
00092  100F              MEMSIZ=$37             ;TOP OF FREE RAM+1
00093  100F              ;*********************************
00094  100F              ; ZEROPAGE USAGE EQUATES
00095  100F              ; $00D8-00E8  APPLICATION SOFTWARE
00096  100F              ;*********************************
00097  100F              ZEROUR=$DD             ;$FD    ;ZERO PAGE POINTER

00098  100F              ;*********************************
00099  100F              ;        ENTRY POINT
00100  100F              ;*********************************
00101  100F  4C 21 12    STARTD JMP DISASS
00102  1012              ;*********************************
00103  1012              ;       VARIABLES
00104  1012              ;*********************************
00105  1012  31          PASS   .BYTE '1'       ;PASS INDICATOR
00106  1013  31          IPASS  .BYTE '1'       ;INTERNAL PASS
00107  1014  32          EPASS  .BYTE '2'       ;EXTERNAL PASS
00108  1015  33          CPASS  .BYTE '3'       ;PRINTING PASS
00109  1016  34          SPASS  .BYTE '4'       ;SYMBOL PASS
00110  1017              ;*********************************






PDISASS64.ASM......PAGE 0003

LINE# LOC   CODE        LINE


00111  1017  AA          XOPT   .BYTE $AA       ;LABEL GENERATION
00112  1018  AA          ROPT   .BYTE $AA       ;REL ADDRESS OPT
00113  1019  AA          DEVICE .BYTE $AA       ;OUTPUT DEVICE
00114  101A  AA          OUTPUT .BYTE $AA       ;OUTPUT FLAG
00115  101B  AA          WINDOW .BYTE $AA       ;WINDOW FLAG
00116  101C  AA          FOROPT .BYTE $AA       ;FORMAT FLAG
00117  101D  AA          COMOPT .BYTE $AA       ;COMMENT FLAG
00118  101E              ;*********************************
00119  101E              ; DISASSEMBLY ADDRESS POINTERS
00120  101E              ;*********************************
00121  101E  AA AA       SA     .WORD $AAAA     ;START ADDRESS
00122  1020  AA AA       EA     .WORD $AAAA     ;END ADDRESS
00123  1022  AA AA       SELECT .WORD $AAAA     ;BYTE POINTER
00124  1024  AA AA       OFFSET .WORD $AAAA     ;ADDRESS OFFSET
00125  1026  AA AA       SAGOL  .WORD $AAAA     ;GOLBAL START
00126  1028  AA AA       EAGOL  .WORD $AAAA     ;GOLBAL END
00127  102A  AA AA       SAOUT  .WORD $AAAA     ;START ADDRESS
00128  102C  AA AA       EAOUT  .WORD $AAAA     ;END ADDRESS
00129  102E              ;*********************************
00130  102E              ; INTERNAL ADDRESS TABLE
00131  102E              ;*********************************
00132  102E  AA AA       TABINP .WORD $AAAA     ;TABLE POINTER
00133  1030  AA AA       TABINS .WORD $AAAA     ;TABLE START
00134  1032  AA AA       TABINE .WORD $AAAA     ;TABLE END
00135  1034              ;*********************************
00136  1034              ; SORT TABLE POINTERS
00137  1034              ;*********************************
00138  1034  AA AA       SMALLS .WORD $AAAA     ;TABLE START
00139  1036  AA AA       SMALLP .WORD $AAAA     ;TABLE POINTER
00140  1038              ;*********************************
00141  1038              ; SYMBOL TABLE
00142  1038              ;*********************************
00143  1038  AA          SYMBOL .BYTE $AA       ;SYMBOL OPTION
00144  1039  AA AA       SYMBOP .WORD $AAAA     ;TABLE POINTER
00145  103B  AA AA       SYMBOS .WORD $AAAA     ;TABLE START
00146  103D  AA AA       SYMBOE .WORD $AAAA     ;TABLE END
00147  103F              ;*********************************
00148  103F              ; UNDEFINED SYMBOL TABLE
00149  103F              ;*********************************
00150  103F  AA AA       UYMBOP .WORD $AAAA     ;TABLE POINTER
00151  1041  AA AA       UYMBOS .WORD $AAAA     ;TABLE START
00152  1043  AA AA       UYMBOE .WORD $AAAA     ;TABLE END
00153  1045              ;*********************************
00154  1045              ; TEMP WORKING STORAGE
00155  1045              ;*********************************
00156  1045  AA AA       WORKED .WORD $AAAA     ;TWO BYTE OP
00157  1047  AA AA       WORKER .WORD $AAAA     ;TWO BYTE OP
00158  1049  AA AA       SAVEP  .WORD $AAAA     ;TWO BYTE OP
00159  104B  AA AA       SAVES  .WORD $AAAA     ;TWO BYTE OP
00160  104D  AA AA       SAVEE  .WORD $AAAA     ;TWO BYTE OP
00161  104F              ;*********************************
00162  104F              ; OTHER VARIABLES
00163  104F              ;*********************************
00164  104F  AA AA       ADRS   .WORD $AAAA
00165  1051  AA          TEMP   .BYTE $AA






PDISASS64.ASM......PAGE 0004

LINE# LOC   CODE        LINE


00166  1052  AA          SAVA   .BYTE $AA
00167  1053  AA          SAVX   .BYTE $AA
00168  1054  AA          SAVY   .BYTE $AA
00169  1055              ;*********************************
00170  1055              ; PRINTER OUTPUT STORAGE
00171  1055              ;*********************************
00172  1055  AA AA       PAGECT .WORD $AAAA     ;PAGE COUNT
00173  1057  AA          LISTCT .BYTE $AA       ;LINE COUNT
00174  1058  AA AA       LINECT .WORD $AAAA     ;LINE COUNT
00175  105A  AA AA       ERRCT  .WORD $AAAA     ;ERROR COUNT
00176  105C              ;*********************************
00177  105C              ; INPUT BUFFER
00178  105C              ;*********************************
00179  105C              BUF    = *
00180  105C  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00180  105D  00 
00180  105E  00 
00180  105F  00 
00180  1060  00 
00180  1061  00 
00180  1062  00 
00180  1063  00 
00180  1064  00 
00180  1065  00 
00181  1066  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00181  1067  00 
00181  1068  00 
00181  1069  00 
00181  106A  00 
00181  106B  00 
00181  106C  00 
00181  106D  00 
00181  106E  00 
00181  106F  00 
00182  1070  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00182  1071  00 
00182  1072  00 
00182  1073  00 
00182  1074  00 
00182  1075  00 
00182  1076  00 
00182  1077  00 
00182  1078  00 
00182  1079  00 
00183  107A  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00183  107B  00 
00183  107C  00 
00183  107D  00 
00183  107E  00 
00183  107F  00 
00183  1080  00 
00183  1081  00 
00183  1082  00 
00183  1083  00 
00184  1084  00                 .BYTE 0,0,0,0,0,0,0,0,0,0






PDISASS64.ASM......PAGE 0005

LINE# LOC   CODE        LINE


00184  1085  00 
00184  1086  00 
00184  1087  00 
00184  1088  00 
00184  1089  00 
00184  108A  00 
00184  108B  00 
00184  108C  00 
00184  108D  00 
00185  108E  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00185  108F  00 
00185  1090  00 
00185  1091  00 
00185  1092  00 
00185  1093  00 
00185  1094  00 
00185  1095  00 
00185  1096  00 
00185  1097  00 
00186  1098  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00186  1099  00 
00186  109A  00 
00186  109B  00 
00186  109C  00 
00186  109D  00 
00186  109E  00 
00186  109F  00 
00186  10A0  00 
00186  10A1  00 
00187  10A2  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00187  10A3  00 
00187  10A4  00 
00187  10A5  00 
00187  10A6  00 
00187  10A7  00 
00187  10A8  00 
00187  10A9  00 
00187  10AA  00 
00187  10AB  00 
00188  10AC  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00188  10AD  00 
00188  10AE  00 
00188  10AF  00 
00188  10B0  00 
00188  10B1  00 
00188  10B2  00 
00188  10B3  00 
00188  10B4  00 
00188  10B5  00 
00189  10B6  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00189  10B7  00 
00189  10B8  00 
00189  10B9  00 
00189  10BA  00 
00189  10BB  00 






PDISASS64.ASM......PAGE 0006

LINE# LOC   CODE        LINE


00189  10BC  00 
00189  10BD  00 
00189  10BE  00 
00189  10BF  00 
00190  10C0              ;*********************************
00191  10C0              ; FILE NAME BUFFER
00192  10C0              ;*********************************
00193  10C0  AA AA       LINEFL .WORD $AAAA
00194  10C2  AA          VERSON .BYTE $AA
00195  10C3  AA          NCHARS .BYTE $AA
00196  10C4              NBUF   = *
00197  10C4  30 3A              .BYTE '0:'
00198  10C6  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
00198  10C7  AA 
00198  10C8  AA 
00198  10C9  AA 
00198  10CA  AA 
00198  10CB  AA 
00198  10CC  AA 
00198  10CD  AA 
00199  10CE  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
00199  10CF  AA 
00199  10D0  AA 
00199  10D1  AA 
00199  10D2  AA 
00199  10D3  AA 
00199  10D4  AA 
00199  10D5  AA 
00200  10D6  AA                 .BYTE $AA,$AA,$AA,$AA
00200  10D7  AA 
00200  10D8  AA 
00200  10D9  AA 
00201  10DA              ;*********************************
00202  10DA              ; SYMBOL TABLE BUFFER
00203  10DA              ;*********************************
00204  10DA              SYMBUF = *
00205  10DA  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,
$AA
00205  10DB  AA 
00205  10DC  AA 
00205  10DD  AA 
00205  10DE  AA 
00205  10DF  AA 
00205  10E0  AA 
00205  10E1  AA 
00205  10E2  AA 
00205  10E3  AA 
00206  10E4              ;*********************************
00207  10E4              ; DATA TABLE
00208  10E4              ;*********************************
00209  10E4  AA AA       EAS    .WORD $AAAA
00210  10E6  AA          TEXTER .BYTE $AA
00211  10E7  AA AA       CDATA  .WORD $AAAA
00212  10E9  AA AA       NDATA  .WORD $AAAA
00213  10EB  AA AA       DATABP .WORD $AAAA     ;DATA POINT
00214  10ED  AA AA       DATABS .WORD $AAAA     ;DATA START






PDISASS64.ASM......PAGE 0007

LINE# LOC   CODE        LINE


00215  10EF  AA AA       DATABE .WORD $AAAA     ;DATA END
00216  10F1              ;*********************************
00217  10F1              ; DATA TABLE
00218  10F1              ;*********************************
00219  10F1  AA          TDATA  .BYTE $AA
00220  10F2              ;*********************************
00221  10F2              *=*+$0100
00222  11F2              ;*********************************
00223  11F2  0D          MPASS  .BYTE $0D,'PASS',0
00223  11F3  50 41 
00223  11F7  00 
00224  11F8  0D          PMSG   .BYTE $0D,$12,' PAUSE ',$92,$0D,0
00224  11F9  12 
00224  11FA  20 50 
00224  1201  92 
00224  1202  0D 
00224  1203  00 
00225  1204  45 52       MSGERR .BYTE 'ERRORS = ',0
00225  120D  00 
00226  120E  45 4E       MSGDIS .BYTE 'END OF DISASSEMBLY',0
00226  1220  00 
00227  1221              ;*********************************
00228  1221              ; INITIALIZE DISASSEMBLER
00229  1221              ;*********************************
00230  1221  A2 FF       DISASS LDX #$FF
00231  1223  9A                 TXS
00232  1224  D8                 CLD
00233  1225  20 6D 13           JSR DOP         ;GET OPTIONS
00234  1228  20 62 22           JSR INITIN      ;INIT POINTERS
00235  122B  A9 31              LDA #'1'        ;PASS ONE
00236  122D  8D 12 10           STA PASS        ;SET PASS INDICATOR
00237  1230              ;*********************************
00238  1230              ; DISASSEMBLER LOOP
00239  1230              ;*********************************
00240  1230  20 4E 21    DISA   JSR INTSA       ;SET SA
00241  1233  A9 00              LDA #00         ;ZERO BYTE
00242  1235  8D E7 10           STA CDATA       ;SET TABLE NUMBER
00243  1238  A9 F2              LDA #<MPASS     ;PASS MSG
00244  123A  A0 11              LDY #>MPASS     ;
00245  123C  20 BB 1B           JSR STRPNT      ;PRINT IT
00246  123F  AD 12 10           LDA PASS        ;GET PASS
00247  1242  20 11 1C           JSR PCHAR       ;PRINT NUMBER
00248  1245  20 F3 20           JSR CRLF        ;CR
00249  1248              ;*********************************
00250  1248  AD 12 10           LDA PASS        ;GET PASS
00251  124B  CD 15 10           CMP CPASS       ;IS IT LAST
00252  124E  F0 0E              BEQ DISB        ;IF SO PRINT
00253  1250  CD 14 10           CMP EPASS       ;IS IT EXTERNAL
00254  1253  D0 3A              BNE DLOOP       ;IF NOT GO ON
00255  1255  20 81 22           JSR SAVINT      ;SAVE INTERNAL
00256  1258  20 35 2B           JSR EQUINT      ;SET EQUATES
00257  125B  4C 8F 12           JMP DLOOP       ;GO ON
00258  125E              ;*********************************
00259  125E  A9 01       DISB   LDA #$01        ;ONE BYTE
00260  1260  8D 58 10           STA LINECT      ;SET LINE # TO 1






PDISASS64.ASM......PAGE 0008

LINE# LOC   CODE        LINE


00261  1263  8D 55 10           STA PAGECT      ;SET PAGE TO 1
00262  1266  A9 00              LDA #$00        ;ZERO BYTE
00263  1268  8D 59 10           STA LINECT+1    ;SET LINE # TO 1
00264  126B  8D 56 10           STA PAGECT+1    ;SET PAGE TO 1
00265  126E  8D 57 10           STA LISTCT      ;SET LIST TO 0
00266  1271  8D 5A 10           STA ERRCT       ;SET ERROR TO 0
00267  1274  8D 5B 10           STA ERRCT+1     ;SET ERROR TO 0
00268  1277  8D C0 10           STA LINEFL      ;SET LINE TO 0
00269  127A  8D C1 10           STA LINEFL+1    ;SET LINE TO 0
00270  127D  AD 1A 10           LDA OUTPUT      ;GET OUTPUT
00271  1280  8D 19 10           STA DEVICE      ;SET OUTPUT
00272  1283              ;*********************************
00273  1283  20 7A 1C           JSR HEADER      ;PRINT HEADER
00274  1286  20 96 15           JSR OFILED      ;OPEN DISK FILE
00275  1289  20 3B 20           JSR ORGIN       ;PRINT ORGIN LABEL
00276  128C  20 40 2C           JSR EQUPRT      ;PRINT EQUATE
00277  128F              ;********************************
00278  128F  20 7D 1D    DLOOP  JSR DSLINE      ;DIS ONE LINE
00279  1292  B0 2C              BCS NEXTP       ;IF EA STOP
00280  1294  20 85 1A           JSR LINECK      ;LINE COUNT
00281  1297  20 E1 FF           JSR STOP        ;CHECK STOP
00282  129A  F0 57              BEQ QUITS       ;IF SO QUIT
00283  129C  20 E4 FF           JSR GETIN       ;GET KEY
00284  129F  F0 EE              BEQ DLOOP       ;IF NONE NEXT
00285  12A1  C9 20              CMP #' '          ;IS IT A SPACE
00286  12A3  D0 EA              BNE DLOOP       ;IF NOT NEXT
00287  12A5              ;*********************************
00288  12A5              ; PAUSE LISTING
00289  12A5              ;********************************
00290  12A5  AD 19 10           LDA DEVICE
00291  12A8  48                 PHA
00292  12A9  A9 03              LDA #$03
00293  12AB  8D 19 10           STA DEVICE
00294  12AE  A9 F8              LDA #<PMSG
00295  12B0  A0 11              LDY #>PMSG
00296  12B2  20 BB 1B           JSR STRPNT
00297  12B5  68                 PLA
00298  12B6  8D 19 10           STA DEVICE
00299  12B9  20 E4 FF    PAUSE  JSR GETIN       ;PAUSE FOR KEY
00300  12BC  F0 FB              BEQ PAUSE       ;
00301  12BE  D0 CF              BNE DLOOP       ;NEXT LINE
00302  12C0              ;********************************
00303  12C0  EE 12 10    NEXTP  INC PASS        ;INC PASS
00304  12C3  AD 12 10           LDA PASS        ;GET PASS
00305  12C6  CD 15 10           CMP CPASS       ;LAST PASS?
00306  12C9  90 1F              BCC DISFUL      ;IF LESS AGAIN
00307  12CB  D0 20              BNE DISC        ;FINISH
00308  12CD  AD 1B 10           LDA WINDOW      ;WINDOW FLAG
00309  12D0  F0 18              BEQ DISFUL      ;FULL OUTPUT
00310  12D2              ;*********************************
00311  12D2              ; WINDOWED OUTPUT
00312  12D2              ;*********************************
00313  12D2  AD 2A 10           LDA SAOUT       ;
00314  12D5  8D 1E 10           STA SA          ;
00315  12D8  AD 2B 10           LDA SAOUT+1     ;






PDISASS64.ASM......PAGE 0009

LINE# LOC   CODE        LINE


00316  12DB  8D 1F 10           STA SA+1        ;
00317  12DE  AD 2C 10           LDA EAOUT       ;
00318  12E1  8D 20 10           STA EA          ;
00319  12E4  AD 2D 10           LDA EAOUT+1     ;
00320  12E7  8D 21 10           STA EA+1        ;
00321  12EA              ;*********************************
00322  12EA  4C 30 12    DISFUL JMP DISA        ;LAST PASS
00323  12ED  20 23 21    DISC   JSR INCSL
00324  12F0  20 51 20           JSR EFILE       ;END FILE MSG
00325  12F3              ;*********************************
00326  12F3  AD 19 10    QUITS  LDA DEVICE      ;CHECK DEV
00327  12F6  29 08              AND #$08        ;DISK FILE?
00328  12F8  F0 10              BEQ QUTERR      ;IF NOT BRANCH
00329  12FA  A9 08              LDA #$08        ;DISK
00330  12FC  20 C3 FF           JSR CLOSE       ;CLOSE IT
00331  12FF  AD 1A 10           LDA OUTPUT      ;GET OUTPUT
00332  1302  29 07              AND #07         ;MASK DISK
00333  1304  8D 1A 10           STA OUTPUT      ;RESET OUTPUT
00334  1307  8D 19 10           STA DEVICE      ;RESET OUTPUT
00335  130A              ;*********************************
00336  130A              ; PRINT ERRORS
00337  130A              ;*********************************
00338  130A  AD 1A 10    QUTERR LDA OUTPUT
00339  130D  09 03              ORA #$03
00340  130F  8D 1A 10           STA OUTPUT
00341  1312  8D 19 10           STA DEVICE
00342  1315  20 FE 1A           JSR NEWLIN
00343  1318  20 FE 1A           JSR NEWLIN
00344  131B  A9 04              LDA #<MSGERR
00345  131D  A0 12              LDY #>MSGERR
00346  131F  20 BB 1B           JSR STRPNT
00347  1322  AE 5A 10           LDX ERRCT
00348  1325  AD 5B 10           LDA ERRCT+1
00349  1328  20 D7 1B           JSR PRTNUM
00350  132B              ;*********************************
00351  132B  AD 19 10           LDA DEVICE      ;CHECK DEV
00352  132E  29 04              AND #$04        ;PRINTER?
00353  1330  F0 13              BEQ DONED       ;IF NOT DONE
00354  1332  A9 04              LDA #$04        ;DEVICE 4
00355  1334  8D 1A 10           STA OUTPUT      ;SET DEVICE
00356  1337  8D 19 10           STA DEVICE      ;SET DEVICE
00357  133A  20 33 24           JSR INTPRT      ;PRINT INTABLE
00358  133D  A9 07              LDA #$07        ;DEVICE 3 AND 4
00359  133F  8D 19 10           STA DEVICE      ;SET DEVICE
00360  1342  8D 1A 10           STA OUTPUT      ;SET DEVICE
00361  1345  20 FE 1A    DONED  JSR NEWLIN      ;NEWLINE
00362  1348  20 FE 1A           JSR NEWLIN      ;NEWLINE
00363  134B  A9 0E              LDA #<MSGDIS    ;END MSG
00364  134D  A0 12              LDY #>MSGDIS
00365  134F  20 BB 1B           JSR STRPNT      ;PRINT IT
00366  1352  20 FE 1A           JSR NEWLIN      ;NEW LINE
00367  1355  AD 19 10           LDA DEVICE      ;CHECK DEVICE
00368  1358  29 04              AND #$04        ;PRINTER
00369  135A  F0 08              BEQ DONE        ;
00370  135C  20 48 1C           JSR FINISH      ;FINISH PAGE






PDISASS64.ASM......PAGE 0010

LINE# LOC   CODE        LINE


00371  135F  A9 04              LDA #$04        ;PRINTER
00372  1361  20 C3 FF           JSR CLOSE       ;CLOSE FILE
00373  1364              ;*********************************
00374  1364  20 CC FF    DONE   JSR CLRCHN      ;RESET I/O
00375  1367  20 08 1D           JSR SCRON       ;TURN SCREEN ON
00376  136A  4C 7E 86           JMP WREADY      ;RETURN
00377  136D              ;*********************************
00378  136D              ;.FIL 0:OPTION.ASM
00379  136D              ;*********************************
00380  136D              ;.END
00381  136D              ;*********************************
00382  136D              ; FILE OPTION.ASM
00383  136D              ;*********************************
00384  136D              ;
00385  136D              ;        DISASSEMBLER64
00386  136D              ;    SYMBOLIC DISASSEMBLER
00387  136D              ;       BY DENTON MARLOWE
00388  136D              ;
00389  136D              ;  (C)1986 BY DENTON MARLOWE
00390  136D              ;
00391  136D              ;*********************************
00392  136D              ; DISASSEMBLER OPTIONS
00393  136D              ;*********************************
00394  136D  A9 03       DOP    LDA #$03        ;DEVICE #3 SCREEN
00395  136F  8D 19 10           STA DEVICE      ;CURRENT OUTPUT
00396  1372  A9 00              LDA #$00        ;NO DEVICES
00397  1374  8D 1A 10           STA OUTPUT      ;FINAL OUTPUT
00398  1377  A9 B4              LDA #<MSG       ;START UP MSG
00399  1379  A0 17              LDY #>MSG
00400  137B  20 BB 1B           JSR STRPNT      ;PRINT IT
00401  137E              ;*********************************
00402  137E              ; READ IN DISK FILE ?
00403  137E              ;*********************************
00404  137E  A9 01              LDA #<MSF1
00405  1380  A0 18              LDY #>MSF1
00406  1382  20 BB 1B           JSR STRPNT
00407  1385  20 1C 1B           JSR INSTNG
00408  1388  D0 03              BNE PFILE0
00409  138A  4C C5 14           JMP STARTS
00410  138D  A2 00       PFILE0 LDX #$00
00411  138F  BD 52 18    PFILE1 LDA PROGM,X
00412  1392  99 5C 10           STA BUF,Y
00413  1395  C8                 INY
00414  1396  E8                 INX
00415  1397  E0 04              CPX #$04
00416  1399  D0 F4              BNE PFILE1
00417  139B  8C 52 10           STY SAVA
00418  139E  20 AB 14           JSR INITD
00419  13A1  20 85 14           JSR PRFILE
00420  13A4              ;*********************************
00421  13A4              ; READ IN FILE FOR SA AND EA
00422  13A4              ;*********************************
00423  13A4  A2 08              LDX #$08        ;FILE #8
00424  13A6  20 C6 FF           JSR CHKIN       ;INPUT FILE
00425  13A9  20 CF FF           JSR CHRIN       ;GET LOW BYTE SA






PDISASS64.ASM......PAGE 0011

LINE# LOC   CODE        LINE


00426  13AC  8D 1E 10           STA SA          ;SET START
00427  13AF  20 CF FF           JSR CHRIN       ;GET HIGH BYTE SA
00428  13B2  8D 1F 10           STA SA+1        ;SET START
00429  13B5  20 4E 21           JSR INTSA       ;SET END
00430  13B8              ;*********************************
00431  13B8  A9 00              LDA #$00        ;ZERO BYTE
00432  13BA  8D 4F 10           STA ADRS        ;BYTE COUNTER
00433  13BD  8D 50 10           STA ADRS+1      ;BYTE COUNTER
00434  13C0  20 CF FF    PROGRD JSR CHRIN       ;INPUT BYTE
00435  13C3  20 B7 FF           JSR READST      ;READ STATUS
00436  13C6  D0 0D              BNE PROGED      ;IF NOT ZERO END
00437  13C8  20 23 21           JSR INCSL       ;INC END ADDRESS
00438  13CB  EE 4F 10           INC ADRS        ;INC BYTE COUNT
00439  13CE  D0 03              BNE *+5         ;
00440  13D0  EE 50 10           INC ADRS+1      ;
00441  13D3  D0 EB              BNE PROGRD      ;NEXT BYTE
00442  13D5  AD 22 10    PROGED LDA SELECT      ;
00443  13D8  8D 20 10           STA EA          ;
00444  13DB  AD 23 10           LDA SELECT+1    ;
00445  13DE  8D 21 10           STA EA+1        ;
00446  13E1              ;*********************************
00447  13E1  A9 08              LDA #$08        ;FILE #8
00448  13E3  20 C3 FF           JSR CLOSE       ;CLOSE IT
00449  13E6  20 CC FF           JSR CLRCHN      ;RESET I/O
00450  13E9              ;*********************************
00451  13E9              ; PRINT PROGRAM LOAD ADDRESS
00452  13E9              ; AND END ADDRESS
00453  13E9              ;*********************************
00454  13E9  A9 1D              LDA #<MSF2
00455  13EB  A0 18              LDY #>MSF2
00456  13ED  20 BB 1B           JSR STRPNT
00457  13F0  AD 1E 10           LDA SA
00458  13F3  8D 45 10           STA WORKED
00459  13F6  AD 1F 10           LDA SA+1
00460  13F9  8D 46 10           STA WORKED+1
00461  13FC  20 C2 20           JSR PWORKD
00462  13FF              ;
00463  13FF  A9 2D              LDA #'-'
00464  1401              ;
00465  1401  20 11 1C           JSR PCHAR
00466  1404  20 D0 20           JSR DOLLAR
00467  1407  20 B6 20           JSR PSELEC
00468  140A  20 F3 20           JSR CRLF
00469  140D              ;*********************************
00470  140D              ; CALCULATE BUFFER ADDRESS
00471  140D              ;*********************************
00472  140D  A9 00              LDA #$00        ;MEMSIZ
00473  140F  8D 22 10           STA SELECT
00474  1412  A9 80              LDA #$80        ;MEMSIZ+1
00475  1414  8D 23 10           STA SELECT+1
00476  1417  20 42 21           JSR DECSL
00477  141A  38                 SEC
00478  141B  AD 22 10           LDA SELECT
00479  141E  ED 4F 10           SBC ADRS
00480  1421  8D 22 10           STA SELECT






PDISASS64.ASM......PAGE 0012

LINE# LOC   CODE        LINE


00481  1424  AD 23 10           LDA SELECT+1
00482  1427  ED 50 10           SBC ADRS+1
00483  142A  8D 23 10           STA SELECT+1
00484  142D              ;*********************************
00485  142D              ; CALCULATE ADDRESS OFFSET
00486  142D              ;*********************************
00487  142D  38                 SEC
00488  142E  AD 22 10           LDA SELECT
00489  1431  ED 1E 10           SBC SA
00490  1434  8D 24 10           STA OFFSET
00491  1437  8D 45 10           STA WORKED
00492  143A  AD 23 10           LDA SELECT+1
00493  143D  ED 1F 10           SBC SA+1
00494  1440  8D 25 10           STA OFFSET+1
00495  1443  8D 46 10           STA WORKED+1
00496  1446  A9 AD              LDA #<MSD4A
00497  1448  A0 18              LDY #>MSD4A
00498  144A  20 BB 1B           JSR STRPNT
00499  144D  20 C2 20           JSR PWORKD
00500  1450  20 F3 20           JSR CRLF
00501  1453              ;*********************************
00502  1453              ; OPEN FILE AND READ PRG INTO BUF
00503  1453              ;*********************************
00504  1453  20 85 14           JSR PRFILE      ;OPEN FILE
00505  1456  A2 08              LDX #$08        ;FILE #8
00506  1458  20 C6 FF           JSR CHKIN       ;INPUT FILE
00507  145B  20 CF FF           JSR CHRIN       ;GET LOW BYTE SA
00508  145E  20 CF FF           JSR CHRIN       ;GET HIGH BYTE SA
00509  1461  20 CF FF    PRO2RD JSR CHRIN       ;INPUT BYTE
00510  1464  AE 22 10           LDX SELECT      ;LOW BYTE POINTER
00511  1467  86 DD              STX ZEROUR      ;ZERO PAGE
00512  1469  AE 23 10           LDX SELECT+1    ;HIH BYTE POINTER
00513  146C  86 DE              STX ZEROUR+1    ;ZERO PAGE
00514  146E  A0 00              LDY #$00        ;OFFSET
00515  1470  91 DD              STA (ZEROUR),Y  ;STORE BYTE
00516  1472  20 23 21           JSR INCSL       ;INC POINTER
00517  1475  20 B7 FF           JSR READST      ;READ STATUS
00518  1478  F0 E7              BEQ PRO2RD      ;NEXT BYTE
00519  147A  A9 08              LDA #$08        ;FILE #8
00520  147C  20 C3 FF           JSR CLOSE       ;CLOSE IT
00521  147F  20 CC FF           JSR CLRCHN      ;RESET I/O
00522  1482  4C 07 15           JMP WINDOP      ;WINDOW OPTION
00523  1485              ;*********************************
00524  1485              ; OPEN PROGRAM FILE
00525  1485              ;*********************************
00526  1485  AD 52 10    PRFILE LDA SAVA
00527  1488  A2 5C              LDX #<BUF
00528  148A  A0 10              LDY #>BUF
00529  148C  20 BD FF           JSR SETNAM
00530  148F  A9 08              LDA #$08
00531  1491  A8                 TAY
00532  1492  AA                 TAX
00533  1493  20 BA FF           JSR SETLFS
00534  1496  20 C0 FF           JSR OPEN
00535  1499  20 C4 1A           JSR DISERR






PDISASS64.ASM......PAGE 0013

LINE# LOC   CODE        LINE


00536  149C  90 0C              BCC PROGOK
00537  149E  A9 08              LDA #$08
00538  14A0  20 C3 FF           JSR CLOSE
00539  14A3  68                 PLA
00540  14A4  68                 PLA
00541  14A5  68                 PLA
00542  14A6  68                 PLA
00543  14A7  4C 7E 86           JMP WREADY
00544  14AA              ;*********************************
00545  14AA  60          PROGOK RTS
00546  14AB              ;*********************************
00547  14AB              ; INIT DISK
00548  14AB              ;*********************************
00549  14AB  A9 02       INITD  LDA #$02
00550  14AD  A0 18              LDY #>INIT
00551  14AF  A2 56              LDX #<INIT
00552  14B1  20 BD FF           JSR SETNAM
00553  14B4  A9 0F              LDA #$0F
00554  14B6  A2 08              LDX #$08
00555  14B8  A0 0F              LDY #$0F
00556  14BA  20 BA FF           JSR SETLFS
00557  14BD  20 C0 FF           JSR OPEN
00558  14C0  A9 0F              LDA #$0F
00559  14C2  4C C3 FF           JMP CLOSE
00560  14C5              ;*********************************
00561  14C5              ; GET START ADDRESS
00562  14C5              ;*********************************
00563  14C5  A9 71       STARTS LDA #<MSD1
00564  14C7  A0 18              LDY #>MSD1
00565  14C9  20 BB 1B           JSR STRPNT
00566  14CC  20 2B 1B           JSR GETWRD
00567  14CF  AD 4F 10           LDA ADRS
00568  14D2  8D 1E 10           STA SA
00569  14D5  AD 50 10           LDA ADRS+1
00570  14D8  8D 1F 10           STA SA+1
00571  14DB              ;*********************************
00572  14DB              ; GET END ADDRESS
00573  14DB              ;*********************************
00574  14DB  A9 83              LDA #<MSD2
00575  14DD  A0 18              LDY #>MSD2
00576  14DF  20 BB 1B           JSR STRPNT
00577  14E2  20 2B 1B           JSR GETWRD
00578  14E5  AD 4F 10           LDA ADRS
00579  14E8  8D 20 10           STA EA
00580  14EB  AD 50 10           LDA ADRS+1
00581  14EE  8D 21 10           STA EA+1
00582  14F1              ;*********************************
00583  14F1              ; ADDRRESS OFFSET
00584  14F1              ;*********************************
00585  14F1  A9 93              LDA #<MSD4
00586  14F3  A0 18              LDY #>MSD4
00587  14F5  20 BB 1B           JSR STRPNT
00588  14F8  20 2B 1B           JSR GETWRD
00589  14FB  AD 4F 10           LDA ADRS
00590  14FE  8D 24 10           STA OFFSET






PDISASS64.ASM......PAGE 0014

LINE# LOC   CODE        LINE


00591  1501  AD 50 10           LDA ADRS+1
00592  1504  8D 25 10           STA OFFSET+1
00593  1507              ;*********************************
00594  1507              ; OUTPUT WINDOW
00595  1507              ;*********************************
00596  1507  A9 C0       WINDOP LDA #<MSD5
00597  1509  A0 18              LDY #>MSD5
00598  150B  20 BB 1B           JSR STRPNT
00599  150E  20 90 1B           JSR CRNO
00600  1511  B0 30              BCS WIND1
00601  1513  A9 71              LDA #<MSD1
00602  1515  A0 18              LDY #>MSD1
00603  1517  20 BB 1B           JSR STRPNT
00604  151A  20 2B 1B           JSR GETWRD
00605  151D  AD 4F 10           LDA ADRS
00606  1520  8D 2A 10           STA SAOUT
00607  1523  AD 50 10           LDA ADRS+1
00608  1526  8D 2B 10           STA SAOUT+1
00609  1529  A9 83              LDA #<MSD2
00610  152B  A0 18              LDY #>MSD2
00611  152D  20 BB 1B           JSR STRPNT
00612  1530  20 2B 1B           JSR GETWRD
00613  1533  AD 4F 10           LDA ADRS
00614  1536  8D 2C 10           STA EAOUT
00615  1539  AD 50 10           LDA ADRS+1
00616  153C  8D 2D 10           STA EAOUT+1
00617  153F  A9 FF              LDA #$FF
00618  1541  30 02              BMI WIND2
00619  1543  A9 00       WIND1  LDA #$00
00620  1545  8D 1B 10    WIND2  STA WINDOW
00621  1548              ;*********************************
00622  1548              ; SETUP GOBAL POINTER
00623  1548              ;*********************************
00624  1548  AD 1E 10           LDA SA
00625  154B  8D 26 10           STA SAGOL
00626  154E  AD 1F 10           LDA SA+1
00627  1551  8D 27 10           STA SAGOL+1
00628  1554  AD 20 10           LDA EA
00629  1557  8D 28 10           STA EAGOL
00630  155A  AD 21 10           LDA EA+1
00631  155D  8D 29 10           STA EAGOL+1
00632  1560              ;*********************************
00633  1560              ; SOURCE FILE OUTPUT?
00634  1560              ;*********************************
00635  1560  A9 31       OUFILE LDA #<MSG1
00636  1562  A0 18              LDY #>MSG1
00637  1564  20 BB 1B           JSR STRPNT
00638  1567              ;*********************************
00639  1567  A9 00              LDA #$00
00640  1569  8D C3 10           STA NCHARS
00641  156C  20 1C 1B           JSR INSTNG
00642  156F  F0 1A              BEQ NOFILE
00643  1571  A9 30              LDA #'0'
00644  1573  8D C2 10           STA VERSON
00645  1576  8C C3 10           STY NCHARS






PDISASS64.ASM......PAGE 0015

LINE# LOC   CODE        LINE


00646  1579  A2 00              LDX #$00
00647  157B  BD 5C 10    GFILE0 LDA BUF,X
00648  157E  9D C4 10           STA NBUF,X
00649  1581  E8                 INX
00650  1582  EC C3 10           CPX NCHARS
00651  1585  D0 F4              BNE GFILE0
00652  1587              ;*********************************
00653  1587  A9 08       FILEOK LDA #$08
00654  1589  D0 02              BNE FILE
00655  158B  A9 00       NOFILE LDA #$00
00656  158D  0D 1A 10    FILE   ORA OUTPUT
00657  1590  8D 1A 10           STA OUTPUT
00658  1593  4C EC 15           JMP PRTGET
00659  1596              ;*********************************
00660  1596              ;     OPEN SOURCE DISK FILE
00661  1596              ;*********************************
00662  1596  AC C3 10    OFILED LDY NCHARS
00663  1599  F0 03              BEQ NOID
00664  159B  20 AB 14           JSR INITD
00665  159E  20 F8 1C    NOID   JSR SCROFF
00666  15A1              ;*********************************
00667  15A1  AC C3 10    OFILE  LDY NCHARS
00668  15A4  F0 45              BEQ OFILE4
00669  15A6  AD C2 10           LDA VERSON
00670  15A9  C9 30              CMP #'0'
00671  15AB  F0 07              BEQ OFILE1
00672  15AD  AD C2 10           LDA VERSON
00673  15B0  99 C4 10           STA NBUF,Y
00674  15B3  C8                 INY
00675  15B4  EE C2 10    OFILE1 INC VERSON
00676  15B7  A2 00              LDX #$00
00677  15B9  BD 4E 18    OFILE2 LDA WRITE,X
00678  15BC  99 C4 10           STA NBUF,Y
00679  15BF  C8                 INY
00680  15C0  E8                 INX
00681  15C1  E0 04              CPX #$04
00682  15C3  D0 F4              BNE OFILE2
00683  15C5  98                 TYA
00684  15C6  A0 10              LDY #>NBUF
00685  15C8  A2 C4              LDX #<NBUF
00686  15CA  20 BD FF           JSR SETNAM
00687  15CD  A9 08              LDA #$08
00688  15CF  AA                 TAX
00689  15D0  A8                 TAY
00690  15D1  20 BA FF           JSR SETLFS
00691  15D4  20 C0 FF           JSR OPEN
00692  15D7  20 C4 1A           JSR DISERR
00693  15DA  90 0F              BCC OFILE4
00694  15DC              ;*********************************
00695  15DC              ;  CLOSE OUT FILE ON ERROR
00696  15DC              ;*********************************
00697  15DC  A9 08       OFILE3 LDA #$08
00698  15DE  20 C3 FF           JSR CLOSE
00699  15E1  20 CC FF           JSR CLRCHN
00700  15E4  68                 PLA






PDISASS64.ASM......PAGE 0016

LINE# LOC   CODE        LINE


00701  15E5  68                 PLA
00702  15E6  68                 PLA
00703  15E7  68                 PLA
00704  15E8  4C 7E 86           JMP WREADY
00705  15EB  60          OFILE4 RTS
00706  15EC              ;*********************************
00707  15EC              ; GET PRINTER OPTION
00708  15EC              ;*********************************
00709  15EC  A9 58       PRTGET LDA #<MSG2
00710  15EE  A0 18              LDY #>MSG2
00711  15F0  20 BB 1B           JSR STRPNT
00712  15F3  20 83 1B           JSR CRYS
00713  15F6  B0 26              BCS NOPRT
00714  15F8  A9 00              LDA #$00
00715  15FA  20 BD FF           JSR SETNAM
00716  15FD  A9 04              LDA #$04
00717  15FF  A2 04              LDX #$04
00718  1601  A0 00              LDY #$00
00719  1603  20 BA FF           JSR SETLFS
00720  1606  20 C0 FF           JSR OPEN
00721  1609  A2 04              LDX #$04
00722  160B  20 C9 FF           JSR CHKOUT
00723  160E  20 B7 FF           JSR READST
00724  1611  29 80              AND #$80
00725  1613  08                 PHP
00726  1614  20 CC FF           JSR CLRCHN
00727  1617  28                 PLP
00728  1618  30 04              BMI NOPRT
00729  161A  A9 04              LDA #$04
00730  161C  D0 02              BNE PRINT
00731  161E  A9 03       NOPRT  LDA #$03
00732  1620  0D 1A 10    PRINT  ORA OUTPUT
00733  1623  8D 1A 10           STA OUTPUT
00734  1626              ;*********************************
00735  1626              ; GO GET SYMBOLIC OPTION
00736  1626              ;*********************************
00737  1626  20 C0 2A           JSR SOP
00738  1629              ;*********************************
00739  1629              ; GET RELATIVE ADDRESS OPTION
00740  1629              ;*********************************
00741  1629  A9 DC              LDA #<MSR1
00742  162B  A0 18              LDY #>MSR1
00743  162D  20 BB 1B           JSR STRPNT
00744  1630  20 83 1B           JSR CRYS
00745  1633  90 04              BCC DOP2
00746  1635  A9 01              LDA #$01
00747  1637  D0 02              BNE DOP3
00748  1639  A9 00       DOP2   LDA #$00
00749  163B  8D 18 10    DOP3   STA ROPT
00750  163E              ;*********************************
00751  163E              ; GET BIT INSTRUCTION CODING OPTION
00752  163E              ;*********************************
00753  163E  20 42 37           JSR BITOPT
00754  1641              ;*********************************
00755  1641              ; DATA TABLE OPTION






PDISASS64.ASM......PAGE 0017

LINE# LOC   CODE        LINE


00756  1641              ;*********************************
00757  1641  AD 3D 10    AOP    LDA SYMBOE
00758  1644  8D EB 10           STA DATABP
00759  1647  8D ED 10           STA DATABS
00760  164A  8D EF 10           STA DATABE
00761  164D  85 DD              STA ZEROUR
00762  164F  AD 3E 10           LDA SYMBOE+1
00763  1652  8D EC 10           STA DATABP+1
00764  1655  8D EE 10           STA DATABS+1
00765  1658  8D F0 10           STA DATABE+1
00766  165B  85 DE              STA ZEROUR+1
00767  165D              ;*********************************
00768  165D  A9 6A              LDA #<MSAOP
00769  165F  A0 19              LDY #>MSAOP
00770  1661  20 BB 1B           JSR STRPNT
00771  1664  20 1C 1B           JSR INSTNG
00772  1667  D0 03              BNE BOP
00773  1669  4C EC 16           JMP NOTABS
00774  166C              ;*********************************
00775  166C  98          BOP    TYA
00776  166D  48                 PHA
00777  166E  20 AB 14           JSR INITD
00778  1671  68                 PLA
00779  1672  A8                 TAY
00780  1673  A2 00              LDX #$00
00781  1675  BD 29 2E    AFILE  LDA NAMS,X
00782  1678  99 5C 10           STA BUF,Y
00783  167B  C8                 INY
00784  167C  E8                 INX
00785  167D  E0 04              CPX #$04
00786  167F  D0 F4              BNE AFILE
00787  1681  98                 TYA
00788  1682  A0 10              LDY #>BUF
00789  1684  A2 5C              LDX #<BUF
00790  1686  20 BD FF           JSR SETNAM
00791  1689  A9 03              LDA #$03
00792  168B  A2 08              LDX #$08
00793  168D  A0 03              LDY #$03
00794  168F  20 BA FF           JSR SETLFS
00795  1692  20 C0 FF           JSR OPEN
00796  1695  20 C4 1A           JSR DISERR
00797  1698  B0 1B              BCS AGET1
00798  169A  A2 03              LDX #$03
00799  169C  20 C6 FF           JSR CHKIN
00800  169F              ;*********************************
00801  169F              ; READ IN DATA TABLE
00802  169F              ;*********************************
00803  169F  A0 00              LDY #$00
00804  16A1  20 CF FF           JSR CHRIN
00805  16A4  8D E9 10           STA NDATA
00806  16A7  F0 0C              BEQ AGET1
00807  16A9  20 CF FF    AGET   JSR CHRIN
00808  16AC  99 F1 10           STA TDATA,Y
00809  16AF  C8                 INY
00810  16B0  20 B7 FF           JSR READST






PDISASS64.ASM......PAGE 0018

LINE# LOC   CODE        LINE


00811  16B3  F0 F4              BEQ AGET
00812  16B5  A9 03       AGET1  LDA #$03
00813  16B7  20 C3 FF           JSR CLOSE
00814  16BA  20 CC FF           JSR CLRCHN
00815  16BD              ;*********************************
00816  16BD              ; PRINT DATA TABLE
00817  16BD              ;*********************************
00818  16BD  AD E9 10    PRTDAS LDA NDATA
00819  16C0  8D E7 10           STA CDATA
00820  16C3  A0 00              LDY #$00
00821  16C5  8C 54 10           STY SAVY
00822  16C8  20 F3 20    PRTNEX JSR CRLF
00823  16CB  A2 05              LDX #$05
00824  16CD  8E 53 10           STX SAVX
00825  16D0  AC 54 10    PRTDAL LDY SAVY
00826  16D3  B9 F1 10           LDA TDATA,Y
00827  16D6  20 A5 1B           JSR PRBYT
00828  16D9  20 05 21           JSR SPACE
00829  16DC  EE 54 10           INC SAVY
00830  16DF  CE 53 10           DEC SAVX
00831  16E2  D0 EC              BNE PRTDAL
00832  16E4  CE E7 10           DEC CDATA
00833  16E7  D0 DF              BNE PRTNEX
00834  16E9              ;*********************************
00835  16E9  4C 89 17           JMP XOP0
00836  16EC              ;*********************************
00837  16EC              ; READ DATA FOR KEYBOARD
00838  16EC              ;*********************************
00839  16EC  A9 89       NOTABS LDA #<MSA1      ;NUMBER OF DATA
00840  16EE  A0 19              LDY #>MSA1
00841  16F0  20 BB 1B           JSR STRPNT
00842  16F3  20 2B 1B           JSR GETWRD      ;INPUT HEX BYTE
00843  16F6  AD 4F 10           LDA ADRS        ;GET BYTE
00844  16F9  8D E9 10           STA NDATA       ;SET NUM TABLES
00845  16FC  D0 03              BNE AOPX        ;0 DATA THEN END
00846  16FE  4C 89 17           JMP XOP0        ;RETURN
00847  1701  A9 00       AOPX   LDA #$00        ;ZERO OFFSET
00848  1703  8D E7 10           STA CDATA       ;FIRST TABLE
00849  1706              ;*********************************
00850  1706              ; CALCULATE TABLE OFFSET
00851  1706              ;*********************************
00852  1706  AD E7 10    AOP1   LDA CDATA       ;GET TABLE NUMBER
00853  1709  0A                 ASL A           ;*2
00854  170A  0A                 ASL A           ;*4
00855  170B  18                 CLC             ;C=0
00856  170C  6D E7 10           ADC CDATA       ;*5
00857  170F  8D 54 10           STA SAVY        ;STORE AS OFFSET
00858  1712              ;*********************************
00859  1712  A9 AB              LDA #<MSA2
00860  1714  A0 19              LDY #>MSA2
00861  1716  20 BB 1B           JSR STRPNT      ;PRINT MSG
00862  1719  20 2B 1B           JSR GETWRD      ;GET ADDRESS
00863  171C  AC 54 10           LDY SAVY        ;GET OFFSET
00864  171F  AD 4F 10           LDA ADRS
00865  1722  99 F1 10           STA TDATA,Y






PDISASS64.ASM......PAGE 0019

LINE# LOC   CODE        LINE


00866  1725  C8                 INY
00867  1726  AD 50 10           LDA ADRS+1
00868  1729  99 F1 10           STA TDATA,Y
00869  172C  C8                 INY
00870  172D  8C 54 10           STY SAVY
00871  1730              ;*********************************
00872  1730              ; END OF DATA TABLE
00873  1730              ;*********************************
00874  1730  A9 C3       AOP2   LDA #<MSA3
00875  1732  A0 19              LDY #>MSA3
00876  1734  20 BB 1B           JSR STRPNT
00877  1737  20 2B 1B           JSR GETWRD      ;GET ADDRESS
00878  173A  AC 54 10           LDY SAVY
00879  173D  AD 4F 10           LDA ADRS
00880  1740  99 F1 10           STA TDATA,Y
00881  1743  C8                 INY
00882  1744  AD 50 10           LDA ADRS+1
00883  1747  99 F1 10           STA TDATA,Y
00884  174A  C8                 INY
00885  174B  8C 54 10           STY SAVY
00886  174E              ;*********************************
00887  174E              ; GET TYPE OF TABLE
00888  174E              ;*********************************
00889  174E  A9 D9              LDA #<MSG5      ;TABLE TYPE
00890  1750  A0 19              LDY #>MSG5
00891  1752  20 BB 1B           JSR STRPNT
00892  1755  20 E4 FF    AOP3   JSR GETIN
00893  1758  F0 FB              BEQ AOP3
00894  175A  C9 30              CMP #'0'
00895  175C  F0 14              BEQ ASC
00896  175E  C9 31              CMP #'1'
00897  1760  F0 10              BEQ ASC
00898  1762  C9 32              CMP #'2'
00899  1764  F0 0C              BEQ ASC
00900  1766  C9 33              CMP #'3'
00901  1768  F0 08              BEQ ASC
00902  176A  C9 34              CMP #'4'
00903  176C  F0 04              BEQ ASC
00904  176E  C9 53              CMP #'S'
00905  1770  D0 E3              BNE AOP3
00906  1772  20 D2 FF    ASC    JSR CHROUT
00907  1775  AC 54 10           LDY SAVY
00908  1778  99 F1 10           STA TDATA,Y
00909  177B              ;*********************************
00910  177B  EE E7 10           INC CDATA       ;INC TABLE COUNT
00911  177E  AD E7 10           LDA CDATA       ;GET TABLE COUNT
00912  1781  CD E9 10           CMP NDATA       ;ALL TABLES?
00913  1784  F0 03              BEQ XOP0        ;IF NOT GET MORE
00914  1786  4C 06 17           JMP AOP1        ;IF NOT GET MORE
00915  1789              ;*********************************
00916  1789              ; GET LABEL GENERATION OPTION
00917  1789              ;*********************************
00918  1789  A9 45       XOP0   LDA #<MSB4
00919  178B  A0 1A              LDY #>MSB4
00920  178D  20 BB 1B           JSR STRPNT






PDISASS64.ASM......PAGE 0020

LINE# LOC   CODE        LINE


00921  1790  20 83 1B           JSR CRYS
00922  1793  B0 04              BCS XOP1
00923  1795  A9 01              LDA #$01
00924  1797  D0 02              BNE XOP2
00925  1799  A9 00       XOP1   LDA #$00
00926  179B  8D 17 10    XOP2   STA XOPT
00927  179E              ;*********************************
00928  179E              ; OUTPUT FORMAT OPTION
00929  179E              ;*********************************
00930  179E  A9 65              LDA #<MSB5
00931  17A0  A0 1A              LDY #>MSB5
00932  17A2  20 BB 1B           JSR STRPNT
00933  17A5  20 83 1B           JSR CRYS
00934  17A8  B0 04              BCS FOP1
00935  17AA  A9 00              LDA #$00
00936  17AC  F0 02              BEQ FOP2
00937  17AE  A9 FF       FOP1   LDA #$FF
00938  17B0  8D 1C 10    FOP2   STA FOROPT
00939  17B3              ;*********************************
00940  17B3  60                 RTS
00941  17B4              ;*********************************
00942  17B4              ;   COMMAND MESSAGES
00943  17B4              ;*********************************
00944  17B4  0D          MSG    .BYTE $0D,$0D
00944  17B5  0D 
00945  17B6  43 42       .BYTE  'CBM RESIDENT DISASSEMBLER'
00946  17CF  20 56       .BYTE  ' V080282'
00947  17D7  0D          .BYTE  $0D
00948  17D8  28 43       .BYTE  '(C) 1982 BY COMMODORE '
00949  17EE  42 55       .BYTE  'BUSINESS MACHINES'
00950  17FF  0D          .BYTE  $0D
00951  1800  00          .BYTE  0
00952  1801              ;*********************************
00953  1801  0D          MSF1   .BYTE $0D
00954  1802  50 52       .BYTE  'PROGRAM FILE (CR OR NAME):'
00955  181C  00          .BYTE  0
00956  181D  0D          MSF2   .BYTE $0D
00957  181E  50 52       .BYTE  'PROGRAM ADDRESS: $'
00958  1830  00          .BYTE  0
00959  1831              ;*********************************
00960  1831  0D          MSG1   .BYTE $0D
00961  1832  45 44       .BYTE  'EDITOR64 FILE (CR OR NAME):'
00962  184D  00          .BYTE  0
00963  184E              ;*********************************
00964  184E  2C 53       WRITE  .BYTE ',S,W'
00965  1852  2C 50       PROGM  .BYTE ',P,R'
00966  1856  49 30       INIT   .BYTE 'I0'
00967  1858              ;*********************************
00968  1858  0D          MSG2   .BYTE $0D
00969  1859  48 41       .BYTE  'HARD COPY (Y/CR OR N)? '
00970  1870  00          .BYTE  0
00971  1871              ;*********************************
00972  1871  0D          MSD1   .BYTE $0D
00973  1872  53 54       .BYTE  'START ADDRESS :$'
00974  1882  00          .BYTE  0






PDISASS64.ASM......PAGE 0021

LINE# LOC   CODE        LINE


00975  1883              ;*********************************
00976  1883  0D          MSD2   .BYTE $0D
00977  1884  45 4E       .BYTE  'END ADDRESS :$'
00978  1892  00          .BYTE  0
00979  1893              ;*********************************
00980  1893  0D          MSD4   .BYTE $0D
00981  1894  41 44       .BYTE  'ADDRESS OFFSET (OR CR):$'
00982  18AC  00          .BYTE  0
00983  18AD              ;*********************************
00984  18AD  0D          MSD4A  .BYTE $0D
00985  18AE  41 44       .BYTE  'ADDRESS OFFSET :$'
00986  18BF  00          .BYTE  0
00987  18C0              ;*********************************
00988  18C0  0D          MSD5   .BYTE $0D
00989  18C1  57 49       .BYTE  'WINDOW OUTPUT(Y OR N/CR)? '
00990  18DB  00          .BYTE  0
00991  18DC              ;*********************************
00992  18DC  0D          MSR1   .BYTE $0D
00993  18DD  52 45       .BYTE  'RELATIVE BRANCH TO LABEL '
00994  18F6  28 59       .BYTE  '(Y/CR OR N)? '
00995  1903  00          .BYTE  0
00996  1904              ;*********************************
00997  1904  0D          MSB1   .BYTE $0D
00998  1905  42 49              .BYTE 'BIT INSTRUCTION CODING'
00999  191B  0D                 .BYTE $0D,$0D
00999  191C  0D 
01000  191D  30 2F              .BYTE '0/CR STANDARD',$0D
01000  192A  0D 
01001  192B  31 20              .BYTE '1     $2C ABS',$0D
01001  1938  0D 
01002  1939  32 20              .BYTE '2     $24 ZP',$0D
01002  1945  0D 
01003  1946  33 20              .BYTE '3     $2C AND $24',$0D
01003  1957  0D 
01004  1958  0D                 .BYTE $0D
01005  1959  45 4E              .BYTE 'ENTER BIT CODE: '
01006  1969  00                 .BYTE 0
01007  196A              ;*********************************
01008  196A  0D          MSAOP  .BYTE $0D
01009  196B  44 41       .BYTE  'DATA TABLE FILE (CR OR NAME):'
01010  1988  00          .BYTE  0
01011  1989  0D          MSA1   .BYTE $0D
01012  198A  4E 55       .BYTE  'NUMBER OF DATA TABLES (OR CR) :$'
01013  19AA  00          .BYTE  0
01014  19AB  0D          MSA2   .BYTE $0D
01015  19AC  54 41       .BYTE  'TABLE START ADDRESS :$'
01016  19C2  00          .BYTE  0
01017  19C3  0D          MSA3   .BYTE $0D
01018  19C4  54 41       .BYTE  'TABLE END ADDRESS :$'
01019  19D8  00          .BYTE  0
01020  19D9  0D          MSG5   .BYTE $0D,$0D
01020  19DA  0D 
01021  19DB  44 49              .BYTE 'DISASSEMBLY OPTIONS'
01022  19EE  0D                 .BYTE $0D,$0D
01022  19EF  0D 






PDISASS64.ASM......PAGE 0022

LINE# LOC   CODE        LINE


01023  19F0  30 20              .BYTE '0 ASCII',$0D
01023  19F7  0D 
01024  19F8  31 20              .BYTE '1 BYTE',$0D
01024  19FE  0D 
01025  19FF  32 20              .BYTE '2 WORD',$0D
01025  1A05  0D 
01026  1A06  33 20              .BYTE '3 DBYTE',$0D
01026  1A0D  0D 
01027  1A0E  34 20              .BYTE '4 WORD-1',$0D
01027  1A16  0D 
01028  1A17  53 20              .BYTE 'S SKIP ADDRESS RANGE',$0D
01028  1A2B  0D 
01029  1A2C  45 4E              .BYTE 'ENTER DISASSEMBLY CODE: '
01030  1A44  00                 .BYTE 0
01031  1A45              ;*********************************
01032  1A45  0D          MSB4   .BYTE $0D
01033  1A46  4C 41       .BYTE  'LABLE GENERATION (Y/CR OR N)? '
01034  1A64  00          .BYTE  0
01035  1A65              ;*********************************
01036  1A65  0D          MSB5   .BYTE $0D
01037  1A66  46 4F       .BYTE  'FORMATED LISTING (Y/CR OR N)? '
01038  1A84  00          .BYTE  0
01039  1A85              ;*********************************
01040  1A85              ;.FIL 0:UTIL.ASM
01041  1A85              ;*********************************
01042  1A85              ;.END
01043  1A85              ;*********************************
01044  1A85              ; FILE UTIL.ASM
01045  1A85              ;*********************************
01046  1A85              ;
01047  1A85              ;        DISASSEMBLER64
01048  1A85              ;    SYMBOLIC DISASSEMBLER
01049  1A85              ;       BY DENTON MARLOWE
01050  1A85              ;
01051  1A85              ;  (C)1986 BY DENTON MARLOWE
01052  1A85              ;
01053  1A85              ;*********************************
01054  1A85              ;      *** UTILITIES ***
01055  1A85              ;*********************************
01056  1A85              ; CHECK LINE COUNT FOR OUTPUT FILE
01057  1A85              ;*********************************
01058  1A85  AD 12 10    LINECK LDA PASS
01059  1A88  CD 15 10           CMP CPASS
01060  1A8B  D0 36              BNE LINECO
01061  1A8D  AD 19 10           LDA DEVICE
01062  1A90  29 08              AND #$08
01063  1A92  F0 2F              BEQ LINECO
01064  1A94              ;*********************************
01065  1A94              ; CLOSE SOURCE FILE AND OPEN NEXT
01066  1A94              ;*********************************
01067  1A94  38                 SEC
01068  1A95  AD C0 10           LDA LINEFL
01069  1A98  E9 20              SBC #$20
01070  1A9A  8D 51 10           STA TEMP
01071  1A9D  AD C1 10           LDA LINEFL+1






PDISASS64.ASM......PAGE 0023

LINE# LOC   CODE        LINE


01072  1AA0  E9 03              SBC #$03
01073  1AA2  0D 51 10           ORA TEMP
01074  1AA5  90 1C              BCC LINECO
01075  1AA7  EA                 NOP
01076  1AA8  EA                 NOP
01077  1AA9  EA                 NOP
01078  1AAA  20 51 20           JSR EFILE
01079  1AAD  A9 08              LDA #$08
01080  1AAF  20 C3 FF           JSR CLOSE
01081  1AB2  20 A1 15           JSR OFILE
01082  1AB5  A9 00              LDA #$00
01083  1AB7  8D C0 10           STA LINEFL
01084  1ABA  8D C1 10           STA LINEFL+1
01085  1ABD  20 3B 20           JSR ORGIN
01086  1AC0  20 61 20           JSR COMENT
01087  1AC3  60          LINECO RTS
01088  1AC4              ;*********************************
01089  1AC4              ;  DISK ERROR CHECK
01090  1AC4              ;*********************************
01091  1AC4  A9 08       DISERR LDA #$08        ;DEV #8
01092  1AC6  85 BA              STA $BA         ;PUT IN DEV TABLE
01093  1AC8  20 B4 FF           JSR $FFB4       ;SEND TALK
01094  1ACB  A9 6F              LDA #$6F        ;SECONDARY ADDRESS
01095  1ACD  85 B9              STA $B9         ;PUT IN TABLE
01096  1ACF  20 96 FF           JSR $FF96       ;SEND SEC
01097  1AD2  20 A5 FF           JSR $FFA5       ;GET FIRST BYTE
01098  1AD5  C9 30              CMP #$30        ;IS IT A ZERO
01099  1AD7  D0 0C              BNE DLOOC       ;IF NOT ZERO ERROR
01100  1AD9  20 A5 FF    DLOOE  JSR $FFA5       ;GET BYTE
01101  1ADC  C9 0D              CMP #$0D        ;IS IT CR?
01102  1ADE  D0 F9              BNE DLOOE       ;GET NEXT BYTE
01103  1AE0  20 AB FF           JSR $FFAB       ;UNTALK
01104  1AE3  18                 CLC             ;NO ERROR FLAG
01105  1AE4  60                 RTS             ;RETURN
01106  1AE5              ;*********************************
01107  1AE5              ; PRINT DISK ERROR
01108  1AE5              ;*********************************
01109  1AE5  48          DLOOC  PHA             ;STACK BYTE
01110  1AE6  A9 0D              LDA #$0D        ;ASCII CR
01111  1AE8  20 D2 FF           JSR CHROUT      ;PRINT IT
01112  1AEB  68                 PLA             ;GET BYTE
01113  1AEC  20 D2 FF           JSR CHROUT      ;PRINT IT
01114  1AEF  20 A5 FF    DLOOA  JSR $FFA5       ;GET NEXT BYTE
01115  1AF2  20 D2 FF           JSR CHROUT      ;PRINT IT
01116  1AF5  C9 0D              CMP #$0D        ;IS IT CR
01117  1AF7  D0 F6              BNE DLOOA       ;GET NEXT BYTE
01118  1AF9  20 AB FF           JSR $FFAB       ;UNTALK
01119  1AFC  38                 SEC             ;SET ERROR FLAG
01120  1AFD  60                 RTS             ;RETURN
01121  1AFE              ;*********************************
01122  1AFE              ; START NEW LINE AND INC COUNT
01123  1AFE              ;*********************************
01124  1AFE  EE 58 10    NEWLIN INC LINECT
01125  1B01  D0 03              BNE *+5
01126  1B03  EE 59 10           INC LINECT+1






PDISASS64.ASM......PAGE 0024

LINE# LOC   CODE        LINE


01127  1B06  EE C0 10           INC LINEFL
01128  1B09  D0 03              BNE *+5
01129  1B0B  EE C1 10           INC LINEFL+1
01130  1B0E  20 F3 20           JSR CRLF
01131  1B11  AD 19 10           LDA DEVICE
01132  1B14  29 04              AND #$04
01133  1B16  F0 03              BEQ NEWEXT
01134  1B18  20 6D 1C           JSR NEXLIN
01135  1B1B  60          NEWEXT RTS
01136  1B1C              ;*********************************
01137  1B1C              ; INPUT UTILITIES
01138  1B1C              ;*********************************
01139  1B1C              ; INPUT STRING ROUTINE
01140  1B1C              ;*********************************
01141  1B1C  A0 00       INSTNG LDY #$00
01142  1B1E  20 CF FF    INSTN1 JSR CHRIN
01143  1B21  99 5C 10           STA BUF,Y
01144  1B24  C8                 INY
01145  1B25  C9 0D              CMP #$0D
01146  1B27  D0 F5              BNE INSTN1
01147  1B29  88                 DEY
01148  1B2A  60                 RTS
01149  1B2B              ;*********************************
01150  1B2B              ; INPUT HEX CHAR STRING
01151  1B2B              ;*********************************
01152  1B2B  A9 00       GETWRD LDA #$00
01153  1B2D  8D 4F 10           STA ADRS
01154  1B30  8D 50 10           STA ADRS+1
01155  1B33  20 1C 1B           JSR INSTNG
01156  1B36  88                 DEY
01157  1B37  30 15              BMI INEND
01158  1B39              ;*********************************
01159  1B39              ; PROCESS INPUT
01160  1B39              ;*********************************
01161  1B39  20 4F 1B           JSR GETBYT
01162  1B3C  AD 51 10           LDA TEMP
01163  1B3F  8D 4F 10           STA ADRS
01164  1B42  88                 DEY
01165  1B43  30 09              BMI INEND
01166  1B45  20 4F 1B           JSR GETBYT
01167  1B48  AD 51 10           LDA TEMP
01168  1B4B  8D 50 10           STA ADRS+1
01169  1B4E  60          INEND  RTS
01170  1B4F              ;*********************************
01171  1B4F              ; COVERT BUFFER INTO BYTES
01172  1B4F              ;*********************************
01173  1B4F  B9 5C 10    GETBYT LDA BUF,Y
01174  1B52  20 6C 1B           JSR BINARY
01175  1B55  8D 51 10           STA TEMP
01176  1B58  88                 DEY
01177  1B59  30 10              BMI INENX
01178  1B5B  B9 5C 10           LDA BUF,Y
01179  1B5E  20 6C 1B           JSR BINARY
01180  1B61  0A                 ASL A
01181  1B62  0A                 ASL A






PDISASS64.ASM......PAGE 0025

LINE# LOC   CODE        LINE


01182  1B63  0A                 ASL A
01183  1B64  0A                 ASL A
01184  1B65  0D 51 10           ORA TEMP
01185  1B68  8D 51 10           STA TEMP
01186  1B6B  60          INENX  RTS
01187  1B6C              ;*********************************
01188  1B6C              ; CONVERT A INTO HEX NIBBLE
01189  1B6C              ;*********************************
01190  1B6C  38          BINARY SEC
01191  1B6D  E9 30              SBC #'0'
01192  1B6F  90 0E              BCC NOHEX
01193  1B71  C9 0A              CMP #$0A
01194  1B73  90 0C              BCC YSHEX
01195  1B75  E9 07              SBC #$07
01196  1B77  C9 10              CMP #$10
01197  1B79  B0 04              BCS NOHEX
01198  1B7B  C9 0A              CMP #$0A
01199  1B7D  B0 02              BCS YSHEX
01200  1B7F  38          NOHEX  SEC
01201  1B80  60                 RTS
01202  1B81  18          YSHEX  CLC
01203  1B82  60                 RTS
01204  1B83              ;*********************************
01205  1B83              ; GET OPTION (CR/Y OR N): Y=C=0
01206  1B83              ;*********************************
01207  1B83  20 CF FF    CRYS   JSR CHRIN
01208  1B86  C9 59              CMP #'Y'
01209  1B88  F0 11              BEQ CRYS1
01210  1B8A  C9 0D              CMP #$0D
01211  1B8C  F0 0D              BEQ CRYS1
01212  1B8E  D0 0D              BNE CRNO1
01213  1B90              ;*********************************
01214  1B90              ; GET OPTION (Y OR CR/N): Y=C=0
01215  1B90              ;*********************************
01216  1B90  20 CF FF    CRNO   JSR CHRIN
01217  1B93  C9 4E              CMP #'N'
01218  1B95  F0 06              BEQ CRNO1
01219  1B97  C9 0D              CMP #$0D
01220  1B99  F0 02              BEQ CRNO1
01221  1B9B  18          CRYS1  CLC
01222  1B9C  60                 RTS
01223  1B9D  38          CRNO1  SEC
01224  1B9E  60                 RTS
01225  1B9F              ;*********************************
01226  1B9F              ; PRINT UTILITES
01227  1B9F              ;*********************************
01228  1B9F              ; PRINT WORD MSB IN Y LSB IN A
01229  1B9F              ;*********************************
01230  1B9F  48          PRBYTS PHA             ;PUT A ON STACK
01231  1BA0  98                 TYA             ;PUT HIH BYTE IN A
01232  1BA1  20 A5 1B           JSR PRBYT       ;PRINT MSB
01233  1BA4  68                 PLA             ;GET LSB
01234  1BA5              ;*********************************
01235  1BA5              ; PRINT BYTE IN A
01236  1BA5              ;*********************************






PDISASS64.ASM......PAGE 0026

LINE# LOC   CODE        LINE


01237  1BA5  48          PRBYT  PHA             ;PUT BYTE ON STACK
01238  1BA6  4A                 LSR A           ;4 RIGHT SHIFTS
01239  1BA7  4A                 LSR A           ;TO MOVE HIGH
01240  1BA8  4A                 LSR A           ;NIBBLE TO LOW
01241  1BA9  4A                 LSR A           ;NIB WITH HIGH 0'S
01242  1BAA  A8                 TAY             ;USE AS POINTER
01243  1BAB  B9 11 1D           LDA HEXA,Y      ;GET ASCII
01244  1BAE  20 11 1C           JSR PCHAR       ;PRINT
01245  1BB1  68                 PLA             ;PULL BYTE OUT
01246  1BB2  29 0F              AND #$0F        ;MASK HIGH NIBBLE
01247  1BB4  A8                 TAY             ;USE AS POINTER
01248  1BB5  B9 11 1D           LDA HEXA,Y      ;GET ASCII
01249  1BB8  4C 11 1C           JMP PCHAR       ;PRINT
01250  1BBB              ;*********************************
01251  1BBB              ; STRING OUTPUT ROUTINE
01252  1BBB              ;*********************************
01253  1BBB  85 DD       STRPNT STA ZEROUR      ;POINTER TO
01254  1BBD  84 DE              STY ZEROUR+1    ;MESSAGE
01255  1BBF  A0 00              LDY #$00        ;OFFSET
01256  1BC1  B1 DD       SOUT   LDA (ZEROUR),Y  ;GET CHAR
01257  1BC3  F0 06              BEQ SEXIT       ;IF ZERO EXIT
01258  1BC5  20 11 1C           JSR PCHAR       ;PRINT
01259  1BC8  C8                 INY             ;INC OFFSET
01260  1BC9  D0 F6              BNE SOUT        ;LOOP
01261  1BCB  60          SEXIT  RTS             ;RETURN
01262  1BCC              ;*********************************
01263  1BCC              ; PRINT DEC NUMBER (0000)
01264  1BCC              ;*********************************
01265  1BCC  86 DD       PRTPAG STX ZEROUR      ;LOW  BYTE NUM
01266  1BCE  85 DE              STA ZEROUR+1    ;HIGH BYTE NUM
01267  1BD0  A2 03              LDX #$03        ;4 CHARS
01268  1BD2  8E 53 10           STX SAVX        ;SAVE COUNT
01269  1BD5  D0 09              BNE PRTNU1      ;BRANCH
01270  1BD7              ;*********************************
01271  1BD7              ; PRINT DEC NUMBER (00000)
01272  1BD7              ;*********************************
01273  1BD7  86 DD       PRTNUM STX ZEROUR      ;LOW  BYTE NUM
01274  1BD9  85 DE              STA ZEROUR+1    ;HIGH BYTE NUM
01275  1BDB  A2 04              LDX #$04        ;5 CHARS
01276  1BDD  8E 53 10           STX SAVX        ;SAVE COUNT
01277  1BE0              ;*********************************
01278  1BE0              ; PRINT DEC NUMBER AND LEADING 0
01279  1BE0              ;*********************************
01280  1BE0  AE 53 10    PRTNU1 LDX SAVX
01281  1BE3  A0 30              LDY #$30
01282  1BE5  D0 01              BNE PRTNU3
01283  1BE7  C8          PRTNU2 INY 
01284  1BE8  38          PRTNU3 SEC 
01285  1BE9  A5 DD              LDA ZEROUR
01286  1BEB  FD 21 1D           SBC CONST0,X
01287  1BEE  85 DD              STA ZEROUR
01288  1BF0  A5 DE              LDA ZEROUR+1
01289  1BF2  FD 26 1D           SBC CONST1,X
01290  1BF5  85 DE              STA ZEROUR+1
01291  1BF7  B0 EE              BCS PRTNU2






PDISASS64.ASM......PAGE 0027

LINE# LOC   CODE        LINE


01292  1BF9  A5 DD              LDA ZEROUR
01293  1BFB  7D 21 1D           ADC CONST0,X
01294  1BFE  85 DD              STA ZEROUR
01295  1C00  A5 DE              LDA ZEROUR+1
01296  1C02  7D 26 1D           ADC CONST1,X
01297  1C05  85 DE              STA ZEROUR+1
01298  1C07  98                 TYA
01299  1C08  20 11 1C           JSR PCHAR
01300  1C0B  CE 53 10           DEC SAVX
01301  1C0E  10 D0              BPL PRTNU1
01302  1C10  60                 RTS
01303  1C11              ;*********************************
01304  1C11              ;  OUTPUT CHAR TO OPEN CHANNEL
01305  1C11              ;*********************************
01306  1C11  48          PCHAR  PHA             ;SAVE CHAR
01307  1C12  AD 19 10           LDA DEVICE      ;GET FILE FLAG
01308  1C15  29 08              AND #$08        ;CHECK FOR DISK
01309  1C17  F0 0D              BEQ PRIN        ;IF NONE BRANCH
01310  1C19  A2 08              LDX #$08        ;DISK FILE #1
01311  1C1B  20 C9 FF           JSR CHKOUT      ;FILE IS OUTPUT
01312  1C1E  68                 PLA             ;GET CHAR
01313  1C1F  48                 PHA             ;RESAVE CHAR
01314  1C20  20 D2 FF           JSR CHROUT      ;OUTPUT TO DISK
01315  1C23  20 CC FF           JSR CLRCHN      ;RESET OUTPUT
01316  1C26  AD 19 10    PRIN   LDA DEVICE      ;GET DEVICE FLAG
01317  1C29  29 04              AND #$04        ;CHECK FOR PRINTER
01318  1C2B  F0 0D              BEQ SCREN       ;IF NOT BRANCH
01319  1C2D  A2 04              LDX #$04        ;PRINT FILE #4
01320  1C2F  20 C9 FF           JSR CHKOUT      ;FILE IS OUTPUT
01321  1C32  68                 PLA             ;GET CHAR
01322  1C33  48                 PHA             ;RESAVE CHAR
01323  1C34  20 D2 FF           JSR CHROUT      ;OUTPUT TO PRINTER
01324  1C37  20 CC FF           JSR CLRCHN      ;RESET OUTPUT
01325  1C3A  AD 19 10    SCREN  LDA DEVICE      ;GET DEVICE FLAG
01326  1C3D  29 03              AND #$03        ;CHECK FOR SCREEN
01327  1C3F  F0 05              BEQ PEXIT       ;IF NOT BRANCH
01328  1C41  68                 PLA             ;GET CHAR
01329  1C42  48                 PHA             ;RESAVE CHAR
01330  1C43  20 D2 FF           JSR CHROUT      ;OUTPUT TO SCREEN
01331  1C46  68          PEXIT  PLA             ;GET CHAR
01332  1C47  60                 RTS             ;RETURN
01333  1C48              ;*********************************
01334  1C48              ; PRINTER OUTPUT ROUTINES
01335  1C48              ;*********************************
01336  1C48              ; FINISH OUT PAGE WITH CR
01337  1C48              ;*********************************
01338  1C48  20 5B 1C    FINISH JSR CRLFPR      ;PRINT CR
01339  1C4B  EE 57 10           INC LISTCT      ;INC LINE COUNT
01340  1C4E  AD 57 10           LDA LISTCT      ;GET COUNT
01341  1C51  C9 42              CMP #$42        ;66 LINES
01342  1C53  D0 F3              BNE FINISH      ;IF NOT MORE
01343  1C55  A9 00              LDA #$00        ;ZERO BYTE
01344  1C57  8D 57 10           STA LISTCT      ;RESET COUNT
01345  1C5A  60                 RTS             ;RETURN
01346  1C5B              ;*********************************






PDISASS64.ASM......PAGE 0028

LINE# LOC   CODE        LINE


01347  1C5B              ; PRINT CR TO PRINTER
01348  1C5B              ;*********************************
01349  1C5B  A9 04       CRLFPR LDA #$04        ;DEVICE #4
01350  1C5D  8D 19 10           STA DEVICE      ;SET PRINTER
01351  1C60  20 F3 20           JSR CRLF        ;CR
01352  1C63  AD 1A 10           LDA OUTPUT      ;GET DEVICE
01353  1C66  8D 19 10           STA DEVICE      ;RESET DEVICE
01354  1C69  60                 RTS             ;RETURN
01355  1C6A              ;*********************************
01356  1C6A              ; START NEWLINE AND CHECK COUNT
01357  1C6A              ;*********************************
01358  1C6A  20 5B 1C    NEXPTR JSR CRLFPR      ;PRINT CR
01359  1C6D  EE 57 10    NEXLIN INC LISTCT      ;INC LINE COUNT
01360  1C70  AD 57 10           LDA LISTCT      ;GET COUNT
01361  1C73  C9 3C              CMP #$3C        ;48 LINES
01362  1C75  D0 45              BNE LINEOK      ;IF NOT BRANCH
01363  1C77  20 48 1C           JSR FINISH      ;FINISH PAGE
01364  1C7A              ;*********************************
01365  1C7A              ; START NEW PAGE WITH HEADING
01366  1C7A              ;*********************************
01367  1C7A  AD 19 10    HEADER LDA DEVICE      ;CHECK DEVICE
01368  1C7D  29 04              AND #$04        ;PRINTER?
01369  1C7F  F0 3B              BEQ LINEOK      ;IF NOT EXIT
01370  1C81  20 6A 1C           JSR NEXPTR      ;NEXT LINE
01371  1C84  A9 04              LDA #$04        ;DEVICE #4
01372  1C86  8D 19 10           STA DEVICE      ;SET DEVICE
01373  1C89  A9 2B              LDA #<XTITLE    ;HEADER
01374  1C8B  A0 1D              LDY #>XTITLE    ;
01375  1C8D  20 BB 1B           JSR STRPNT      ;PRINT IT
01376  1C90              ;*********************************
01377  1C90              ; PRINT PAGE COUNT AND HEADER
01378  1C90              ;*********************************
01379  1C90  AE 55 10           LDX PAGECT
01380  1C93  AD 56 10           LDA PAGECT+1
01381  1C96  20 CC 1B           JSR PRTPAG
01382  1C99  20 6A 1C           JSR NEXPTR
01383  1C9C  20 6A 1C           JSR NEXPTR
01384  1C9F  A9 04              LDA #$04
01385  1CA1  8D 19 10           STA DEVICE
01386  1CA4  A9 46              LDA #<LTITLE
01387  1CA6  A0 1D              LDY #>LTITLE
01388  1CA8  20 BB 1B           JSR STRPNT
01389  1CAB  20 6A 1C           JSR NEXPTR
01390  1CAE              ;*********************************
01391  1CAE              ; INC PAGE COUNT
01392  1CAE              ;*********************************
01393  1CAE  EE 55 10           INC PAGECT
01394  1CB1  D0 03              BNE PAGER1
01395  1CB3  EE 56 10           INC PAGECT+1
01396  1CB6  20 6A 1C    PAGER1 JSR NEXPTR
01397  1CB9  20 6A 1C           JSR NEXPTR
01398  1CBC  60          LINEOK RTS 
01399  1CBD              ;*********************************
01400  1CBD              ; SYMBOL TABLE ROUTINES
01401  1CBD              ;*********************************






PDISASS64.ASM......PAGE 0029

LINE# LOC   CODE        LINE


01402  1CBD              ; START NEWLINE AND CHECK COUNT
01403  1CBD              ;*********************************
01404  1CBD  20 5B 1C    NEXPTS JSR CRLFPR      ;PRINT CR
01405  1CC0  EE 57 10           INC LISTCT      ;INC LINE COUNT
01406  1CC3  AD 57 10           LDA LISTCT      ;GET COUNT
01407  1CC6  C9 3C              CMP #$3C        ;48 LINES
01408  1CC8  D0 1D              BNE HEADOK      ;IF NOT BRANCH
01409  1CCA  20 48 1C           JSR FINISH      ;FINISH PAGE
01410  1CCD              ;*********************************
01411  1CCD              ; START NEW PAGE WITH HEADING
01412  1CCD              ;*********************************
01413  1CCD  20 BD 1C    HEADES JSR NEXPTS      ;NEXT LINE
01414  1CD0  A9 63              LDA #<XTITLS    ;HEADER
01415  1CD2  A0 1D              LDY #>XTITLS    ;
01416  1CD4  20 BB 1B           JSR STRPNT      ;PRINT IT
01417  1CD7  20 BD 1C           JSR NEXPTS
01418  1CDA  20 BD 1C           JSR NEXPTS
01419  1CDD  A9 70              LDA #<LTITLS
01420  1CDF  A0 1D              LDY #>LTITLS
01421  1CE1  20 BB 1B           JSR STRPNT
01422  1CE4  20 BD 1C           JSR NEXPTS
01423  1CE7  60          HEADOK RTS
01424  1CE8              ;*********************************
01425  1CE8              ; CHECK FOR NEW PAGE FOR SYMBOL
01426  1CE8              ;*********************************
01427  1CE8  AD 57 10    HEADSY LDA LISTCT
01428  1CEB  C9 35              CMP #$35
01429  1CED  B0 06              BCS HEADFX
01430  1CEF  20 BD 1C           JSR NEXPTS
01431  1CF2  4C BD 1C           JMP NEXPTS
01432  1CF5  4C 48 1C    HEADFX JMP FINISH
01433  1CF8              ;*********************************
01434  1CF8              ; SCREEN UTILITES
01435  1CF8              ;*********************************
01436  1CF8  AD 19 10    SCROFF LDA DEVICE
01437  1CFB  29 04              AND #$04
01438  1CFD  F0 08              BEQ SCRNO1
01439  1CFF  AD 11 D0           LDA VICREG
01440  1D02  29 EF              AND #$EF
01441  1D04  8D 11 D0           STA VICREG
01442  1D07  60          SCRNO1 RTS
01443  1D08              ;*********************************
01444  1D08  AD 11 D0    SCRON  LDA VICREG
01445  1D0B  09 10              ORA #$10
01446  1D0D  8D 11 D0           STA VICREG
01447  1D10  60                 RTS
01448  1D11              ;*********************************
01449  1D11              ; HEX-TO-ASCII TABLE
01450  1D11              ;*********************************
01451  1D11  30 31       HEXA   .BYTE '0123456789ABCDEF'
01452  1D21              ;*********************************
01453  1D21              ; CONSTANTS FOR PRTNUM ROUTINE
01454  1D21              ;*********************************
01455  1D21  01          CONST0 .BYTE $01,$0A,$64,$E8,$10
01455  1D22  0A 






PDISASS64.ASM......PAGE 0030

LINE# LOC   CODE        LINE


01455  1D23  64 
01455  1D24  E8 
01455  1D25  10 
01456  1D26  00          CONST1 .BYTE $00,$00,$00,$03,$27
01456  1D27  00 
01456  1D28  00 
01456  1D29  03 
01456  1D2A  27 
01457  1D2B              ;*********************************
01458  1D2B              ; PAGE TITLE
01459  1D2B              ;*********************************
01460  1D2B  44 49       XTITLE .BYTE 'DISASSEMBLER64.......PAGE '
01461  1D45  00                 .BYTE $00
01462  1D46  4C 49       LTITLE .BYTE 'LINE# LOC   CODE        LINE'
01463  1D62  00                 .BYTE $00
01464  1D63              ;********************************
01465  1D63              ; SYMBOL PAGE TITLE
01466  1D63              ;********************************
01467  1D63  53 59       XTITLS .BYTE 'SYMBOL TABLE',0
01467  1D6F  00 
01468  1D70  53 59       LTITLS .BYTE 'SYMBOL VALUE',0
01468  1D7C  00 
01469  1D7D              ;*********************************
01470  1D7D              ;.FIL 0:MODE.ASM
01471  1D7D              ;*********************************
01472  1D7D              ;.END
01473  1D7D              ;*********************************
01474  1D7D              ; FILE MODE.ASM
01475  1D7D              ;*********************************
01476  1D7D              ;
01477  1D7D              ;        DISASSEMBLER64
01478  1D7D              ;    SYMBOLIC DISASSEMBLER
01479  1D7D              ;       BY DENTON MARLOWE
01480  1D7D              ;
01481  1D7D              ;  (C)1986 BY DENTON MARLOWE
01482  1D7D              ;
01483  1D7D              ;*********************************
01484  1D7D              ; ADDRESSING MODE UTILITIES
01485  1D7D              ;*********************************
01486  1D7D              ;      DISASSEMBLE ONE LINE
01487  1D7D              ;*********************************
01488  1D7D  20 A9 24    DSLINE JSR DATAOP      ;CHECK FOR DATA
01489  1D80  30 3D              BMI BYTT        ;N=1 THEN FOUND
01490  1D82              ;*********************************
01491  1D82              ; CHECK BIT ZP DECODING OPTIONS
01492  1D82              ;*********************************
01493  1D82  AD 6F 37           LDA BITFLG      ;CHECK BIT FLAG
01494  1D85  F0 0D              BEQ DISL        ;IF ZERO NO BIT
01495  1D87                     
01496  1D87  20 2C 21           JSR GETSL       ;GET BYTE
01497  1D8A  C9 24              CMP #$24        ;ZEROPAGE BIT
01498  1D8C  F0 34              BEQ BYZBIT      ;
01499  1D8E  C9 2C              CMP #$2C        ;ZEROPAGE BIT
01500  1D90  F0 55              BEQ BYABIT      ;
01501  1D92  D0 00              BNE DISL        ;






PDISASS64.ASM......PAGE 0031

LINE# LOC   CODE        LINE


01502  1D94              ;*********************************
01503  1D94              ; CHECK BIT ABS DECODING OPTIONS
01504  1D94              ;*********************************
01505  1D94              
01506  1D94              ;********************************
01507  1D94              ; PROCESS LINE OF CODE
01508  1D94              ;********************************
01509  1D94              DISL   = *
01510  1D94  20 2C 21           JSR GETSL       ;GET BYTE
01511  1D97  AE 12 10           LDX PASS        ;GET PASS COUNT
01512  1D9A  EC 15 10           CPX CPASS       ;LAST
01513  1D9D  F0 06              BEQ DISL1       ;IF LAST BRANCH
01514  1D9F  20 71 27           JSR OPERN1      ;IF LAST BRANCH
01515  1DA2  4C BF 1D           JMP BYTT        ;NEXT INSTRUCTION
01516  1DA5              ;********************************
01517  1DA5              ; PRINT DISASSEMBLY ADDRESS
01518  1DA5              ;********************************
01519  1DA5  20 64 27    DISL1  JSR PRTASS      ;PRINT LINE DATA
01520  1DA8  20 8A 20           JSR PRAD        ;PRINT ADDRESS
01521  1DAB  20 05 21           JSR SPACE       ;SPACE OVER
01522  1DAE              ;********************************
01523  1DAE              ; PRINT INSTRUCTION
01524  1DAE              ;********************************
01525  1DAE  20 2C 21           JSR GETSL       ;GET BYTE
01526  1DB1  48                 PHA             ;STORE
01527  1DB2  20 45 27           JSR MNEMON      ;PRINT MNEMONIC
01528  1DB5  20 05 21           JSR SPACE       ;SPACE OVER
01529  1DB8  68                 PLA             ;GET BYTE
01530  1DB9  20 79 27           JSR OPERND      ;PRINT OPERAND
01531  1DBC  20 FE 1A    FINAL  JSR NEWLIN      ;START NEW LINE
01532  1DBF  4C 0A 21    BYTT   JMP NEXTSL      ;NEXT INSTRUCTION
01533  1DC2              ;********************************
01534  1DC2              ;      BIT ZP SKIP TRICK
01535  1DC2              ;
01536  1DC2              ; THE SKIP WILL ALWAYS INVOLVE
01537  1DC2              ; A FOLLWING OPCODE THAT IS EITHER
01538  1DC2              ; AN OPCODE WITH NO OPERAND OR
01539  1DC2              ; OR ONE BYTE OPERAND LIKE A BRANCH
01540  1DC2              ; OR ZERO PAGE INSTRUCTION
01541  1DC2              ;*********************************
01542  1DC2              BYZBIT = *
01543  1DC2  AD 6F 37           LDA BITFLG
01544  1DC5  29 02              AND #$02
01545  1DC7  F0 CB              BEQ DISL
01546  1DC9              ;********************************
01547  1DC9              ;      TO SKIP OR NOT
01548  1DC9              ;*********************************
01549  1DC9  20 23 21           JSR INCSL       ;INC TO OPERAND
01550  1DCC  20 2C 21           JSR GETSL       ;GET OPERAND
01551  1DCF  48                 PHA
01552  1DD0  20 42 21           JSR DECSL
01553  1DD3  68                 PLA
01554  1DD4                                     ;CHECK FOR SKIP
01555  1DD4  C9 10              CMP #$10        ;BPL SKIP
01556  1DD6  F0 40              BEQ B0000






PDISASS64.ASM......PAGE 0032

LINE# LOC   CODE        LINE


01557  1DD8  C9 18              CMP #$18        ;CLC SKIP
01558  1DDA  F0 3C              BEQ B0000
01559  1DDC  C9 30              CMP #$30        ;BMI
01560  1DDE  F0 38              BEQ B0000
01561  1DE0  C9 38              CMP #$38        ;SEC
01562  1DE2  F0 34              BEQ B0000
01563  1DE4              ;
01564  1DE4  4C 94 1D           JMP DISL
01565  1DE7              ;********************************
01566  1DE7              ;      BIT ABS SKIP TRICK
01567  1DE7              ;*********************************
01568  1DE7              BYABIT = *
01569  1DE7  AD 6F 37           LDA BITFLG
01570  1DEA  29 01              AND #$01
01571  1DEC  F0 A6              BEQ DISL
01572  1DEE              ;********************************
01573  1DEE              ;      TO SKIP OR NOT
01574  1DEE              ;*********************************
01575  1DEE  20 23 21           JSR INCSL       ;INC TO OPERAND
01576  1DF1  20 2C 21           JSR GETSL       ;GET OPERAND
01577  1DF4  48                 PHA
01578  1DF5  20 42 21           JSR DECSL
01579  1DF8  68                 PLA
01580  1DF9                                     ;CHECK FOR SKIP
01581  1DF9  C9 A1              CMP #$A1        ;LDY A IMMEDIATE SKIP
01582  1DFB  F0 1B              BEQ B0000
01583  1DFD  C9 A2              CMP #$A2        ;LDA A IMMEDIATE SKIP
01584  1DFF  F0 17              BEQ B0000
01585  1E01  C9 A9              CMP #$A9        ;LDX A IMMEDIATE SKIP
01586  1E03  F0 13              BEQ B0000
01587  1E05                     
01588  1E05  C9 65              CMP #$65        ;ADC ZP
01589  1E07  F0 0F              BEQ B0000
01590  1E09                     
01591  1E09  C9 85              CMP #$85        ;STA ZP
01592  1E0B  F0 0B              BEQ B0000
01593  1E0D                     
01594  1E0D  C9 B1              CMP #$B1        ;LDA (ZP),Y
01595  1E0F  F0 07              BEQ B0000
01596  1E11                     
01597  1E11  C9 E6              CMP #$E6        ;INC
01598  1E13  F0 03              BEQ B0000
01599  1E15              ;
01600  1E15  4C 94 1D           JMP DISL
01601  1E18              ;********************************
01602  1E18              ;      PRINTING PASS?
01603  1E18              ;*********************************
01604  1E18              B0000  = *
01605  1E18  AD 12 10           LDA PASS        ;GET PASS COUNT
01606  1E1B  CD 15 10           CMP CPASS       ;LAST
01607  1E1E  D0 9F              BNE BYTT        ;IF NOT NEXT BYTE
01608  1E20              ;*********************************
01609  1E20              ;  PRINT LINE DATA FOR .BYTE
01610  1E20              ;*********************************
01611  1E20  20 61 20           JSR COMENT      ;COMENT LINE






PDISASS64.ASM......PAGE 0033

LINE# LOC   CODE        LINE


01612  1E23              ;
01613  1E23  20 05 22           JSR PRTDAT      ;PRINT LINE DATA
01614  1E26  20 92 21           JSR PRTONE      ;ONE BYTE
01615  1E29  20 8A 20           JSR PRAD        ;PRINT ADDRESS
01616  1E2C  20 05 21           JSR SPACE       ;SPACE OVER
01617  1E2F  A9 5B              LDA #<MSGBIT    ;.BYTE $
01618  1E31  A0 21              LDY #>MSGBIT    ;
01619  1E33  20 BB 1B           JSR STRPNT      ;PRINT IT
01620  1E36              ;
01621  1E36  20 2C 21           JSR GETSL       ;GET BYTE
01622  1E39  20 A5 1B           JSR PRBYT       ;PRINT BYTE
01623  1E3C              ;
01624  1E3C  A9 63              LDA #<MSGBZP    ;BIT COMMENT
01625  1E3E  A0 21              LDY #>MSGBZP    ;
01626  1E40  20 BB 1B           JSR STRPNT      ;PRINT IT
01627  1E43              ;
01628  1E43  20 FE 1A           JSR NEWLIN      ;PRINT BYTE
01629  1E46                                     ;JSR INCSL    ;INC SELECT
01630  1E46  20 67 20           JSR COMET       ;COMENT LINE
01631  1E49                                     ;JSR DECSL    ;REASET SELE
CT
01632  1E49  4C BC 1D           JMP FINAL       ;CR AND NEXT BYTE
01633  1E4C              ;*********************************
01634  1E4C              ;BYTEXT JMP DISL1
01635  1E4C              ;*********************************
01636  1E4C              ; ADDRESSING MODE UTILITIES
01637  1E4C              ;*********************************
01638  1E4C              ;
01639  1E4C              ;*********************************
01640  1E4C              ; ANALYSIS OPERAND ROUTINES
01641  1E4C              ;*********************************
01642  1E4C              ;    BIT ZP ONE-BYTE OPERAND
01643  1E4C              ; ZERO PAGE BIT IS ALMOST ALWAYS
01644  1E4C              ;   A BIT TRICK TO SKIP THE NEXT
01645  1E4C              ;          OPCODE
01646  1E4C              ;********************************
01647  1E4C  EA          ONEBIT NOP
01648  1E4D              ;*********************************
01649  1E4D              ;      ONE-BYTE OPERAND
01650  1E4D              ;********************************
01651  1E4D  20 23 21    ONEBYT JSR INCSL       ;INC TO BYTE
01652  1E50  20 2C 21           JSR GETSL       ;GET BYTE
01653  1E53  8D 45 10           STA WORKED      ;STORE OPERAND
01654  1E56  A9 00              LDA #$00        ;ZERO BYTE
01655  1E58  8D 46 10           STA WORKED+1    ;ZERO HIGH BYTE
01656  1E5B  AD 12 10           LDA PASS        ;GET PASS COUNT
01657  1E5E  CD 13 10           CMP IPASS       ;INTERNAL
01658  1E61  F0 54              BEQ OPCPUT      ;TABLE OPERAND
01659  1E63  CD 14 10           CMP EPASS       ;EXTERNAL
01660  1E66  F0 52              BEQ OPCSYM      ;EXTERNAL EQUATE
01661  1E68              ;*********************************
01662  1E68              ; OUTPUT OPERAND
01663  1E68              ;*********************************
01664  1E68  20 5C 2B           JSR SYMOP       ;CHECK FOR SYMBOL
01665  1E6B  B0 50              BCS TWOB        ;SYMBOL FOUND
01666  1E6D  20 3C 22           JSR RANGE       ;IS IT INTERNAL






PDISASS64.ASM......PAGE 0034

LINE# LOC   CODE        LINE


01667  1E70  90 06              BCC ONEBY       ;GENERATE LABEL
01668  1E72  20 D0 20           JSR DOLLAR      ;EXTERNAL
01669  1E75  4C 7B 1E           JMP ONEBX       ;PRINT ADDRESS
01670  1E78  20 80 20    ONEBY  JSR PRLA        ;PRINT XX
01671  1E7B  AD 45 10    ONEBX  LDA WORKED      ;GET OPERAND
01672  1E7E  4C A5 1B           JMP PRBYT       ;PRINT BYTE
01673  1E81              ;********************************
01674  1E81              ;      BIT ABS TWO-BYTE OPERAND
01675  1E81              ;********************************
01676  1E81  EA          TWOBIT NOP
01677  1E82              ;********************************
01678  1E82              ;      TWO-BYTE OPERAND
01679  1E82              ;********************************
01680  1E82  20 23 21    TWOBYT JSR INCSL       ;INC TO BYTE
01681  1E85  20 2C 21           JSR GETSL       ;GET BYTE
01682  1E88  8D 45 10           STA WORKED      ;STORE LOW BYTE
01683  1E8B  20 23 21           JSR INCSL       ;INC TO BYTE
01684  1E8E  20 2C 21           JSR GETSL       ;GET BYTE
01685  1E91  8D 46 10           STA WORKED+1    ;STORE HIGH BYTE
01686  1E94  AD 12 10           LDA PASS        ;GET PASS COUNT
01687  1E97  CD 13 10           CMP IPASS       ;INTERNAL
01688  1E9A  F0 1B              BEQ OPCPUT      ;TABLE OPERNAD
01689  1E9C  CD 14 10           CMP EPASS       ;EXTERNAL
01690  1E9F  F0 19              BEQ OPCSYM      ;EXTERNAL EQUATE
01691  1EA1              ;********************************
01692  1EA1              ;  OUTPUT OPERAND
01693  1EA1              ;********************************
01694  1EA1  20 5C 2B           JSR SYMOP       ;CHECK SYMBOL
01695  1EA4  B0 17              BCS TWOB        ;C=1 FOUND ONE
01696  1EA6  20 3C 22           JSR RANGE       ;IS IT INTERNAL
01697  1EA9  90 06              BCC TWOBY       ;GERNERATE LABEL
01698  1EAB  20 D0 20           JSR DOLLAR      ;EXTERNAL
01699  1EAE  4C B4 1E           JMP TWOBX       ;
01700  1EB1              ;********************************
01701  1EB1              ;  OUTPUT OPERAND
01702  1EB1              ;********************************
01703  1EB1              TWOBY  =*
01704  1EB1  20 80 20           JSR PRLA        ;PRINT XX
01705  1EB4              TWOBX  = *
01706  1EB4  4C C2 20           JMP PWORKD      ;PRINT ADDRESS
01707  1EB7              OPCPUT = *
01708  1EB7  4C B3 22           JMP PUTI        ;PUT IN TABLE
01709  1EBA              OPCSYM = *
01710  1EBA  4C 5C 2B           JMP SYMOP       ;CHECK EXT EQUATE
01711  1EBD              TWOB   = *
01712  1EBD  60                 RTS             ;RETURN
01713  1EBE              ;*********************************
01714  1EBE              ; ILLEGAL MODES, UNUSED OPCODES
01715  1EBE              ;
01716  1EBE              ; ZZZZ XX .BYTE $XX ;'Y' ;??? ILLEGAL OPCODE
01717  1EBE              ;
01718  1EBE              ;*********************************
01719  1EBE  EE 5A 10    ILLEGL INC ERRCT       ;INC ERROR COUNT
01720  1EC1  D0 03              BNE *+5         ;SKIP NEXT LINE
01721  1EC3  EE 5B 10           INC ERRCT+1     ;INC ERROR COUNT






PDISASS64.ASM......PAGE 0035

LINE# LOC   CODE        LINE


01722  1EC6  A0 27              LDY #>MBYTE     ;.BYTE
01723  1EC8  A9 2C              LDA #<MBYTE     ;
01724  1ECA  20 BB 1B           JSR STRPNT      ;PRINT STRING
01725  1ECD  20 D0 20           JSR DOLLAR      ;PRINT $
01726  1ED0  20 2C 21           JSR GETSL       ;GET ILLEGAL BYTE
01727  1ED3                     
01728  1ED3              ;BEGIN REV 2017-3
01729  1ED3  48                 PHA             ;PUT BYTE ON STACK
01730  1ED4              ;
01731  1ED4  20 A5 1B           JSR PRBYT       ;PRINT IT
01732  1ED7  20 05 21           JSR SPACE       ;SPACE OVER
01733  1EDA              ;
01734  1EDA  68                 PLA             ;POP BYTE OFF STACK
01735  1EDB  20 34 26           JSR CASCII      ;IS IT PRINTABLE ASCII
01736  1EDE  B0 18              BCS ISKIP       ;IF NOT EXIT
01737  1EE0  48                 PHA             ;STACK IT
01738  1EE1  20 05 21           JSR SPACE       ;SPACE OVER
01739  1EE4  20 CB 20           JSR SEMIC       ;COMMENT
01740  1EE7  A9 27              LDA #'''        ;QUOTE
01741  1EE9  20 11 1C           JSR PCHAR       ;PRINT IT
01742  1EEC  68                 PLA             ;POP IT
01743  1EED  20 11 1C           JSR PCHAR       ;PRINT IT
01744  1EF0  A9 27              LDA #'''        ;QUOTE
01745  1EF2  20 11 1C           JSR PCHAR       ;PRINT IT
01746  1EF5  20 05 21           JSR SPACE       ;SPACE OVER
01747  1EF8              ;
01748  1EF8              ISKIP  = *
01749  1EF8              ;END REV 2017-3
01750  1EF8  A0 21              LDY #>ILLMSG
01751  1EFA  A9 7E              LDA #<ILLMSG
01752  1EFC  4C BB 1B           JMP STRPNT
01753  1EFF              ;********************************
01754  1EFF              ;      ACCUMULATOR MODE
01755  1EFF              ;********************************
01756  1EFF  A9 41       ACC    LDA #'A'        ;ASCII A
01757  1F01  4C 11 1C           JMP PCHAR       ;PRINT IT
01758  1F04              ;********************************
01759  1F04              ;       IMMEDIATE MODE
01760  1F04              ;********************************
01761  1F04  20 23 21    IMMEDT JSR INCSL       ;INC TO DATA BYTE
01762  1F07  AE 12 10           LDX PASS        ;GET PASS
01763  1F0A  EC 15 10           CPX CPASS       ;LAST PASS
01764  1F0D  D0 2A              BNE IMEXIT      ;EXIT
01765  1F0F  A9 23              LDA #'#'        ;ASCII #
01766  1F11  20 11 1C           JSR PCHAR       ;PRINT IT
01767  1F14  20 D0 20           JSR DOLLAR      ;PRINT $
01768  1F17  20 2C 21           JSR GETSL       ;GET BYTE
01769  1F1A  48                 PHA             ;STACK IT
01770  1F1B  20 A5 1B           JSR PRBYT       ;PRINT IT
01771  1F1E  68                 PLA             ;POP IT
01772  1F1F  20 34 26           JSR CASCII      ;PRINTABLE ASCII
01773  1F22  B0 15              BCS IMEXIT      ;IF NOT EXIT
01774  1F24  48                 PHA             ;STACK IT
01775  1F25  20 F8 20           JSR SPAC6       ;SPACE OVER
01776  1F28  20 CB 20           JSR SEMIC       ;COMMENT






PDISASS64.ASM......PAGE 0036

LINE# LOC   CODE        LINE


01777  1F2B  A9 27              LDA #'''        ;QUOTE
01778  1F2D  20 11 1C           JSR PCHAR       ;PRINT IT
01779  1F30  68                 PLA             ;POP IT
01780  1F31  20 11 1C           JSR PCHAR       ;PRINT IT
01781  1F34  A9 27              LDA #'''        ;QUOTE
01782  1F36  20 11 1C           JSR PCHAR       ;PRINT IT
01783  1F39  60          IMEXIT RTS             ;EXIT
01784  1F3A              ;*********************************
01785  1F3A              ;      BIT ZERO PAGE MODE
01786  1F3A              ;*********************************
01787  1F3A  EA          ZERBIT NOP
01788  1F3B              ;*********************************
01789  1F3B              ;      ZERO PAGE MODE
01790  1F3B              ;*********************************
01791  1F3B  4C 4D 1E    ZEROPG JMP ONEBYT      ;PRINT ONE BYTE
01792  1F3E              ;*********************************
01793  1F3E              ;      ZERO PAGE,X MODE
01794  1F3E              ;********************************
01795  1F3E  20 4D 1E    ZEROX  JSR ONEBYT      ;PRINT ONE BYTE
01796  1F41  4C DF 20           JMP XINDEX      ;PRINT ,X
01797  1F44              ;********************************
01798  1F44              ;       ZERO PAGE,Y MODE
01799  1F44              ;********************************
01800  1F44  20 4D 1E    ZEROY  JSR ONEBYT      ;PRINT ONE BYTE
01801  1F47  4C E9 20           JMP YINDEX      ;PRINT ,Y
01802  1F4A              ;*********************************
01803  1F4A              ;         BIT ABSOLUTE MODE
01804  1F4A              ;*********************************
01805  1F4A  EA          ABSBIT NOP
01806  1F4B              ;*********************************
01807  1F4B              ;         ABSOLUTE MODE
01808  1F4B              ;*********************************
01809  1F4B  20 82 1E    ABSLUT JSR TWOBYT      ;PRINT TWO BYTE
01810  1F4E  20 42 21           JSR DECSL       ;DEC TO SECOND
01811  1F51  20 42 21           JSR DECSL       ;DEC TO OPCODE
01812  1F54  20 2C 21           JSR GETSL       ;GET BYTE
01813  1F57  48                 PHA
01814  1F58  20 23 21           JSR INCSL
01815  1F5B  20 23 21           JSR INCSL
01816  1F5E  68                 PLA
01817  1F5F  C9 4C              CMP #$4C        ;IS IT JMP
01818  1F61  D0 0C              BNE ABSEXT      ;IF NOT EXIT
01819  1F63  20 FE 1A           JSR NEWLIN      ;NEXT LINE
01820  1F66  20 23 21           JSR INCSL
01821  1F69  20 67 20           JSR COMET       ;COMMENT LINE
01822  1F6C  20 42 21           JSR DECSL
01823  1F6F  60          ABSEXT RTS             ;RETURN
01824  1F70              ;*********************************
01825  1F70              ;       ABSOLUTE,X MODE
01826  1F70              ;********************************
01827  1F70  20 82 1E    ABSX   JSR TWOBYT      ;PRINT TWO BYTE
01828  1F73  4C DF 20           JMP XINDEX      ;PRINT ,X
01829  1F76              ;********************************
01830  1F76              ;       ABSOLUTE,Y MODE
01831  1F76              ;********************************






PDISASS64.ASM......PAGE 0037

LINE# LOC   CODE        LINE


01832  1F76  20 82 1E    ABSY   JSR TWOBYT      ;PRINT TWO BYTE
01833  1F79  4C E9 20           JMP YINDEX      ;PRINT ,Y
01834  1F7C              ;********************************
01835  1F7C              ;       IMPLIED MODE
01836  1F7C              ;********************************
01837  1F7C  20 2C 21    IMPLID JSR GETSL       ;GET BYTE
01838  1F7F  F0 09              BEQ IMPLI1      ;BRK
01839  1F81  C9 60              CMP #$60        ;CHECK CODE
01840  1F83  F0 05              BEQ IMPLI1      ;RTS
01841  1F85  C9 40              CMP #$40        ;CHECK CODE
01842  1F87  F0 01              BEQ IMPLI1      ;RTI
01843  1F89  60          IMPONE RTS             ;RETURN
01844  1F8A  20 FE 1A    IMPLI1 JSR NEWLIN      ;PRINT NEW LINE
01845  1F8D  20 23 21           JSR INCSL
01846  1F90  20 67 20           JSR COMET       ;COMMENT LINE
01847  1F93  4C 42 21           JMP DECSL
01848  1F96              ;********************************
01849  1F96              ;       INDIRECT MODE
01850  1F96              ;********************************
01851  1F96  20 D5 20    INDRCT JSR LPAREN      ;PRINT (
01852  1F99  20 82 1E           JSR TWOBYT      ;PRINT TWO BYTE
01853  1F9C  20 DA 20           JSR RPAREN      ;PRINT )
01854  1F9F  20 FE 1A           JSR NEWLIN      ;NEXT LINE
01855  1FA2  20 23 21           JSR INCSL
01856  1FA5  20 67 20           JSR COMET       ;COMMENT LINE
01857  1FA8  4C 42 21           JMP DECSL
01858  1FAB              ;********************************
01859  1FAB              ;     INDIRECT,X MODE
01860  1FAB              ;********************************
01861  1FAB  20 D5 20    INDX   JSR LPAREN      ;PRINT (
01862  1FAE  20 3E 1F           JSR ZEROX       ;PRINT $HH,X
01863  1FB1  4C DA 20           JMP RPAREN      ;PRINT )
01864  1FB4              ;********************************
01865  1FB4              ;     INDIRECT,Y MODE
01866  1FB4              ;********************************
01867  1FB4  20 D5 20    INDY   JSR LPAREN      ;PRINT (
01868  1FB7  20 4D 1E           JSR ONEBYT      ;PRINT ONE BYTE
01869  1FBA  20 DA 20           JSR RPAREN      ;PRINT )
01870  1FBD  4C E9 20           JMP YINDEX      ;PRINT ,Y
01871  1FC0              ;*********************************
01872  1FC0              ;      RELATIVE MODE
01873  1FC0              ;*********************************
01874  1FC0  20 23 21    RELATV JSR INCSL       ;INC BYTE POINTER
01875  1FC3  AD 12 10           LDA PASS        ;GET PASS COUNT
01876  1FC6  CD 14 10           CMP EPASS       ;EXTERNAL
01877  1FC9  F0 44              BEQ RELSYM      ;EXIT ON EXTERNAL
01878  1FCB              ;
01879  1FCB  AD 22 10           LDA SELECT      ;GET LOW POINTER
01880  1FCE  8D 45 10           STA WORKED      ;STORE TEMP
01881  1FD1  AD 23 10           LDA SELECT+1    ;GET HIGH POINTER
01882  1FD4  8D 46 10           STA WORKED+1    ;STORE TEMP
01883  1FD7  EE 45 10           INC WORKED      ;ADD 1 TO ADDRESS
01884  1FDA  D0 03              BNE *+5         ;ZERO MEANS CARRY
01885  1FDC  EE 46 10           INC WORKED+1    ;INC HIGH ADDRESS
01886  1FDF              ;






PDISASS64.ASM......PAGE 0038

LINE# LOC   CODE        LINE


01887  1FDF  20 2C 21           JSR GETSL       ;GET BYTE BRANCH OFFSET
01888  1FE2  C9 00              CMP #$00        ;IS IT ZERO
01889  1FE4  10 03              BPL FORWRD      ;IF SO BRANCH
01890  1FE6  CE 46 10           DEC WORKED+1    ;DEC HIGH POINTER
01891  1FE9  18          FORWRD CLC             ;CLEAR CARRY FLAG
01892  1FEA  6D 45 10           ADC WORKED      ;ADD IN OPERAND
01893  1FED  90 03              BCC RELND       ;TO SELECT ADDRES
01894  1FEF  EE 46 10           INC WORKED+1    ;AND NOW POINTS
01895  1FF2  8D 45 10    RELND  STA WORKED      ;TARGET ADDRESS
01896  1FF5              ;
01897  1FF5  AD 12 10           LDA PASS        ;GET PASS COUNT
01898  1FF8  CD 13 10           CMP IPASS       ;INTERNAL
01899  1FFB  F0 0F              BEQ RELPUT      ;ADDRESS TABLE
01900  1FFD              ;
01901  1FFD  20 5C 2B           JSR SYMOP       ;CHECK FOR SYMBOL
01902  2000  B0 0D              BCS RELSYM      ;C=1 SYMBOL
01903  2002              ;
01904  2002  AD 18 10           LDA ROPT        ;CHECK OPTION
01905  2005  C9 01              CMP #$01        ;REL TO * ?
01906  2007  F0 07              BEQ RELPC       ;IF SO DO IT
01907  2009              ;
01908  2009  4C BF 20           JMP PWORK       ;PRINT ADDRESS
01909  200C              ;
01910  200C              RELPUT = *
01911  200C  4C B3 22           JMP PUTI        ;PUT IN TABLE
01912  200F              ;
01913  200F  60          RELSYM RTS             ;RETURN
01914  2010              ;*********************************
01915  2010              ; PRINT RELATIVE TO PC
01916  2010              ;*********************************
01917  2010  20 2C 21    RELPC  JSR GETSL       ;GET BRANCH DATA
01918  2013  48                 PHA             ;SAVE ON STACK
01919  2014  30 07              BMI RELNEG      ;BACKWARD ?
01920  2016  A9 71              LDA #<POSREL
01921  2018  A0 21              LDY #>POSREL
01922  201A  4C 21 20           JMP RELPM
01923  201D  A9 75       RELNEG LDA #<NEGREL
01924  201F  A0 21              LDY #>NEGREL
01925  2021  20 BB 1B    RELPM  JSR STRPNT
01926  2024  68                 PLA             ;GET BRANCH DATA
01927  2025  18                 CLC             ;CLEAR CARRY
01928  2026  69 02              ADC #$02        ;ADD 2 FOR BRANCH
01929  2028  10 05              BPL RELP        ;FORWARD ?
01930  202A  18                 CLC             ;CLEAR CARRY
01931  202B  49 FF              EOR #$FF        ;COMPLMENT
01932  202D  69 01              ADC #$01        ;ADD 1 FOR 2'S
01933  202F  20 A5 1B    RELP   JSR PRBYT       ;PRINT BRANCH
01934  2032  20 F8 20           JSR SPAC6       ;SPACE
01935  2035  20 CB 20           JSR SEMIC       ;COMMENT CHAR
01936  2038  4C BF 20           JMP PWORK       ;PRINT ADDRESS
01937  203B              ;*********************************
01938  203B              ;  ORGIN LABEL
01939  203B              ;*********************************
01940  203B  20 29 22    ORGIN  JSR PRTOTH      ;PRINT LINE DATA
01941  203E  A9 2A              LDA #'*'        ;PC






PDISASS64.ASM......PAGE 0039

LINE# LOC   CODE        LINE


01942  2040  20 11 1C           JSR PCHAR       ;PRINT IT
01943  2043  A9 3D              LDA #'='        ;EQUALS
01944  2045  20 11 1C           JSR PCHAR       ;PRINT IT
01945  2048  20 D0 20           JSR DOLLAR      ;ASCII $
01946  204B  20 B6 20           JSR PSELEC      ;PRINT ADDRESS
01947  204E  4C FE 1A           JMP NEWLIN      ;START NEWLINE
01948  2051              ;*********************************
01949  2051              ; END OF FILE LABLE
01950  2051              ;*********************************
01951  2051  20 61 20    EFILE  JSR COMENT      ;COMMENT LINE
01952  2054  20 29 22           JSR PRTOTH      ;PRINT LINE DATA
01953  2057  A9 79              LDA #<MSGEND    ;END MESSAGE
01954  2059  A0 21              LDY #>MSGEND
01955  205B  20 BB 1B           JSR STRPNT      ;PRINT IT
01956  205E  4C FE 1A           JMP NEWLIN      ;NEW LINE
01957  2061              ;*********************************
01958  2061              ; PRINT COMMENT LINE
01959  2061              ;*********************************
01960  2061  20 67 20    COMENT JSR COMET       ;PRINT COMMENT
01961  2064  4C FE 1A           JMP NEWLIN      ;NEXT LINE
01962  2067              ;*********************************
01963  2067  20 29 22    COMET  JSR PRTOTH      ;PRINT LINE DATA
01964  206A  20 CB 20           JSR SEMIC       ;PRINT COMMENT
01965  206D  AD 1C 10           LDA FOROPT
01966  2070  D0 03              BNE CSHORT
01967  2072  A0 20              LDY #$20        ;COUNTER
01968  2074  2C                 .BYTE $2C
01969  2075  A0 10       CSHORT LDY #$10
01970  2077  A9 2A       COMPT  LDA #'*'        ;STAR
01971  2079  20 11 1C           JSR PCHAR       ;PRINT CHAR
01972  207C  88                 DEY             ;DEC COUNTER
01973  207D  D0 F8              BNE COMPT       ;20 OR 10 STARS
01974  207F  60                 RTS             ;RETURN
01975  2080              ;*********************************
01976  2080              ;     PRINT SELECTED ADDRESS
01977  2080              ;*********************************
01978  2080  A9 58       PRLA   LDA #'X'        ;XX LABEL
01979  2082  20 11 1C           JSR PCHAR       ;
01980  2085  A9 58              LDA #'X'        ;
01981  2087  4C 11 1C           JMP PCHAR       ;
01982  208A              ;*********************************
01983  208A              ; PRINT CODE ADDRESS
01984  208A              ;*********************************
01985  208A  20 48 2B    PRAD   JSR SYM         ;CHECK FOR SYMBOLIC
01986  208D  B0 1F              BCS NPRAD1      ;C=1 SYMBOLIC LABEL
01987  208F  AD 17 10           LDA XOPT        ;CHECK GENERATION
01988  2092  F0 10              BEQ P1          ;NO LABELS
01989  2094  20 12 23           JSR INTCHA      ;IS ADDRESS IN TAB
01990  2097  B0 0B              BCS P1          ;C=1 YES
01991  2099  AD 1C 10           LDA FOROPT      ;CHECK FORMAT
01992  209C  F0 03              BEQ POVER       ;STD FORMAT
01993  209E  4C 05 21           JMP SPACE       ;ONE SPACE
01994  20A1  4C F8 20    POVER  JMP SPAC6       ;SPACE OVER
01995  20A4              ;*********************************
01996  20A4              ; PRINT ADDRESS AS LABEL






PDISASS64.ASM......PAGE 0040

LINE# LOC   CODE        LINE


01997  20A4              ;*********************************
01998  20A4  20 80 20    P1     JSR PRLA        ;PRINT XX
01999  20A7  20 B6 20           JSR PSELEC      ;PRINT ADDRESS
02000  20AA  EA                 NOP
02001  20AB  EA                 NOP
02002  20AC  EA                 NOP
02003  20AD  60          NPRAD  RTS             ;RETURN
02004  20AE              ;*********************************
02005  20AE  AD 1C 10    NPRAD1 LDA FOROPT
02006  20B1  D0 FA              BNE NPRAD
02007  20B3  4C F9 2B           JMP FIXSYM
02008  20B6              ;*********************************
02009  20B6              ; PRINT SELECT ADDRESS
02010  20B6              ;*********************************
02011  20B6  AD 22 10    PSELEC LDA SELECT      ;LOW BYTE
02012  20B9  AC 23 10           LDY SELECT+1    ;HIGH BYTE
02013  20BC  4C 9F 1B           JMP PRBYTS      ;PRINT THEM
02014  20BF              ;*********************************
02015  20BF              ; PRINT WORKED ADDRESS WITH XX
02016  20BF              ;*********************************
02017  20BF  20 80 20    PWORK  JSR PRLA        ;PRINT XX
02018  20C2              ;*********************************
02019  20C2              ; PRINT WORKED ADDRESS
02020  20C2              ;*********************************
02021  20C2  AD 45 10    PWORKD LDA WORKED      ;LOW BYTE
02022  20C5  AC 46 10           LDY WORKED+1    ;HIGH BYTE
02023  20C8  4C 9F 1B           JMP PRBYTS      ;PRINT THEM
02024  20CB              ;********************************
02025  20CB              ; PRINT SEMICOLON FOR COMMENT
02026  20CB              ;********************************
02027  20CB  A9 3B       SEMIC  LDA #';'
02028  20CD  4C 11 1C           JMP PCHAR
02029  20D0              ;********************************
02030  20D0              ; PRINT DOLLAR SIGN FOR HEX
02031  20D0              ;********************************
02032  20D0  A9 24       DOLLAR LDA #'$'
02033  20D2  4C 11 1C           JMP PCHAR
02034  20D5              ;********************************
02035  20D5              ; PRINT LEFT PARENTTHESES
02036  20D5              ;********************************
02037  20D5  A9 28       LPAREN LDA #'('
02038  20D7  4C 11 1C           JMP PCHAR
02039  20DA              ;********************************
02040  20DA              ; PRINT RIGHT PARENTTHESES
02041  20DA              ;********************************
02042  20DA  A9 29       RPAREN LDA #')'
02043  20DC  4C 11 1C           JMP PCHAR
02044  20DF              ;********************************
02045  20DF              ; PRINT A COMMA AND AN "X"
02046  20DF              ;********************************
02047  20DF  A9 2C       XINDEX LDA #','
02048  20E1  20 11 1C           JSR PCHAR
02049  20E4  A9 58              LDA #'X'
02050  20E6  4C 11 1C           JMP PCHAR
02051  20E9              ;********************************






PDISASS64.ASM......PAGE 0041

LINE# LOC   CODE        LINE


02052  20E9              ; PRINT A COMMA AND A "Y"
02053  20E9              ;********************************
02054  20E9  A9 2C       YINDEX LDA #','
02055  20EB  20 11 1C           JSR PCHAR
02056  20EE  A9 59              LDA #'Y'
02057  20F0  4C 11 1C           JMP PCHAR
02058  20F3              ;********************************
02059  20F3              ; PRINT CARRAIGE RETURN
02060  20F3              ;*********************************
02061  20F3  A9 0D       CRLF   LDA #$0D        ;ASCII CR
02062  20F5  4C 11 1C           JMP PCHAR       ;PRINT
02063  20F8              ;*********************************
02064  20F8              ; PRINT SIX SPACES
02065  20F8              ;*********************************
02066  20F8  A9 05       SPAC6  LDA #$05
02067  20FA  8D 51 10    SPACM  STA TEMP
02068  20FD  20 05 21    SPAC   JSR SPACE
02069  2100  CE 51 10           DEC TEMP
02070  2103  D0 F8              BNE SPAC
02071  2105              ;*********************************
02072  2105              ; PRINT SPACE
02073  2105              ;*********************************
02074  2105  A9 20       SPACE  LDA #$20        ;ASCII SPACE
02075  2107  4C 11 1C           JMP PCHAR       ;PRINT
02076  210A              ;*********************************
02077  210A              ; SELECT NEXT BYTE
02078  210A              ;*********************************
02079  210A  AD 23 10    NEXTSL LDA SELECT+1
02080  210D  CD 21 10           CMP EA+1
02081  2110  90 0A              BCC SLOK
02082  2112  D0 0D              BNE NOINC
02083  2114  AD 22 10           LDA SELECT
02084  2117  CD 20 10           CMP EA
02085  211A  B0 05              BCS NOINC
02086  211C  20 23 21    SLOK   JSR INCSL
02087  211F  18                 CLC
02088  2120  60                 RTS
02089  2121  38          NOINC  SEC
02090  2122  60                 RTS
02091  2123              ;*********************************
02092  2123              ; INC SELECTED BYTE
02093  2123              ;*********************************
02094  2123  EE 22 10    INCSL  INC SELECT
02095  2126  D0 03              BNE *+5
02096  2128  EE 23 10           INC SELECT+1
02097  212B  60                 RTS
02098  212C              ;*********************************
02099  212C              ; GET SELECTED BYTE
02100  212C              ;*********************************
02101  212C  18          GETSL  CLC
02102  212D  AD 22 10           LDA SELECT
02103  2130  6D 24 10           ADC OFFSET
02104  2133  85 DD              STA ZEROUR
02105  2135  AD 23 10           LDA SELECT+1
02106  2138  6D 25 10           ADC OFFSET+1






PDISASS64.ASM......PAGE 0042

LINE# LOC   CODE        LINE


02107  213B  85 DE              STA ZEROUR+1
02108  213D  A0 00              LDY #$00
02109  213F  B1 DD              LDA (ZEROUR),Y
02110  2141  60                 RTS
02111  2142              ;*********************************
02112  2142              ; DEC SLECTED BYTE
02113  2142              ;*********************************
02114  2142  AD 22 10    DECSL  LDA SELECT
02115  2145  D0 03              BNE *+5
02116  2147  CE 23 10           DEC SELECT+1
02117  214A  CE 22 10           DEC SELECT
02118  214D  60                 RTS
02119  214E              ;*********************************
02120  214E              ; INITIALIZE SELECT
02121  214E              ;*********************************
02122  214E  AD 1E 10    INTSA  LDA SA
02123  2151  8D 22 10           STA SELECT
02124  2154  AD 1F 10           LDA SA+1
02125  2157  8D 23 10           STA SELECT+1
02126  215A  60                 RTS
02127  215B              ;*********************************
02128  215B              ; ASCII STRING DATA
02129  215B              ;*********************************
02130  215B  2E 42       MSGBIT .BYTE '.BYTE $',0
02130  2162  00 
02131  2163  20 3B       MSGBZP .BYTE '         ;BIT ZP SKIP',0
02131  2170  00 
02132  2171  2A 2B 24    POSREL .BYTE '*+$',0
02132  2174  00 
02133  2175  2A 2D 24    NEGREL .BYTE '*-$',0
02133  2178  00 
02134  2179  2E 45       MSGEND .BYTE '.END',0
02134  217D  00 
02135  217E  3B 3F       ILLMSG .BYTE ';??? ILLEGAL OPCODE',0
02135  2191  00 
02136  2192              ;*********************************
02137  2192              ; PRINT ONE BYTE OPCODE DATA
02138  2192              ;*********************************
02139  2192  20 2C 21    PRTONE JSR GETSL       ;GET BYTE
02140  2195  20 A5 1B           JSR PRBYT       ;PRINT BYTE
02141  2198  AD 1C 10           LDA FOROPT
02142  219B  F0 03              BEQ PRTON1
02143  219D  A9 07              LDA #$07
02144  219F  2C                 .BYTE $2C
02145  21A0  A9 09       PRTON1 LDA #$09        ;10 SPACES
02146  21A2  20 FA 20           JSR SPACM       ;
02147  21A5  4C FE 21           JMP PRTEST      ;RESET I/O DEVICE
02148  21A8              ;*********************************
02149  21A8              ; PRINT TWO BYTE OPCODE DATA
02150  21A8              ;*********************************
02151  21A8  20 2C 21    PRTTWO JSR GETSL       ;GET BYTE
02152  21AB  20 A5 1B           JSR PRBYT       ;PRINT BYTE
02153  21AE  20 05 21           JSR SPACE       ;
02154  21B1  20 23 21           JSR INCSL       ;INC TO OPERAND
02155  21B4  20 2C 21           JSR GETSL       ;GET BYTE






PDISASS64.ASM......PAGE 0043

LINE# LOC   CODE        LINE


02156  21B7  20 A5 1B           JSR PRBYT       ;PRINT IT
02157  21BA  AD 1C 10           LDA FOROPT
02158  21BD  F0 03              BEQ PRTTW1
02159  21BF  A9 04              LDA #$04
02160  21C1  2C                 .BYTE $2C
02161  21C2  A9 06       PRTTW1 LDA #$06        ;7 SPACES
02162  21C4  20 FA 20           JSR SPACM       ;
02163  21C7  20 42 21           JSR DECSL       ;RESET POINTER
02164  21CA  4C FE 21           JMP PRTEST      ;RESET I/O DEVICE
02165  21CD              ;*********************************
02166  21CD              ; PRINT THREE BYTE OPCODE DATA
02167  21CD              ;*********************************
02168  21CD  20 2C 21    PRTTHE JSR GETSL       ;GET BYTE
02169  21D0  20 A5 1B           JSR PRBYT       ;PRINT BYTE
02170  21D3  20 05 21           JSR SPACE       ;
02171  21D6  20 23 21           JSR INCSL       ;INC TO OPERAND
02172  21D9  20 2C 21           JSR GETSL       ;GET BYTE
02173  21DC  20 A5 1B           JSR PRBYT       ;PRINT IT
02174  21DF  20 05 21           JSR SPACE       ;
02175  21E2  20 23 21           JSR INCSL       ;INC TO LAST BYTE
02176  21E5  20 2C 21           JSR GETSL       ;GET BYTE
02177  21E8  20 A5 1B           JSR PRBYT       ;PRINT IT
02178  21EB  AD 1C 10           LDA FOROPT
02179  21EE  F0 03              BEQ PRTTH1
02180  21F0  A9 01              LDA #$01
02181  21F2  2C                 .BYTE $2C
02182  21F3  A9 03       PRTTH1 LDA #$03        ;4 SPACES
02183  21F5  20 FA 20           JSR SPACM       ;
02184  21F8  20 42 21           JSR DECSL       ;DEC POINTER
02185  21FB  20 42 21           JSR DECSL       ;DEC POINTER
02186  21FE              ;*********************************
02187  21FE              ; RESET I/O DEVICE (DISK IF USED)
02188  21FE              ;*********************************
02189  21FE  AD 1A 10    PRTEST LDA OUTPUT      ;GET I/O DEVICE
02190  2201  8D 19 10           STA DEVICE      ;RESET I/O
02191  2204  60                 RTS             ;RETURN
02192  2205              ;*********************************
02193  2205              ; PRINT LINE DATA FOR OPCODE
02194  2205              ;*********************************
02195  2205  AD 19 10    PRTDAT LDA DEVICE      ;OUTPUT DEVICE
02196  2208  29 07              AND #$07        ;MASK DISK
02197  220A  8D 19 10           STA DEVICE      ;RESET
02198  220D  AD 1C 10           LDA FOROPT      ;CHECK FORMAT
02199  2210  D0 0F              BNE PRTDAF      ;SKIP LINE #
02200  2212  AD 59 10           LDA LINECT+1    ;HIH BYTE LINE
02201  2215  AE 58 10           LDX LINECT      ;LOW BYTE LINE
02202  2218  20 D7 1B           JSR PRTNUM      ;PRINT NUMBER
02203  221B  20 05 21           JSR SPACE       ;
02204  221E  20 05 21           JSR SPACE       ;
02205  2221  20 B6 20    PRTDAF JSR PSELEC      ;PRINT ADDRESS
02206  2224  A9 01              LDA #$01        ;2 SPACES
02207  2226  4C FA 20           JMP SPACM       ;
02208  2229              ;*********************************
02209  2229              ; PRINT LINE DATA FOR OTHER LINES
02210  2229              ;*********************************






PDISASS64.ASM......PAGE 0044

LINE# LOC   CODE        LINE


02211  2229  20 05 22    PRTOTH JSR PRTDAT      ;PRINT LINE
02212  222C  AD 1C 10           LDA FOROPT
02213  222F  F0 03              BEQ PRTOT1
02214  2231  A9 09              LDA #$09
02215  2233  2C                 .BYTE $2C
02216  2234  A9 0B       PRTOT1 LDA #$0B        ;12 SPACES
02217  2236  20 FA 20           JSR SPACM       ;
02218  2239  4C FE 21           JMP PRTEST      ;RESET I/O
02219  223C              ;********************************
02220  223C              ;.FIL 0:INTERNAL.ASM
02221  223C              ;********************************
02222  223C              ;.END
02223  223C              ;*********************************
02224  223C              ; FILE INTERNAL.ASM
02225  223C              ;*********************************
02226  223C              ;
02227  223C              ;        DISASSEMBLER64
02228  223C              ;    SYMBOLIC DISASSEMBLER
02229  223C              ;       BY DENTON MARLOWE
02230  223C              ;
02231  223C              ;  (C)1986 BY DENTON MARLOWE
02232  223C              ;
02233  223C              ;*********************************
02234  223C              ; INTERNAL ADDRESS TABLE ROUTINES
02235  223C              ;*********************************
02236  223C              ; CHECK FOR OUT OF RANGE ADDRESS
02237  223C              ;*********************************
02238  223C  AD 46 10    RANGE  LDA WORKED+1    ;GET HIGH
02239  223F  CD 29 10           CMP EAGOL+1     ;COMPARE
02240  2242  90 0A              BCC RANG        ;< CHECK START
02241  2244  D0 1A              BNE ROUT        ;> OUT OF RANGE
02242  2246  AD 45 10           LDA WORKED      ;GET LOW
02243  2249  CD 28 10           CMP EAGOL       ;COMPARE
02244  224C  B0 12              BCS ROUT        ;> OUT OF RANGE
02245  224E              ;*********************************
02246  224E  AD 46 10    RANG   LDA WORKED+1    ;GET HIGH
02247  2251  CD 27 10           CMP SAGOL+1     ;COMPARE
02248  2254  90 0A              BCC ROUT        ;< OUT OF RANGE
02249  2256  AD 45 10           LDA WORKED      ;GET LOW
02250  2259  CD 26 10           CMP SAGOL       ;COMPARE
02251  225C  90 02              BCC ROUT        ;< OUT OF RANGE
02252  225E              ;*********************************
02253  225E  18                 CLC             ;C=0 IN RANGE
02254  225F  60                 RTS
02255  2260  38          ROUT   SEC             ;C=1 OUT RANGE
02256  2261  60                 RTS
02257  2262              ;*********************************
02258  2262              ; INITIALIZE INTERNAL TABLE
02259  2262              ;*********************************
02260  2262  AD EF 10    INITIN LDA DATABE
02261  2265  8D 30 10           STA TABINS
02262  2268  8D 32 10           STA TABINE
02263  226B  AD F0 10           LDA DATABE+1
02264  226E  8D 31 10           STA TABINS+1
02265  2271  8D 33 10           STA TABINE+1






PDISASS64.ASM......PAGE 0045

LINE# LOC   CODE        LINE


02266  2274              ;*********************************
02267  2274              ; INITIALIZE INTERNAL TABLE POINT
02268  2274              ;*********************************
02269  2274  AD 30 10    INTSET LDA TABINS
02270  2277  8D 2E 10           STA TABINP
02271  227A  AD 31 10           LDA TABINS+1
02272  227D  8D 2F 10           STA TABINP+1
02273  2280  60                 RTS
02274  2281              ;*********************************
02275  2281              ; SAVE INTERNAL TABLE POINTERS
02276  2281              ;*********************************
02277  2281  AD 30 10    SAVINT LDA TABINS
02278  2284  8D 4B 10           STA SAVES
02279  2287  AD 31 10           LDA TABINS+1
02280  228A  8D 4C 10           STA SAVES+1
02281  228D  AD 32 10           LDA TABINE
02282  2290  8D 4D 10           STA SAVEE
02283  2293  AD 33 10           LDA TABINE+1
02284  2296  8D 4E 10           STA SAVEE+1
02285  2299  60                 RTS
02286  229A              ;*********************************
02287  229A              ; RESTORE INTERNAL TABLE POINTERS
02288  229A              ;*********************************
02289  229A  AD 4B 10    RESINT LDA SAVES
02290  229D  8D 30 10           STA TABINS
02291  22A0  AD 4C 10           LDA SAVES+1
02292  22A3  8D 31 10           STA TABINS+1
02293  22A6  AD 4D 10           LDA SAVEE
02294  22A9  8D 32 10           STA TABINE
02295  22AC  AD 4E 10           LDA SAVEE+1
02296  22AF  8D 33 10           STA TABINE+1
02297  22B2  60                 RTS
02298  22B3              ;*********************************
02299  22B3              ; PUT ADDRESS IN INTERNAL TABLE
02300  22B3              ;*********************************
02301  22B3  38          PUTI   SEC
02302  22B4  AD 30 10           LDA TABINS
02303  22B7  ED 32 10           SBC TABINE
02304  22BA  8D 51 10           STA TEMP
02305  22BD  AD 31 10           LDA TABINS+1
02306  22C0  ED 33 10           SBC TABINE+1
02307  22C3  0D 51 10           ORA TEMP
02308  22C6  F0 05              BEQ PUIT
02309  22C8              ;
02310  22C8  20 1E 23           JSR INTCHK      ;IS ADDRESS IN TAB
02311  22CB  B0 23              BCS INTEXT      ;IF SO EXIT
02312  22CD              ;
02313  22CD  AD 32 10    PUIT   LDA TABINE      ;GET LOW END
02314  22D0  85 DD              STA ZEROUR      ;STORE
02315  22D2  AD 33 10           LDA TABINE+1    ;GET HIGH END
02316  22D5  85 DE              STA ZEROUR+1    ;STORE
02317  22D7  A0 00              LDY #$00        ;OFFSET
02318  22D9  AD 45 10           LDA WORKED      ;GET LOW ADDRESS
02319  22DC  91 DD              STA (ZEROUR),Y  ;PUT IN TABLE
02320  22DE  C8                 INY             ;OFFSET TO HIGH






PDISASS64.ASM......PAGE 0046

LINE# LOC   CODE        LINE


02321  22DF  AD 46 10           LDA WORKED+1    ;GET HIGH ADDRESS
02322  22E2  91 DD              STA (ZEROUR),Y  ;PUT IN TABLE
02323  22E4              ;
02324  22E4  20 CB 20           JSR SEMIC       ;PRINT ;
02325  22E7  20 C2 20           JSR PWORKD      ;PRINT ADDRESS
02326  22EA              ;*********************************
02327  22EA  20 F2 22           JSR INCIE       ;INC TO HIGH & LOW
02328  22ED  4C F2 22           JMP INCIE       ;INC TO HIGH & LOW
02329  22F0              ;
02330  22F0              INTEXT = *
02331  22F0  18                 CLC             ;C=0 FOR NO MATCH
02332  22F1  60                 RTS             ;RETURN
02333  22F2              ;*********************************
02334  22F2              ; INC INTERNAL END TABLE POINTER
02335  22F2              ;*********************************
02336  22F2  EE 32 10    INCIE  INC TABINE
02337  22F5  D0 03              BNE *+5
02338  22F7  EE 33 10           INC TABINE+1
02339  22FA              ;*********************************
02340  22FA              ; INC INTERNAL ADDRESS POINTER
02341  22FA              ;*********************************
02342  22FA  EE 2E 10    INCI   INC TABINP
02343  22FD  D0 03              BNE *+5
02344  22FF  EE 2F 10           INC TABINP+1
02345  2302  60                 RTS
02346  2303              ;*********************************
02347  2303              ; GET BYTE FROM INTERNAL TABLE
02348  2303              ;*********************************
02349  2303  AD 2E 10    GETI   LDA TABINP
02350  2306  85 DD              STA ZEROUR
02351  2308  AD 2F 10           LDA TABINP+1
02352  230B  85 DE              STA ZEROUR+1
02353  230D  A0 00              LDY #$00
02354  230F  B1 DD              LDA (ZEROUR),Y
02355  2311  60                 RTS
02356  2312              ;*********************************
02357  2312              ; CHECK IF ADDRESS IN TABLE
02358  2312              ;*********************************
02359  2312  AD 22 10    INTCHA LDA SELECT
02360  2315  8D 45 10           STA WORKED
02361  2318  AD 23 10           LDA SELECT+1
02362  231B  8D 46 10           STA WORKED+1
02363  231E              ;*********************************
02364  231E  20 74 22    INTCHK JSR INTSET
02365  2321  20 03 23    INTCH  JSR GETI
02366  2324  8D 47 10           STA WORKER
02367  2327  20 FA 22           JSR INCI
02368  232A  20 03 23           JSR GETI
02369  232D  8D 48 10           STA WORKER+1
02370  2330  38                 SEC
02371  2331  AD 46 10           LDA WORKED+1
02372  2334  ED 48 10           SBC WORKER+1
02373  2337  8D 51 10           STA TEMP
02374  233A  AD 45 10           LDA WORKED
02375  233D  ED 47 10           SBC WORKER






PDISASS64.ASM......PAGE 0047

LINE# LOC   CODE        LINE


02376  2340  0D 51 10           ORA TEMP
02377  2343  F0 17              BEQ INTMAT
02378  2345              ;*********************************
02379  2345  20 FA 22           JSR INCI
02380  2348  AD 2F 10           LDA TABINP+1
02381  234B  CD 33 10           CMP TABINE+1
02382  234E  90 D1              BCC INTCH
02383  2350  D0 08              BNE INTEND
02384  2352  AD 2E 10           LDA TABINP
02385  2355  CD 32 10           CMP TABINE
02386  2358  90 C7              BCC INTCH
02387  235A              ;*********************************
02388  235A  18          INTEND CLC
02389  235B  60                 RTS
02390  235C  38          INTMAT SEC
02391  235D  60                 RTS
02392  235E              ;*********************************
02393  235E              ; 2 BYTE TABLE SORT ROUTINE
02394  235E              ;*********************************
02395  235E  20 74 22    SORT   JSR INTSET      ;SET POINTERS
02396  2361  AD 30 10           LDA TABINS
02397  2364  8D 34 10           STA SMALLS
02398  2367  8D 36 10           STA SMALLP
02399  236A  AD 31 10           LDA TABINS+1
02400  236D  8D 35 10           STA SMALLS+1
02401  2370  8D 37 10           STA SMALLP+1
02402  2373              ;*********************************
02403  2373              ; PUT FIRST WORD INTO TEMP
02404  2373              ;*********************************
02405  2373  20 03 23    SORT1  JSR GETI
02406  2376  8D 51 10           STA TEMP
02407  2379  20 FA 22           JSR INCI
02408  237C  20 03 23           JSR GETI
02409  237F  8D 52 10           STA TEMP+1
02410  2382              ;*********************************
02411  2382              ; INC TO NEXT WORD AND COMPARE
02412  2382              ; SMALLP POINTS TO LOW BYTE
02413  2382              ;*********************************
02414  2382  20 FA 22    SORT2  JSR INCI
02415  2385  AD 2E 10           LDA TABINP
02416  2388  8D 36 10           STA SMALLP
02417  238B  AD 2F 10           LDA TABINP+1
02418  238E  8D 37 10           STA SMALLP+1
02419  2391  20 03 23           JSR GETI
02420  2394  8D 45 10           STA WORKED
02421  2397  20 FA 22           JSR INCI
02422  239A  AD 2F 10           LDA TABINP+1
02423  239D  CD 33 10           CMP TABINE+1
02424  23A0  90 0D              BCC T2
02425  23A2  D0 08              BNE S3
02426  23A4  AD 2E 10           LDA TABINP
02427  23A7  CD 32 10           CMP TABINE
02428  23AA  90 03              BCC T2
02429  23AC  4C 04 24    S3     JMP SORT3
02430  23AF  20 03 23    T2     JSR GETI






PDISASS64.ASM......PAGE 0048

LINE# LOC   CODE        LINE


02431  23B2  8D 46 10           STA WORKED+1
02432  23B5  CD 52 10           CMP TEMP+1
02433  23B8  90 0D              BCC SMALL
02434  23BA  D0 08              BNE LARGE
02435  23BC  AD 45 10           LDA WORKED
02436  23BF  CD 51 10           CMP TEMP
02437  23C2  90 03              BCC SMALL
02438  23C4  4C 82 23    LARGE  JMP SORT2
02439  23C7              ;*********************************
02440  23C7              ; WORD IS SMALL THAN TEMP PUT IT
02441  23C7              ; WHERE TEMP CAME FROM (SMALLS)
02442  23C7              ;*********************************
02443  23C7  AD 34 10    SMALL  LDA SMALLS
02444  23CA  85 DD              STA ZEROUR
02445  23CC  AD 35 10           LDA SMALLS+1
02446  23CF  85 DE              STA ZEROUR+1
02447  23D1  A0 00              LDY #$00
02448  23D3  AD 45 10           LDA WORKED
02449  23D6  91 DD              STA (ZEROUR),Y
02450  23D8  C8                 INY
02451  23D9  AD 46 10           LDA WORKED+1
02452  23DC  91 DD              STA (ZEROUR),Y
02453  23DE              ;*********************************
02454  23DE              ; PUT TEMP IN PLACE OF WORD
02455  23DE              ; SMALLP POINTS TO LO ADDRESS
02456  23DE              ;*********************************
02457  23DE  AD 36 10           LDA SMALLP
02458  23E1  85 DD              STA ZEROUR
02459  23E3  AD 37 10           LDA SMALLP+1
02460  23E6  85 DE              STA ZEROUR+1
02461  23E8  A0 00              LDY #$00
02462  23EA  AD 51 10           LDA TEMP
02463  23ED  91 DD              STA (ZEROUR),Y
02464  23EF  C8                 INY
02465  23F0  AD 52 10           LDA TEMP+1
02466  23F3  91 DD              STA (ZEROUR),Y
02467  23F5              ;*********************************
02468  23F5  AD 34 10           LDA SMALLS
02469  23F8  8D 2E 10           STA TABINP
02470  23FB  AD 35 10           LDA SMALLS+1
02471  23FE  8D 2F 10           STA TABINP+1
02472  2401  4C 73 23           JMP SORT1
02473  2404              ;*********************************
02474  2404              ; IF AFTER SCAN TO TABLE GOTO NEXT
02475  2404              ; WORD IN TABLE FOR CHECK
02476  2404              ;*********************************
02477  2404  18          SORT3  CLC
02478  2405  AD 34 10           LDA SMALLS
02479  2408  69 02              ADC #$02
02480  240A  8D 34 10           STA SMALLS
02481  240D  8D 2E 10           STA TABINP
02482  2410  AD 35 10           LDA SMALLS+1
02483  2413  69 00              ADC #$00
02484  2415  8D 35 10           STA SMALLS+1
02485  2418  8D 2F 10           STA TABINP+1






PDISASS64.ASM......PAGE 0049

LINE# LOC   CODE        LINE


02486  241B  AD 35 10           LDA SMALLS+1
02487  241E  CD 33 10           CMP TABINE+1
02488  2421  90 0A              BCC SORTOK
02489  2423  D0 0B              BNE SORT4
02490  2425  AD 34 10           LDA SMALLS
02491  2428  CD 32 10           CMP TABINE
02492  242B  B0 03              BCS SORT4
02493  242D  4C 73 23    SORTOK JMP SORT1
02494  2430              ;*********************************
02495  2430  4C 74 22    SORT4  JMP INTSET
02496  2433              ;*********************************
02497  2433              ; PRINT INTERNAL ADDRESS TABLE
02498  2433              ;*********************************
02499  2433  38          INTPRT SEC
02500  2434  AD 30 10           LDA TABINS
02501  2437  ED 32 10           SBC TABINE
02502  243A  8D 51 10           STA TEMP
02503  243D  AD 31 10           LDA TABINS+1
02504  2440  ED 33 10           SBC TABINE+1
02505  2443  0D 51 10           ORA TEMP
02506  2446  D0 01              BNE INTOUT
02507  2448  60                 RTS
02508  2449              ;*********************************
02509  2449  20 E8 1C    INTOUT JSR HEADSY
02510  244C  20 5E 23           JSR SORT
02511  244F              ;*********************************
02512  244F  A9 03       LOOP1  LDA #$03
02513  2451  8D 52 10           STA SAVA
02514  2454  20 03 23    INTPR  JSR GETI
02515  2457  8D 45 10           STA WORKED
02516  245A  20 FA 22           JSR INCI
02517  245D  20 03 23           JSR GETI
02518  2460  8D 46 10           STA WORKED+1
02519  2463  20 05 21           JSR SPACE
02520  2466  20 5C 2B           JSR SYMOP
02521  2469  90 0B              BCC INTPRS
02522  246B  20 F9 2B           JSR FIXSYM
02523  246E  A9 02              LDA #$02
02524  2470  20 FA 20           JSR SPACM
02525  2473  4C 7B 24           JMP INTPRM
02526  2476  A9 08       INTPRS LDA #$08
02527  2478  20 FA 20           JSR SPACM
02528  247B  20 C2 20    INTPRM JSR PWORKD
02529  247E  20 FA 22           JSR INCI
02530  2481  AD 2F 10           LDA TABINP+1
02531  2484  CD 33 10           CMP TABINE+1
02532  2487  90 0A              BCC PRTOK
02533  2489  D0 15              BNE PREND
02534  248B  AD 2E 10           LDA TABINP
02535  248E  CD 32 10           CMP TABINE
02536  2491  B0 0D              BCS PREND
02537  2493  CE 52 10    PRTOK  DEC SAVA
02538  2496  30 0B              BMI LOOP2
02539  2498  A9 02              LDA #$02
02540  249A  20 FA 20           JSR SPACM






PDISASS64.ASM......PAGE 0050

LINE# LOC   CODE        LINE


02541  249D  4C 54 24           JMP INTPR
02542  24A0  4C BD 1C    PREND  JMP NEXPTS
02543  24A3  20 BD 1C    LOOP2  JSR NEXPTS
02544  24A6  4C 4F 24           JMP LOOP1
02545  24A9              ;*********************************
02546  24A9              ;.FIL 0:ASC.ASM
02547  24A9              ;*********************************
02548  24A9              ;.END
02549  24A9              ;*********************************
02550  24A9              ; FILE ASC.ASM
02551  24A9              ;*********************************
02552  24A9              ;
02553  24A9              ;        DISASSEMBLER64
02554  24A9              ;    SYMBOLIC DISASSEMBLER
02555  24A9              ;       BY DENTON MARLOWE
02556  24A9              ;
02557  24A9              ;  (C)1986 BY DENTON MARLOWE
02558  24A9              ;
02559  24A9              ;*********************************
02560  24A9              ; DATA TABLE HANDLER
02561  24A9              ;*********************************
02562  24A9  AD E9 10    DATAOP LDA NDATA       ;GET NUM TABLES
02563  24AC  F0 07              BEQ ENDAX       ;IF ZERO EXIT
02564  24AE  A9 00              LDA #$00        ;ZERO BYTE
02565  24B0  8D E7 10           STA CDATA       ;SET FIRST TABLE
02566  24B3  F0 03              BEQ DATAO1      ;
02567  24B5  4C 99 25    ENDAX  JMP ENDDAT      ;
02568  24B8              ;*********************************
02569  24B8  AD E7 10    DATAO1 LDA CDATA       ;CURRENT TABLE
02570  24BB  CD E9 10           CMP NDATA       ;LAST TABLE DONE
02571  24BE  F0 F5              BEQ ENDAX       ;IF SO EXIT
02572  24C0  0A                 ASL A           ;CDATA*2
02573  24C1  0A                 ASL A           ;CDATA*4
02574  24C2  18                 CLC
02575  24C3  6D E7 10           ADC CDATA       ;CDATA*5
02576  24C6  A8                 TAY             ;PUT INTO INDEX
02577  24C7  B9 F1 10           LDA TDATA,Y     ;START LOW
02578  24CA  8D 47 10           STA WORKER      ;STORE
02579  24CD  C8                 INY             ;INC OFFSET
02580  24CE  B9 F1 10           LDA TDATA,Y     ;START HIGH
02581  24D1  8D 48 10           STA WORKER+1    ;STORE
02582  24D4  38                 SEC             ;C=1
02583  24D5  AD 47 10           LDA WORKER      ;
02584  24D8  ED 22 10           SBC SELECT      ;
02585  24DB  8D 51 10           STA TEMP        ;
02586  24DE  AD 48 10           LDA WORKER+1    ;
02587  24E1  ED 23 10           SBC SELECT+1    ;
02588  24E4  0D 51 10           ORA TEMP        ;
02589  24E7  F0 05              BEQ DATAO2      ;MATCH
02590  24E9  EE E7 10           INC CDATA       ;NEXT TABLE
02591  24EC  D0 CA              BNE DATAO1      ;CHECK FOR MATCH
02592  24EE              ;*********************************
02593  24EE              ; GET TABLE DATA
02594  24EE              ;*********************************
02595  24EE  C8          DATAO2 INY             ;INC OFFSET






PDISASS64.ASM......PAGE 0051

LINE# LOC   CODE        LINE


02596  24EF  B9 F1 10           LDA TDATA,Y     ;END LOW
02597  24F2  8D E4 10           STA EAS         ;STORE
02598  24F5  C8                 INY             ;INC OFFSET
02599  24F6  B9 F1 10           LDA TDATA,Y     ;END HIGH
02600  24F9  8D E5 10           STA EAS+1       ;STORE
02601  24FC  C8                 INY             ;INC OFFSET
02602  24FD  B9 F1 10           LDA TDATA,Y     ;DATA TYPE
02603  2500  8D E6 10           STA TEXTER      ;STORE
02604  2503  C9 53              CMP #'S'        ;IS IT SKIPPER
02605  2505  D0 23              BNE ASCCCC      ;
02606  2507              ;*********************************
02607  2507              ; SKIP RANGE OF ADDRESSES
02608  2507              ;*********************************
02609  2507  AD 12 10           LDA PASS
02610  250A  CD 15 10           CMP CPASS
02611  250D  D0 1B              BNE ASCCCC
02612  250F  AD E4 10           LDA EAS
02613  2512  8D 22 10           STA SELECT
02614  2515  AD E5 10           LDA EAS+1
02615  2518  8D 23 10           STA SELECT+1
02616  251B  20 23 21           JSR INCSL
02617  251E  20 3B 20           JSR ORGIN
02618  2521  20 42 21           JSR DECSL
02619  2524  20 61 20           JSR COMENT
02620  2527  4C 96 25           JMP DATUT
02621  252A              ;*********************************
02622  252A              ; CHECK PASS
02623  252A              ;*********************************
02624  252A  AD 12 10    ASCCCC LDA PASS
02625  252D  CD 14 10           CMP EPASS       ;EXTERNAL
02626  2530  D0 0F              BNE ASCKK
02627  2532  AD E4 10    SKIPER LDA EAS
02628  2535  8D 22 10           STA SELECT
02629  2538  AD E5 10           LDA EAS+1
02630  253B  8D 23 10           STA SELECT+1
02631  253E  4C 96 25           JMP DATUT
02632  2541              ;*********************************
02633  2541              ; DISASSEMBLER LOOP FOR DATA
02634  2541              ;*********************************
02635  2541  AD 12 10    ASCKK  LDA PASS        ;GET PASS
02636  2544  CD 15 10           CMP CPASS       ;IS IT LAST
02637  2547  D0 0E              BNE ASCI1       ;NO PRINT
02638  2549  20 61 20           JSR COMENT      ;COMMENT LINE
02639  254C  AD 12 10    ASCII  LDA PASS        ;GET PASS
02640  254F  CD 15 10           CMP CPASS       ;IS IT LAST
02641  2552  D0 03              BNE ASCI1       ;NO PRINT
02642  2554  20 05 22           JSR PRTDAT      ;PRINT LINE
02643  2557  20 9C 25    ASCI1  JSR ACHECK      ;DIS ONE LINE
02644  255A  B0 29              BCS ASCIIQ      ;IF EA STOP
02645  255C              ;*********************************
02646  255C  20 E1 FF           JSR STOP
02647  255F  F0 24              BEQ ASCIIQ
02648  2561  20 E4 FF           JSR GETIN
02649  2564  F0 E6              BEQ ASCII
02650  2566  C9 20              CMP #' '






PDISASS64.ASM......PAGE 0052

LINE# LOC   CODE        LINE


02651  2568  D0 E2              BNE ASCII
02652  256A  AD 19 10           LDA DEVICE
02653  256D  48                 PHA
02654  256E  A9 03              LDA #$03
02655  2570  8D 19 10           STA DEVICE
02656  2573  A9 F8              LDA #<PMSG
02657  2575  A0 11              LDY #>PMSG
02658  2577  20 BB 1B           JSR STRPNT
02659  257A  68                 PLA
02660  257B  8D 19 10           STA DEVICE
02661  257E  20 E4 FF    PAUS1  JSR GETIN
02662  2581  F0 FB              BEQ PAUS1
02663  2583  D0 C7              BNE ASCII
02664  2585              ;*********************************
02665  2585  AD 12 10    ASCIIQ LDA PASS        ;GET PASS
02666  2588  CD 15 10           CMP CPASS       ;IS IT LAST
02667  258B  D0 09              BNE DATUT       ;EXIT
02668  258D  20 23 21           JSR INCSL
02669  2590  20 61 20           JSR COMENT      ;COMMENT LINE
02670  2593  20 42 21           JSR DECSL
02671  2596              ;*********************************
02672  2596              ; EXIT TO NEXTSL
02673  2596              ;*********************************
02674  2596  A9 FF       DATUT  LDA #$FF        ;SET N=1
02675  2598  60                 RTS             ;RETURN
02676  2599  A9 00       ENDDAT LDA #$00        ;SET N=0
02677  259B  60                 RTS             ;RETURN
02678  259C              ;*********************************
02679  259C              ; CHECK OPTIONS
02680  259C              ;*********************************
02681  259C  AD E6 10    ACHECK LDA TEXTER      ;GET DATA TYPE
02682  259F  C9 34              CMP #'4'         ;WORD-1
02683  25A1  F0 0B              BEQ AC0
02684  25A3  C9 33              CMP #'3'         ;DBYTE
02685  25A5  F0 0A              BEQ AC1
02686  25A7  C9 32              CMP #'2'         ;WORD
02687  25A9  F0 03              BEQ AC0
02688  25AB  4C B4 25           JMP BYTES       ;BYTE OR ASCII
02689  25AE  4C 70 26    AC0    JMP WORDS       ;WORD OR WORD-1
02690  25B1  4C 40 26    AC1    JMP DBYTES      ;DBYTES
02691  25B4              ;*********************************
02692  25B4              ; .BYTE DIRECTIVE
02693  25B4              ;*********************************
02694  25B4  AD 12 10    BYTES  LDA PASS        ;GET PASS
02695  25B7  CD 15 10           CMP CPASS       ;IS IT LAST
02696  25BA  D0 20              BNE BYTESX      ;IF NOT EXIT
02697  25BC  20 92 21           JSR PRTONE      ;PRINT BYTE
02698  25BF  20 8A 20           JSR PRAD        ;PRINT ADDRESS
02699  25C2  A0 27              LDY #>MBYTE     ;.BYTE
02700  25C4  A9 2C              LDA #<MBYTE     ;
02701  25C6  20 BB 1B           JSR STRPNT      ;PRINT IT
02702  25C9  AD E6 10           LDA TEXTER      ;GET TYPE
02703  25CC  C9 30              CMP #'0'          ;ASCII
02704  25CE  F0 0F              BEQ ALINE       ;ASCII BYTES
02705  25D0  20 D0 20           JSR DOLLAR      ;PRINT $






PDISASS64.ASM......PAGE 0053

LINE# LOC   CODE        LINE


02706  25D3  20 2C 21           JSR GETSL       ;GET BYTE
02707  25D6  20 A5 1B           JSR PRBYT       ;PRINT BYTE
02708  25D9  20 FE 1A           JSR NEWLIN      ;NEXT LINE
02709  25DC  4C 13 27    BYTESX JMP NEXTBY      ;NEXT BYTE
02710  25DF              ;*********************************
02711  25DF              ; ASCII TEXT
02712  25DF              ;*********************************
02713  25DF  A9 00       ALINE  LDA #$00        ;ZERO BYTE
02714  25E1  8D 51 10           STA TEMP        ;STORE IN COUNT
02715  25E4              ;*********************************
02716  25E4              ; CHECK FIRST BYTE OF LINE
02717  25E4              ;*********************************
02718  25E4  20 2C 21           JSR GETSL       ;GET BYTE
02719  25E7  20 34 26           JSR CASCII      ;CHECK FOR ASCII
02720  25EA  B0 39              BCS NASCII      ;IF NOT BRANCH
02721  25EC  A9 27              LDA #'''        ;PRINT ONE QUOTE
02722  25EE  20 11 1C           JSR PCHAR       ;PRINT IT
02723  25F1              ;*********************************
02724  25F1  20 2C 21    ALOP   JSR GETSL       ;GET BYTE
02725  25F4  20 34 26           JSR CASCII      ;IS IT ASCII
02726  25F7  B0 24              BCS EASCII      ;IF NOT END LINE
02727  25F9  20 11 1C           JSR PCHAR       ;PRINT ASCII
02728  25FC              ; REV 2-12-2018 START
02729  25FC              ; IF CHAR = ' THEN PRINT SECOND '
02730  25FC  20 2C 21           JSR GETSL       ; GET BYTE AGAIN
02731  25FF  C9 27              CMP #$27        ;'''
02732  2601  D0 03              BNE Q00000
02733  2603  20 11 1C           JSR PCHAR       ;PRINT ASCII
02734  2606              Q00000 = *
02735  2606              ; REV 2-12-2018 END
02736  2606  20 13 27           JSR NEXTBY      ;INC SELECT
02737  2609  B0 0D              BCS EASCI1      ;C=1 IF END
02738  260B  EE 51 10           INC TEMP        ;INC COUNT
02739  260E  AD 51 10           LDA TEMP        ;LOAD COUNT
02740  2611  C9 28              CMP #$28        ;40 CHAR
02741  2613  F0 08              BEQ EASCII      ;IF SO END
02742  2615  4C F1 25           JMP ALOP        ;NEXT
02743  2618              ;*********************************
02744  2618  20 1D 26    EASCI1 JSR EASCII
02745  261B  38                 SEC
02746  261C  60                 RTS
02747  261D              ;*********************************
02748  261D  A9 27       EASCII LDA #'''        ;PRINT ONE QUOTE
02749  261F  20 11 1C           JSR PCHAR       ;
02750  2622  4C FE 1A           JMP NEWLIN      ;PRINT CR
02751  2625              ;*********************************
02752  2625  20 D0 20    NASCII JSR DOLLAR      ;PRINT $
02753  2628  20 2C 21           JSR GETSL       ;GET BYTE
02754  262B  20 A5 1B           JSR PRBYT       ;PRINT IT
02755  262E  20 FE 1A           JSR NEWLIN      ;PRINT CR
02756  2631  4C 13 27           JMP NEXTBY      ;NEXT SL
02757  2634              ;*********************************
02758  2634              ; CHECK ACCUM FOR PRINTABLE ASCII
02759  2634              ;*********************************
02760  2634  C9 20       CASCII CMP #$20        ;< SPACE






PDISASS64.ASM......PAGE 0054

LINE# LOC   CODE        LINE


02761  2636  30 06              BMI NOASC       ;IF LESS NOASCII
02762  2638  C9 60              CMP #$60        ;> _
02763  263A  B0 02              BCS NOASC       ;IF GREATER NO
02764  263C  18                 CLC             ;CLEAR CARRY OK
02765  263D  60                 RTS             ;RETURN
02766  263E  38          NOASC  SEC             ;SET CARRY BAD
02767  263F  60                 RTS             ;RETURN
02768  2640              ;*********************************
02769  2640              ; .DBYTE DIRECTIVE
02770  2640              ;*********************************
02771  2640  AD 12 10    DBYTES LDA PASS        ;CHECK PASS
02772  2643  CD 15 10           CMP CPASS       ;LAST PASS
02773  2646  D0 25              BNE DBYTEX      ;EXIT
02774  2648  20 A8 21           JSR PRTTWO      ;PRINT 2 BYTES
02775  264B  20 8A 20           JSR PRAD        ;PRINT ADDRESS
02776  264E  A0 27              LDY #>MDBYTE    ;.DBYTE
02777  2650  A9 3C              LDA #<MDBYTE    ;
02778  2652  20 BB 1B           JSR STRPNT      ;PRINT IT
02779  2655  20 2C 21           JSR GETSL       ;GET BYTE
02780  2658  8D 46 10           STA WORKED+1    ;STORE
02781  265B  20 23 21           JSR INCSL       ;GET BYTE
02782  265E  20 2C 21           JSR GETSL       ;GET BYTE
02783  2661  8D 45 10           STA WORKED      ;STORE
02784  2664  20 D0 20           JSR DOLLAR      ;PRINT $
02785  2667  20 C2 20           JSR PWORKD      ;PRINT WORD
02786  266A  20 FE 1A           JSR NEWLIN      ;PRINT CR
02787  266D  4C 13 27    DBYTEX JMP NEXTBY      ;NEXT SL
02788  2670              ;*********************************
02789  2670              ; .WORD DIRECTIVE
02790  2670              ;*********************************
02791  2670  AD 12 10    WORDS  LDA PASS        ;GET PASS
02792  2673  CD 15 10           CMP CPASS         ;LAST
02793  2676  D0 0D              BNE WORD1       ;IF NOT BRANCH
02794  2678  20 A8 21           JSR PRTTWO      ;PRINT 2 BYTES
02795  267B  20 8A 20           JSR PRAD        ;PRINT ADDRESS
02796  267E  A0 27              LDY #>MWORD     ;.WORD
02797  2680  A9 34              LDA #<MWORD     ;
02798  2682  20 BB 1B           JSR STRPNT      ;PRINT IT
02799  2685              ;*********************************
02800  2685              ; GET WORD INTO WORKED
02801  2685              ;*********************************
02802  2685  20 2C 21    WORD1  JSR GETSL       ;GET BYTE
02803  2688  8D 45 10           STA WORKED      ;STORE BYTE
02804  268B  8D 36 10           STA SMALLP      ;STORE BYTE
02805  268E  20 23 21           JSR INCSL       ;GET BYTE
02806  2691  20 2C 21           JSR GETSL       ;GET BYTE
02807  2694  8D 46 10           STA WORKED+1    ;STORE BYTE
02808  2697  8D 37 10           STA SMALLP+1    ;STORE BYTE
02809  269A  AD E6 10           LDA TEXTER      ;GET OPTION
02810  269D  C9 34              CMP #'4'          ;.WORD ADRS-1
02811  269F  F0 2A              BEQ WORDM       ;BRANCH
02812  26A1              ;*********************************
02813  26A1              ; CHECK PASS
02814  26A1              ;*********************************
02815  26A1  AD 12 10           LDA PASS        ;CHECK PASS






PDISASS64.ASM......PAGE 0055

LINE# LOC   CODE        LINE


02816  26A4  CD 13 10           CMP IPASS       ;INTERNAL
02817  26A7  F0 16              BEQ WORDPT      ;TABLE WORD
02818  26A9  CD 14 10           CMP EPASS
02819  26AC  F0 17              BEQ WORDSY
02820  26AE              ;*********************************
02821  26AE              ; PRINT WORD
02822  26AE              ;*********************************
02823  26AE  20 5C 2B           JSR SYMOP       ;CHECK SYMBOL
02824  26B1  B0 5A              BCS WORDS3      ;C=1 SYMBOL
02825  26B3  20 D0 20           JSR DOLLAR      ;PRINT $
02826  26B6  20 C2 20           JSR PWORKD      ;PRINT WORD
02827  26B9  20 FE 1A           JSR NEWLIN      ;PRINT CR
02828  26BC  4C 13 27    WORDSX JMP NEXTBY      ;NEXT SL
02829  26BF  20 B3 22    WORDPT JSR PUTI        ;PUT IN TABLE
02830  26C2  4C 13 27           JMP NEXTBY      ;NEXT SL
02831  26C5  20 5C 2B    WORDSY JSR SYMOP
02832  26C8  4C 13 27           JMP NEXTBY
02833  26CB              ;*********************************
02834  26CB              ; .WORD ADDRESS-1
02835  26CB              ;*********************************
02836  26CB  18          WORDM  CLC
02837  26CC  AD 45 10           LDA WORKED
02838  26CF  69 01              ADC #$01
02839  26D1  8D 45 10           STA WORKED
02840  26D4  AD 46 10           LDA WORKED+1
02841  26D7  69 00              ADC #$00
02842  26D9  8D 46 10           STA WORKED+1
02843  26DC              ;*********************************
02844  26DC              ; CHECK PASS
02845  26DC              ;*********************************
02846  26DC  AD 12 10           LDA PASS        ;CHECK PASS
02847  26DF  CD 13 10           CMP IPASS       ;INTERNAL
02848  26E2  F0 DB              BEQ WORDPT      ;TABLE WORD
02849  26E4  CD 14 10           CMP EPASS       ;EXTERNAL
02850  26E7  F0 DC              BEQ WORDSY      ;TABLE WORD
02851  26E9              ;*********************************
02852  26E9              ; PRINT WORD
02853  26E9              ;*********************************
02854  26E9  20 5C 2B           JSR SYMOP       ;CHECK SYMBOL
02855  26EC  90 0D              BCC WORDS2      ;C=0 NO SYMBOL
02856  26EE  A9 2D              LDA #'-'
02857  26F0  20 11 1C           JSR PCHAR
02858  26F3  A9 31              LDA #'1'
02859  26F5  20 11 1C           JSR PCHAR
02860  26F8  4C 0D 27           JMP WORDS3
02861  26FB              ;*********************************
02862  26FB  20 D0 20    WORDS2 JSR DOLLAR      ;PRINT $
02863  26FE  AD 36 10           LDA SMALLP
02864  2701  8D 45 10           STA WORKED
02865  2704  AD 37 10           LDA SMALLP+1
02866  2707  8D 46 10           STA WORKED+1
02867  270A  20 C2 20           JSR PWORKD      ;PRINT WORD
02868  270D  20 FE 1A    WORDS3 JSR NEWLIN      ;PRINT CR
02869  2710  4C 13 27    WORDXX JMP NEXTBY      ;NEXT SL
02870  2713              ;*********************************






PDISASS64.ASM......PAGE 0056

LINE# LOC   CODE        LINE


02871  2713              ; SELECT NEXT BYTE OF DATA
02872  2713              ;*********************************
02873  2713  AD 23 10    NEXTBY LDA SELECT+1
02874  2716  CD E5 10           CMP EAS+1
02875  2719  90 0A              BCC SBLOK
02876  271B  D0 0D              BNE NOBINC
02877  271D  AD 22 10           LDA SELECT
02878  2720  CD E4 10           CMP EAS
02879  2723  B0 05              BCS NOBINC
02880  2725  20 23 21    SBLOK  JSR INCSL
02881  2728  18                 CLC
02882  2729  60                 RTS
02883  272A  38          NOBINC SEC
02884  272B  60                 RTS
02885  272C              ;*********************************
02886  272C  20 2E       MBYTE  .BYTE ' .BYTE ',0
02886  2733  00 
02887  2734  20 2E       MWORD  .BYTE ' .WORD ',0
02887  273B  00 
02888  273C  20 2E       MDBYTE .BYTE ' .DBYTE ',0
02888  2744  00 
02889  2745              ;*********************************
02890  2745              ;.FIL 0:TABLE.ASM
02891  2745              ;*********************************
02892  2745              ;.END
02893  2745              ;*********************************
02894  2745              ; FILE TABLE.ASM
02895  2745              ;*********************************
02896  2745              ;
02897  2745              ;        DISASSEMBLER64
02898  2745              ;    SYMBOLIC DISASSEMBLER
02899  2745              ;       BY DENTON MARLOWE
02900  2745              ;
02901  2745              ;  (C)1986 BY DENTON MARLOWE
02902  2745              ;
02903  2745              ;*********************************
02904  2745              ;       PRINT MNEMONIC
02905  2745              ;
02906  2745              ; OPCODE IN A
02907  2745              ;
02908  2745              ; BUG ILLEGAL OPCODE WOULD PRINT OUT AS
02909  2745              ;
02910  2745              ; ZZZZ XX                 ...  .BYTE $XX ;??? ILL
EGAL OPCODE
02911  2745              ; WHERE THE "..." WERE THREE NULLS
02912  2745              ; BECAUSE ILLEGAL OPCODE MNEMONIC IS CODES AS 0,0
,0
02913  2745              ;
02914  2745              ;*********************************
02915  2745  A2 03       MNEMON LDX #3          ;3 CHARACTERS
02916  2747  8E 51 10           STX TEMP        ;COUNTER
02917  274A  AA                 TAX             ;CODE IS INDEX
02918  274B  BD C0 28           LDA MCODES,X    ;GET OFFSET
02919  274E  AA                 TAX             ;INDEX OFFSET
02920  274F  BD E8 27    MNLOOP LDA MNAMES,X    ;GET CHARACTER
02921  2752              ;BEGIN REV 2017-0
02922  2752  F0 09              BEQ ILLOP       ;ILLEGAL OPCODE MNEMONIC C
HAR IS A NULL






PDISASS64.ASM......PAGE 0057

LINE# LOC   CODE        LINE


02923  2754              ;END REV 2017-0
02924  2754  8E 53 10           STX SAVX        ;SAVE INDEX
02925  2757  20 11 1C           JSR PCHAR       ;PRINT CHAR
02926  275A  AE 53 10           LDX SAVX        ;GET INDEX
02927  275D              ;BEGIN REV 2017-1
02928  275D              ILLOP  = *
02929  275D              ;END REV 2017-0
02930  275D  E8                 INX             ;NEXT CHAR
02931  275E  CE 51 10           DEC TEMP        ;DEC COUNT
02932  2761  D0 EC              BNE MNLOOP      ;LOOP TILL 0
02933  2763  60                 RTS             ;RETURN
02934  2764              ;*********************************
02935  2764              ;        PRINT OPERAND
02936  2764              ;*********************************
02937  2764  48          PRTASS PHA             ;STACK INDEX
02938  2765  20 05 22           JSR PRTDAT      ;PRINT LINE DATA
02939  2768  68                 PLA             ;PULL INDEX
02940  2769  A8                 TAY             ;SAVE INDEX
02941  276A  A9 94              LDA #<SUBP
02942  276C  A2 27              LDX #>SUBP
02943  276E  4C 7E 27           JMP GETOPE      ;LOOK UP ROUTINE
02944  2771              ;*********************************
02945  2771  A8          OPERN1 TAY             ;SAVE INDEX
02946  2772  A9 B0              LDA #<SUBS1
02947  2774  A2 27              LDX #>SUBS1
02948  2776  4C 7E 27           JMP GETOPE      ;LOOK UP ROUTINE
02949  2779              ;*********************************
02950  2779  A8          OPERND TAY             ;SAVE INDEX
02951  277A  A9 CC              LDA #<SUBS
02952  277C  A2 27              LDX #>SUBS
02953  277E              ;*********************************
02954  277E              ; LOOK UP AND JMP TO ROUTINE
02955  277E              ;*********************************
02956  277E  85 DD       GETOPE STA ZEROUR      ;LOW TABLE
02957  2780  86 DE              STX ZEROUR+1    ;HIGH TABLE
02958  2782  B9 C0 29           LDA MODES,Y     ;GET OFFSET
02959  2785  A8                 TAY             ;INDEX OFFSET
02960  2786  B1 DD              LDA (ZEROUR),Y  ;GET LOW BYTE
02961  2788  8D 4F 10           STA ADRS        ;STORE
02962  278B  C8                 INY             ;INC INDEX
02963  278C  B1 DD              LDA (ZEROUR),Y  ;GET HIGH BYTE
02964  278E  8D 50 10           STA ADRS+1      ;STORE
02965  2791  6C 4F 10           JMP (ADRS)      ;INDIRECT JMP
02966  2794              ;*********************************
02967  2794              ; TABLE OF ADDRESSING MODE SUBS
02968  2794              ;*********************************
02969  2794              ; MACHINE LANGUAGE ROUTINES
02970  2794              ;*********************************
02971  2794              SUBP   = *             ; MODES
02972  2794  92 21       .WORD  PRTONE          ; 0  $00
02973  2796  92 21       .WORD  PRTONE          ; 2  $02
02974  2798  A8 21       .WORD  PRTTWO          ; 4  $04
02975  279A  A8 21       .WORD  PRTTWO          ; 6  $06
02976  279C  A8 21       .WORD  PRTTWO          ; 8  $08
02977  279E  A8 21       .WORD  PRTTWO          ; 10 $0A






PDISASS64.ASM......PAGE 0058

LINE# LOC   CODE        LINE


02978  27A0  CD 21       .WORD  PRTTHE          ; 12 $0C
02979  27A2  CD 21       .WORD  PRTTHE          ; 14 $0E
02980  27A4  CD 21       .WORD  PRTTHE          ; 16 $10
02981  27A6  92 21       .WORD  PRTONE          ; 18 $12
02982  27A8  A8 21       .WORD  PRTTWO          ; 20 $14
02983  27AA  A8 21       .WORD  PRTTWO          ; 22 $16
02984  27AC  A8 21       .WORD  PRTTWO          ; 24 $18
02985  27AE  CD 21       .WORD  PRTTHE          ; 26 $1A
02986  27B0              ;*********************************
02987  27B0              ; CODE ANALYSIS ROUTINES
02988  27B0              ;*********************************
02989  27B0              SUBS1  = *             ; MODES
02990  27B0  89 1F       .WORD  IMPONE          ; 0  $00
02991  27B2  89 1F       .WORD  IMPONE          ; 2  $02
02992  27B4  04 1F       .WORD  IMMEDT          ; 4  $04
02993  27B6  4D 1E       .WORD  ONEBYT          ; 6  $06
02994  27B8  4D 1E       .WORD  ONEBYT          ; 8  $08
02995  27BA  4D 1E       .WORD  ONEBYT          ; 10 $0A
02996  27BC  82 1E       .WORD  TWOBYT          ; 12 $0C
02997  27BE  82 1E       .WORD  TWOBYT          ; 14 $0E
02998  27C0  82 1E       .WORD  TWOBYT          ; 16 $10
02999  27C2  89 1F       .WORD  IMPONE          ; 18 $12
03000  27C4  C0 1F       .WORD  RELATV          ; 20 $14
03001  27C6  4D 1E       .WORD  ONEBYT          ; 22 $16
03002  27C8  4D 1E       .WORD  ONEBYT          ; 24 $18
03003  27CA  82 1E       .WORD  TWOBYT          ; 26 $1A
03004  27CC              ;*********************************
03005  27CC              ; FINAL PASS ADDRESSING MODES
03006  27CC              ;*********************************
03007  27CC              SUBS   = *             ; MODES
03008  27CC  BE 1E       .WORD  ILLEGL          ; 0  $00
03009  27CE  FF 1E       .WORD  ACC             ; 2  $02
03010  27D0  04 1F       .WORD  IMMEDT          ; 4  $04
03011  27D2  3B 1F       .WORD  ZEROPG          ; 6  $06
03012  27D4  3E 1F       .WORD  ZEROX           ; 8  $08
03013  27D6  44 1F       .WORD  ZEROY           ; 10 $0A
03014  27D8  4B 1F       .WORD  ABSLUT          ; 12 $0C
03015  27DA  70 1F       .WORD  ABSX            ; 14 $0E
03016  27DC  76 1F       .WORD  ABSY            ; 16 $10
03017  27DE  7C 1F       .WORD  IMPLID          ; 18 $12
03018  27E0  C0 1F       .WORD  RELATV          ; 20 $14
03019  27E2  AB 1F       .WORD  INDX            ; 22 $16
03020  27E4  B4 1F       .WORD  INDY            ; 24 $18
03021  27E6  96 1F       .WORD  INDRCT          ; 26 $1A
03022  27E8              ;*********************************
03023  27E8              ; LIST OF MNEMONICS
03024  27E8              ;*********************************
03025  27E8              MNAMES = *             ; MCODES
03026  27E8  00          .BYTE  0,0,0           ; 0   $00
03026  27E9  00 
03026  27EA  00 
03027  27EB  41 44 43    .BYTE  'ADC'           ; 3   $03
03028  27EE  41 4E 44    .BYTE  'AND'           ; 6   $06
03029  27F1  41 53 4C    .BYTE  'ASL'           ; 9   $09
03030  27F4  42 43 43    .BYTE  'BCC'           ; 12  $0C






PDISASS64.ASM......PAGE 0059

LINE# LOC   CODE        LINE


03031  27F7  42 43 53    .BYTE  'BCS'           ; 15  $0F
03032  27FA  42 45 51    .BYTE  'BEQ'           ; 18  $12
03033  27FD  42 49 54    .BYTE  'BIT'           ; 21  $15
03034  2800  42 4D 49    .BYTE  'BMI'           ; 24  $18
03035  2803  42 4E 45    .BYTE  'BNE'           ; 27  $1B
03036  2806  42 50 4C    .BYTE  'BPL'           ; 30  $1E
03037  2809  42 52 4B    .BYTE  'BRK'           ; 33  $21
03038  280C  42 56 43    .BYTE  'BVC'           ; 36  $24
03039  280F  42 56 53    .BYTE  'BVS'           ; 39  $27
03040  2812  43 4C 43    .BYTE  'CLC'           ; 42  $2A
03041  2815  43 4C 44    .BYTE  'CLD'           ; 45  $2D
03042  2818  43 4C 49    .BYTE  'CLI'           ; 48  $30
03043  281B  43 4C 56    .BYTE  'CLV'           ; 51  $33
03044  281E  43 4D 50    .BYTE  'CMP'           ; 54  $36
03045  2821  43 50 58    .BYTE  'CPX'           ; 57  $39
03046  2824  43 50 59    .BYTE  'CPY'           ; 60  $3C
03047  2827  44 45 43    .BYTE  'DEC'           ; 63  $3F
03048  282A  44 45 58    .BYTE  'DEX'           ; 66  $42
03049  282D  44 45 59    .BYTE  'DEY'           ; 69  $45
03050  2830  45 4F 52    .BYTE  'EOR'           ; 72  $48
03051  2833  49 4E 43    .BYTE  'INC'           ; 75  $4B
03052  2836  49 4E 58    .BYTE  'INX'           ; 78  $4E
03053  2839  49 4E 59    .BYTE  'INY'           ; 81  $51
03054  283C  4A 4D 50    .BYTE  'JMP'           ; 84  $54
03055  283F  4A 53 52    .BYTE  'JSR'           ; 87  $57
03056  2842  4C 44 41    .BYTE  'LDA'           ; 90  $5A
03057  2845  4C 44 58    .BYTE  'LDX'           ; 93  $5D
03058  2848  4C 44 59    .BYTE  'LDY'           ; 96  $60
03059  284B  4C 53 52    .BYTE  'LSR'           ; 99  $63
03060  284E  4E 4F 50    .BYTE  'NOP'           ; 102 $66
03061  2851  4F 52 41    .BYTE  'ORA'           ; 105 $69
03062  2854  50 48 41    .BYTE  'PHA'           ; 108 $6C
03063  2857  50 48 50    .BYTE  'PHP'           ; 111 $6F
03064  285A  50 4C 41    .BYTE  'PLA'           ; 114 $72
03065  285D  50 4C 50    .BYTE  'PLP'           ; 117 $75
03066  2860  52 4F 4C    .BYTE  'ROL'           ; 120 $78
03067  2863  52 4F 52    .BYTE  'ROR'           ; 123 $7B
03068  2866  52 54 49    .BYTE  'RTI'           ; 126 $7E
03069  2869  52 54 53    .BYTE  'RTS'           ; 129 $81
03070  286C  53 42 43    .BYTE  'SBC'           ; 132 $84
03071  286F  53 45 43    .BYTE  'SEC'           ; 135 $87
03072  2872  53 45 44    .BYTE  'SED'           ; 138 $8A
03073  2875  53 45 49    .BYTE  'SEI'           ; 141 $8D
03074  2878  53 54 41    .BYTE  'STA'           ; 144 $90
03075  287B  53 54 58    .BYTE  'STX'           ; 147 $93
03076  287E  53 54 59    .BYTE  'STY'           ; 150 $96
03077  2881  54 41 58    .BYTE  'TAX'           ; 153 $99
03078  2884  54 41 59    .BYTE  'TAY'           ; 156 $9C
03079  2887  54 53 58    .BYTE  'TSX'           ; 159 $9F
03080  288A  54 58 41    .BYTE  'TXA'           ; 162 $A2
03081  288D  54 58 53    .BYTE  'TXS'           ; 165 $A5
03082  2890  54 59 41    .BYTE  'TYA'           ; 168 $A8
03083  2893              ;*********************************
03084  2893              ; QUASI-OPCODES
03085  2893              ;*********************************






PDISASS64.ASM......PAGE 0060

LINE# LOC   CODE        LINE


03086  2893  41 53 4F    .BYTE  'ASO'           ; 171 $AB
03087  2896  52 4C 41    .BYTE  'RLA'           ; 174 $AE
03088  2899  4C 53 45    .BYTE  'LSE'           ; 177 $B1
03089  289C  52 52 41    .BYTE  'RRA'           ; 180 $B4
03090  289F  41 58 53    .BYTE  'AXS'           ; 183 $B7
03091  28A2  4C 41 58    .BYTE  'LAX'           ; 186 $BA
03092  28A5  44 43 4D    .BYTE  'DCM'           ; 189 $BD
03093  28A8  49 4E 53    .BYTE  'INS'           ; 192 $C0
03094  28AB  41 4C 52    .BYTE  'ALR'           ; 195 $C3
03095  28AE  41 52 52    .BYTE  'ARR'           ; 198 $C6
03096  28B1  4F 41 4C    .BYTE  'OAL'           ; 201 $C9
03097  28B4  53 41 58    .BYTE  'SAX'           ; 204 $CC
03098  28B7  4E 4F 50    .BYTE  'NOP'           ; 207 $CF
03099  28BA  53 4B 42    .BYTE  'SKB'           ; 210 $D2
03100  28BD  53 4B 57    .BYTE  'SKW'           ; 213 $D5
03101  28C0              ;*********************************
03102  28C0              ; TABLE OF MNEMONIC CODES
03103  28C0              ;*********************************
03104  28C0              ;
03105  28C0              ;A MNEMONIC'S CODE IS ITS OFFSET
03106  28C0              ;    INTO MNAMES, THE LIST OF
03107  28C0              ;         MNEONIC NAMES.
03108  28C0              ;
03109  28C0              ;*********************************
03110  28C0              MCODES = *
03111  28C0              ;     0X  1X  2X  3X  4X  5X  6X  7X
03112  28C0              ; 0X  BRK ORA KIL SLO NOP ORA ASL SLO
03113  28C0  21          .BYTE  $21,$69,$00,$00,$00,$69,$09,$00
03113  28C1  69 
03113  28C2  00 
03113  28C3  00 
03113  28C4  00 
03113  28C5  69 
03113  28C6  09 
03113  28C7  00 
03114  28C8              ;     8X  9X  AX  BX  CX  DX  EX  FX
03115  28C8                                     ;PHP ORA ASL ANC NOP ORA A
SL SLO
03116  28C8  6F          .BYTE  $6F,$69,$09,$00,$00,$69,$09,$00
03116  28C9  69 
03116  28CA  09 
03116  28CB  00 
03116  28CC  00 
03116  28CD  69 
03116  28CE  09 
03116  28CF  00 
03117  28D0              ; 1X  BPL ORA KIL SLO NOP ORA ASL SLO
03118  28D0  1E          .BYTE  $1E,$69,$00,$00,$00,$69,$09,$00
03118  28D1  69 
03118  28D2  00 
03118  28D3  00 
03118  28D4  00 
03118  28D5  69 
03118  28D6  09 
03118  28D7  00 
03119  28D8                                     ;CLC ORA NOP SLO NOP ORA A
SL SLO






PDISASS64.ASM......PAGE 0061

LINE# LOC   CODE        LINE


03120  28D8  2A          .BYTE  $2A,$69,$00,$00,$00,$69,$09,$00
03120  28D9  69 
03120  28DA  00 
03120  28DB  00 
03120  28DC  00 
03120  28DD  69 
03120  28DE  09 
03120  28DF  00 
03121  28E0              ; 2X  JSR AND KIL RLA BIT AND ROL RLA
03122  28E0  57          .BYTE  $57,$06,$00,$00,$15,$06,$78,$00
03122  28E1  06 
03122  28E2  00 
03122  28E3  00 
03122  28E4  15 
03122  28E5  06 
03122  28E6  78 
03122  28E7  00 
03123  28E8                                     ;PLP ABD ROL ANC BIT AND R
OL RLA
03124  28E8  75          .BYTE  $75,$06,$78,$00,$15,$06,$78,$00
03124  28E9  06 
03124  28EA  78 
03124  28EB  00 
03124  28EC  15 
03124  28ED  06 
03124  28EE  78 
03124  28EF  00 
03125  28F0              ; 3X  BMI AND KIL RLA NOP AND ROL RLA
03126  28F0  18          .BYTE  $18,$06,$00,$00,$00,$06,$78,$00
03126  28F1  06 
03126  28F2  00 
03126  28F3  00 
03126  28F4  00 
03126  28F5  06 
03126  28F6  78 
03126  28F7  00 
03127  28F8              ;     SEC AND NOP RLA NOP AND ROL RLA
03128  28F8  87          .BYTE  $87,$06,$00,$00,$00,$06,$78,$00
03128  28F9  06 
03128  28FA  00 
03128  28FB  00 
03128  28FC  00 
03128  28FD  06 
03128  28FE  78 
03128  28FF  00 
03129  2900              ; 4X  RTI EOR KIL SRE NOP EOR LSR SRE
03130  2900  7E          .BYTE  $7E,$48,$00,$00,$00,$48,$63,$00
03130  2901  48 
03130  2902  00 
03130  2903  00 
03130  2904  00 
03130  2905  48 
03130  2906  63 
03130  2907  00 
03131  2908              ;     PHA EOR LSR ALR JMP EOR LSR SRE
03132  2908  6C          .BYTE  $6C,$48,$63,$00,$54,$48,$63,$00






PDISASS64.ASM......PAGE 0062

LINE# LOC   CODE        LINE


03132  2909  48 
03132  290A  63 
03132  290B  00 
03132  290C  54 
03132  290D  48 
03132  290E  63 
03132  290F  00 
03133  2910              ; 5X  BVC EOR KIL SRE NOP EOR LSR SRE
03134  2910  24          .BYTE  $24,$48,$00,$00,$00,$48,$63,$00
03134  2911  48 
03134  2912  00 
03134  2913  00 
03134  2914  00 
03134  2915  48 
03134  2916  63 
03134  2917  00 
03135  2918              ;     CLI EOR NOP SRE NOP EOR LSR SRE
03136  2918  30          .BYTE  $30,$48,$00,$00,$00,$48,$63,$00
03136  2919  48 
03136  291A  00 
03136  291B  00 
03136  291C  00 
03136  291D  48 
03136  291E  63 
03136  291F  00 
03137  2920              ; 6X  RTS ADC KIL RRA NOP ADC ROR RRA
03138  2920  81          .BYTE  $81,$03,$00,$00,$00,$03,$7B,$00
03138  2921  03 
03138  2922  00 
03138  2923  00 
03138  2924  00 
03138  2925  03 
03138  2926  7B 
03138  2927  00 
03139  2928              ;     PLA ADC ROR ARR JMP ADC ROR RRA
03140  2928  72          .BYTE  $72,$03,$7B,$00,$54,$03,$7B,$00
03140  2929  03 
03140  292A  7B 
03140  292B  00 
03140  292C  54 
03140  292D  03 
03140  292E  7B 
03140  292F  00 
03141  2930              ; 7X  BVS ADC KIL RRA NOP ADC ROR RRA
03142  2930  27          .BYTE  $27,$03,$00,$00,$00,$03,$7B,$00
03142  2931  03 
03142  2932  00 
03142  2933  00 
03142  2934  00 
03142  2935  03 
03142  2936  7B 
03142  2937  00 
03143  2938              ;     SEI ADC NOP RRA NOP ADC ROR RRA
03144  2938  8D          .BYTE  $8D,$03,$00,$00,$00,$03,$7B,$00
03144  2939  03 






PDISASS64.ASM......PAGE 0063

LINE# LOC   CODE        LINE


03144  293A  00 
03144  293B  00 
03144  293C  00 
03144  293D  03 
03144  293E  7B 
03144  293F  00 
03145  2940              ; 8X  NOP STA NOP SAX STY STA STX SAX
03146  2940  00          .BYTE  $00,$90,$00,$00,$96,$90,$93,$00
03146  2941  90 
03146  2942  00 
03146  2943  00 
03146  2944  96 
03146  2945  90 
03146  2946  93 
03146  2947  00 
03147  2948              ;     DEY NOP TXA XXA STY STA STX SAX
03148  2948  45          .BYTE  $45,$00,$A2,$00,$96,$90,$93,$00
03148  2949  00 
03148  294A  A2 
03148  294B  00 
03148  294C  96 
03148  294D  90 
03148  294E  93 
03148  294F  00 
03149  2950              ; 9X  BCC STA KIL AHX STY STA STX SAX 
03150  2950  0C          .BYTE  $0C,$90,$00,$00,$96,$90,$93,$00
03150  2951  90 
03150  2952  00 
03150  2953  00 
03150  2954  96 
03150  2955  90 
03150  2956  93 
03150  2957  00 
03151  2958              ;     TYA STA TXS TAS SHY STA SHX AHX
03152  2958  A8          .BYTE  $A8,$90,$A5,$00,$00,$90,$00,$00
03152  2959  90 
03152  295A  A5 
03152  295B  00 
03152  295C  00 
03152  295D  90 
03152  295E  00 
03152  295F  00 
03153  2960              ; AX  LDY LDA LDX LAX LDY LDA LDX LAX
03154  2960  60          .BYTE  $60,$5A,$5D,$00,$60,$5A,$5D,$00
03154  2961  5A 
03154  2962  5D 
03154  2963  00 
03154  2964  60 
03154  2965  5A 
03154  2966  5D 
03154  2967  00 
03155  2968              ;     TAY LDA TAX LAX LDY LDA LDX LAX
03156  2968  9C          .BYTE  $9C,$5A,$99,$00,$60,$5A,$5D,$00
03156  2969  5A 
03156  296A  99 






PDISASS64.ASM......PAGE 0064

LINE# LOC   CODE        LINE


03156  296B  00 
03156  296C  60 
03156  296D  5A 
03156  296E  5D 
03156  296F  00 
03157  2970              ; BX  BCS LDA KIL LAX LDY LDA LDX LAX
03158  2970  0F          .BYTE  $0F,$5A,$00,$00,$60,$5A,$5D,$00
03158  2971  5A 
03158  2972  00 
03158  2973  00 
03158  2974  60 
03158  2975  5A 
03158  2976  5D 
03158  2977  00 
03159  2978              ;     CLV LDA TSX LAS LDY LDA LDX LAX
03160  2978  33          .BYTE  $33,$5A,$9F,$00,$60,$5A,$5D,$00
03160  2979  5A 
03160  297A  9F 
03160  297B  00 
03160  297C  60 
03160  297D  5A 
03160  297E  5D 
03160  297F  00 
03161  2980              ; CX  CPY CMP NOP DCP CPY CMP DEC DCP
03162  2980  3C          .BYTE  $3C,$36,$00,$00,$3C,$36,$3F,$00
03162  2981  36 
03162  2982  00 
03162  2983  00 
03162  2984  3C 
03162  2985  36 
03162  2986  3F 
03162  2987  00 
03163  2988              ;     INY CMP DEX AXS CPY CMP DEC DCP
03164  2988  51          .BYTE  $51,$36,$42,$00,$3C,$36,$3F,$00
03164  2989  36 
03164  298A  42 
03164  298B  00 
03164  298C  3C 
03164  298D  36 
03164  298E  3F 
03164  298F  00 
03165  2990              ; DX  BNE CMP KIL DCP NOP CMP DEC DCP
03166  2990  1B          .BYTE  $1B,$36,$00,$00,$00,$36,$3F,$00
03166  2991  36 
03166  2992  00 
03166  2993  00 
03166  2994  00 
03166  2995  36 
03166  2996  3F 
03166  2997  00 
03167  2998              ;     CLD CMP NOP DCP NOP CMP DEC DCP
03168  2998  2D          .BYTE  $2D,$36,$00,$00,$00,$36,$3F,$00
03168  2999  36 
03168  299A  00 
03168  299B  00 






PDISASS64.ASM......PAGE 0065

LINE# LOC   CODE        LINE


03168  299C  00 
03168  299D  36 
03168  299E  3F 
03168  299F  00 
03169  29A0              ; EX  CPX SBC NOP ISC CPX SBC INC ISC
03170  29A0  39          .BYTE  $39,$84,$00,$00,$39,$84,$4B,$00
03170  29A1  84 
03170  29A2  00 
03170  29A3  00 
03170  29A4  39 
03170  29A5  84 
03170  29A6  4B 
03170  29A7  00 
03171  29A8              ;     INX SBC NOP SBC CPX SBC INC ISC
03172  29A8  4E          .BYTE  $4E,$84,$66,$00,$39,$84,$4B,$00
03172  29A9  84 
03172  29AA  66 
03172  29AB  00 
03172  29AC  39 
03172  29AD  84 
03172  29AE  4B 
03172  29AF  00 
03173  29B0              ; FX  BEQ SBC KIL ISC NOP SBC INC ISC
03174  29B0  12          .BYTE  $12,$84,$00,$00,$00,$84,$4B,$00
03174  29B1  84 
03174  29B2  00 
03174  29B3  00 
03174  29B4  00 
03174  29B5  84 
03174  29B6  4B 
03174  29B7  00 
03175  29B8              ;     SED SBC NOP ISC NOP SBC INC ISC
03176  29B8  8A          .BYTE  $8A,$84,$00,$00,$00,$84,$4B,$00
03176  29B9  84 
03176  29BA  00 
03176  29BB  00 
03176  29BC  00 
03176  29BD  84 
03176  29BE  4B 
03176  29BF  00 
03177  29C0              ;*********************************
03178  29C0              ; TABLE OF ADDRESSING MODE CODES
03179  29C0              ;*********************************
03180  29C0              ;
03181  29C0              ; AN ADDRESSING MODE'S CODE IS
03182  29C0              ; ITS OFFSET INTO SUBS, THE TABLE
03183  29C0              ; OF ADDRESSING MODE SUBROUTINES
03184  29C0              ;
03185  29C0              ; ILLEGL ; 0  $00
03186  29C0              ; ACC    ; 2  $02
03187  29C0              ; IMMEDT ; 4  $04
03188  29C0              ; ZEROPG ; 6  $06
03189  29C0              ; ZEROX  ; 8  $08
03190  29C0              ; ZEROY  ; 10 $0A
03191  29C0              ; ABSLUT ; 12 $0C






PDISASS64.ASM......PAGE 0066

LINE# LOC   CODE        LINE


03192  29C0              ; ABSX   ; 14 $0E
03193  29C0              ; ABSY   ; 16 $10
03194  29C0              ; IMPLID ; 18 $12
03195  29C0              ; RELATV ; 20 $14
03196  29C0              ; INDX   ; 22 $16
03197  29C0              ; INDY   ; 24 $18
03198  29C0              ; INDRCT ; 26 $1A
03199  29C0              ;*********************************
03200  29C0              MODES  = * 
03201  29C0              ; 0X   0  1 2 3 4 5 6 7
03202  29C0  12          .BYTE  18,22,0,0,0,6,6,0
03202  29C1  16 
03202  29C2  00 
03202  29C3  00 
03202  29C4  00 
03202  29C5  06 
03202  29C6  06 
03202  29C7  00 
03203  29C8              ;      8  9 A B C D E F
03204  29C8  12          .BYTE  18,4,2,0,0,12,12,0
03204  29C9  04 
03204  29CA  02 
03204  29CB  00 
03204  29CC  00 
03204  29CD  0C 
03204  29CE  0C 
03204  29CF  00 
03205  29D0              ; 1X   0  1 2 3 4 5 6 7
03206  29D0  14          .BYTE  20,24,0,0,0,8,8,0
03206  29D1  18 
03206  29D2  00 
03206  29D3  00 
03206  29D4  00 
03206  29D5  08 
03206  29D6  08 
03206  29D7  00 
03207  29D8              ;      8  9 A B C D E F
03208  29D8  12          .BYTE  18,16,0,0,0,14,14,0
03208  29D9  10 
03208  29DA  00 
03208  29DB  00 
03208  29DC  00 
03208  29DD  0E 
03208  29DE  0E 
03208  29DF  00 
03209  29E0              ; 2X   0  1 2 3 4 5 6 7
03210  29E0  0C          .BYTE  12,22,0,0,6,6,6,0
03210  29E1  16 
03210  29E2  00 
03210  29E3  00 
03210  29E4  06 
03210  29E5  06 
03210  29E6  06 
03210  29E7  00 
03211  29E8              ;.BYTE 12,22,0,0,28,6,6,0






PDISASS64.ASM......PAGE 0067

LINE# LOC   CODE        LINE


03212  29E8              ;      8  9 A B C D E F
03213  29E8  12          .BYTE  18,4,2,0,12,12,12,0
03213  29E9  04 
03213  29EA  02 
03213  29EB  00 
03213  29EC  0C 
03213  29ED  0C 
03213  29EE  0C 
03213  29EF  00 
03214  29F0              ;.BYTE 18,4,2,0,30,12,12,0
03215  29F0              ; 3X   0  1 2 3 4 5 6 7
03216  29F0  14          .BYTE  20,24,0,0,0,8,8,0
03216  29F1  18 
03216  29F2  00 
03216  29F3  00 
03216  29F4  00 
03216  29F5  08 
03216  29F6  08 
03216  29F7  00 
03217  29F8              ;      8  9 A B C D E F
03218  29F8  12          .BYTE  18,16,0,0,0,14,14,0
03218  29F9  10 
03218  29FA  00 
03218  29FB  00 
03218  29FC  00 
03218  29FD  0E 
03218  29FE  0E 
03218  29FF  00 
03219  2A00              ; 4X   0  1 2 3 4 5 6 7
03220  2A00  12          .BYTE  18,22,0,0,0,6,6,0
03220  2A01  16 
03220  2A02  00 
03220  2A03  00 
03220  2A04  00 
03220  2A05  06 
03220  2A06  06 
03220  2A07  00 
03221  2A08              ;      8  9 A B C D E F
03222  2A08  12          .BYTE  18,4,2,0,12,12,12,0
03222  2A09  04 
03222  2A0A  02 
03222  2A0B  00 
03222  2A0C  0C 
03222  2A0D  0C 
03222  2A0E  0C 
03222  2A0F  00 
03223  2A10              ; 5X   0  1 2 3 4 5 6 7
03224  2A10  14          .BYTE  20,24,0,0,0,8,8,0
03224  2A11  18 
03224  2A12  00 
03224  2A13  00 
03224  2A14  00 
03224  2A15  08 
03224  2A16  08 
03224  2A17  00 






PDISASS64.ASM......PAGE 0068

LINE# LOC   CODE        LINE


03225  2A18              ;      8  9 A B C D E F
03226  2A18  12          .BYTE  18,16,0,0,0,14,14,0
03226  2A19  10 
03226  2A1A  00 
03226  2A1B  00 
03226  2A1C  00 
03226  2A1D  0E 
03226  2A1E  0E 
03226  2A1F  00 
03227  2A20              ; 6X   0  1 2 3 4 5 6 7
03228  2A20  12          .BYTE  18,22,0,0,0,6,6,0
03228  2A21  16 
03228  2A22  00 
03228  2A23  00 
03228  2A24  00 
03228  2A25  06 
03228  2A26  06 
03228  2A27  00 
03229  2A28              ;      8  9 A B C D E F
03230  2A28  12          .BYTE  18,4,2,0,26,12,12,0
03230  2A29  04 
03230  2A2A  02 
03230  2A2B  00 
03230  2A2C  1A 
03230  2A2D  0C 
03230  2A2E  0C 
03230  2A2F  00 
03231  2A30              ; 7X   0  1 2 3 4 5 6 7
03232  2A30  14          .BYTE  20,24,0,0,0,8,8,0
03232  2A31  18 
03232  2A32  00 
03232  2A33  00 
03232  2A34  00 
03232  2A35  08 
03232  2A36  08 
03232  2A37  00 
03233  2A38              ;      8  9 A B C D E F
03234  2A38  12          .BYTE  18,16,0,0,0,14,14,0
03234  2A39  10 
03234  2A3A  00 
03234  2A3B  00 
03234  2A3C  00 
03234  2A3D  0E 
03234  2A3E  0E 
03234  2A3F  00 
03235  2A40              ; 8X   0  1 2 3 4 5 6 7
03236  2A40  00          .BYTE  0,22,0,0,6,6,6,0
03236  2A41  16 
03236  2A42  00 
03236  2A43  00 
03236  2A44  06 
03236  2A45  06 
03236  2A46  06 
03236  2A47  00 
03237  2A48              ;      8  9 A B C D E F






PDISASS64.ASM......PAGE 0069

LINE# LOC   CODE        LINE


03238  2A48  12          .BYTE  18,0,18,0,12,12,12,0
03238  2A49  00 
03238  2A4A  12 
03238  2A4B  00 
03238  2A4C  0C 
03238  2A4D  0C 
03238  2A4E  0C 
03238  2A4F  00 
03239  2A50              ; 9X   0  1 2 3 4 5 6 7
03240  2A50  14          .BYTE  20,24,0,0,8,8,10,0
03240  2A51  18 
03240  2A52  00 
03240  2A53  00 
03240  2A54  08 
03240  2A55  08 
03240  2A56  0A 
03240  2A57  00 
03241  2A58              ;      8  9 A B C D E F
03242  2A58  12          .BYTE  18,16,18,0,0,14,0,0
03242  2A59  10 
03242  2A5A  12 
03242  2A5B  00 
03242  2A5C  00 
03242  2A5D  0E 
03242  2A5E  00 
03242  2A5F  00 
03243  2A60              ; AX   0  1 2 3 4 5 6 7
03244  2A60  04          .BYTE  4,22,4,0,6,6,6,0
03244  2A61  16 
03244  2A62  04 
03244  2A63  00 
03244  2A64  06 
03244  2A65  06 
03244  2A66  06 
03244  2A67  00 
03245  2A68              ;      8  9 A B C D E F
03246  2A68  12          .BYTE  18,4,18,0,12,12,12,0
03246  2A69  04 
03246  2A6A  12 
03246  2A6B  00 
03246  2A6C  0C 
03246  2A6D  0C 
03246  2A6E  0C 
03246  2A6F  00 
03247  2A70              ; BX   0  1 2 3 4 5 6 7
03248  2A70  14          .BYTE  20,24,0,0,8,8,10,0
03248  2A71  18 
03248  2A72  00 
03248  2A73  00 
03248  2A74  08 
03248  2A75  08 
03248  2A76  0A 
03248  2A77  00 
03249  2A78              ;      8  9 A B C D E F
03250  2A78  12          .BYTE  18,16,18,0,14,14,16,0






PDISASS64.ASM......PAGE 0070

LINE# LOC   CODE        LINE


03250  2A79  10 
03250  2A7A  12 
03250  2A7B  00 
03250  2A7C  0E 
03250  2A7D  0E 
03250  2A7E  10 
03250  2A7F  00 
03251  2A80              ; CX   0  1 2 3 4 5 6 7
03252  2A80  04          .BYTE  4,22,0,0,6,6,6,0
03252  2A81  16 
03252  2A82  00 
03252  2A83  00 
03252  2A84  06 
03252  2A85  06 
03252  2A86  06 
03252  2A87  00 
03253  2A88              ;      8  9 A B C D E F
03254  2A88  12          .BYTE  18,4,18,0,12,12,12,0
03254  2A89  04 
03254  2A8A  12 
03254  2A8B  00 
03254  2A8C  0C 
03254  2A8D  0C 
03254  2A8E  0C 
03254  2A8F  00 
03255  2A90              ; DX   0  1 2 3 4 5 6 7
03256  2A90  14          .BYTE  20,24,0,0,0,8,8,0
03256  2A91  18 
03256  2A92  00 
03256  2A93  00 
03256  2A94  00 
03256  2A95  08 
03256  2A96  08 
03256  2A97  00 
03257  2A98              ;      8  9 A B C D E F
03258  2A98  12          .BYTE  18,16,0,0,0,14,14,0
03258  2A99  10 
03258  2A9A  00 
03258  2A9B  00 
03258  2A9C  00 
03258  2A9D  0E 
03258  2A9E  0E 
03258  2A9F  00 
03259  2AA0              ; EX   0  1 2 3 4 5 6 7
03260  2AA0  04          .BYTE  4,22,0,0,6,6,6,0
03260  2AA1  16 
03260  2AA2  00 
03260  2AA3  00 
03260  2AA4  06 
03260  2AA5  06 
03260  2AA6  06 
03260  2AA7  00 
03261  2AA8              ;      8  9 A B C D E F
03262  2AA8  12          .BYTE  18,4,18,0,12,12,12,0
03262  2AA9  04 






PDISASS64.ASM......PAGE 0071

LINE# LOC   CODE        LINE


03262  2AAA  12 
03262  2AAB  00 
03262  2AAC  0C 
03262  2AAD  0C 
03262  2AAE  0C 
03262  2AAF  00 
03263  2AB0              ; FX   0  1 2 3 4 5 6 7
03264  2AB0  14          .BYTE  20,24,0,0,0,8,8,0
03264  2AB1  18 
03264  2AB2  00 
03264  2AB3  00 
03264  2AB4  00 
03264  2AB5  08 
03264  2AB6  08 
03264  2AB7  00 
03265  2AB8              ;      8  9 A B C D E F
03266  2AB8  12          .BYTE  18,16,0,0,0,14,14,0
03266  2AB9  10 
03266  2ABA  00 
03266  2ABB  00 
03266  2ABC  00 
03266  2ABD  0E 
03266  2ABE  0E 
03266  2ABF  00 
03267  2AC0              ;*********************************
03268  2AC0              ;.FIL 0:SYM.ASM
03269  2AC0              ;*********************************
03270  2AC0              ;.END
03271  2AC0              ;*********************************
03272  2AC0              ; FILE SYMBOL.ASM
03273  2AC0              ;*********************************
03274  2AC0              ;
03275  2AC0              ;        DISASSEMBLER64
03276  2AC0              ;    SYMBOLIC DISASSEMBLER
03277  2AC0              ;       BY DENTON MARLOWE
03278  2AC0              ;
03279  2AC0              ;  (C)1986 BY DENTON MARLOWE
03280  2AC0              ;
03281  2AC0              ;*********************************
03282  2AC0              ; SYMBOLIC ROUTINES
03283  2AC0              ;*********************************
03284  2AC0              ; SYMBOLIC DISASSEMBLY OPTION
03285  2AC0              ;*********************************
03286  2AC0  A9 2D       SOP    LDA #<MSS1      ;LOW BYTE MESSAGE
03287  2AC2  A0 2E              LDY #>MSS1      ;HIGH BYTE MESSAGE
03288  2AC4  20 BB 1B           JSR STRPNT      ;OUTPUT MESSAGE
03289  2AC7              ;      JSR CRNO    ;GET KEY PRESS
03290  2AC7  20 83 1B           JSR CRYS
03291  2ACA  90 08              BCC SOP1        ;C=0 YES
03292  2ACC              ;*********************************
03293  2ACC              ; ABSOLUTE DISASSEMBLY SELECTED
03294  2ACC              ;*********************************
03295  2ACC  A9 00              LDA #$00        ;SET SYMBLOIC FLAG
03296  2ACE  8D 38 10           STA SYMBOL      ;STORE FLAG
03297  2AD1  4C 1D 2B           JMP SY          ;FOR INTERNAL






PDISASS64.ASM......PAGE 0072

LINE# LOC   CODE        LINE


03298  2AD4              ;*********************************
03299  2AD4              ; SYMBOLIC DISASSEMBLY SELECTED
03300  2AD4              ;*********************************
03301  2AD4  A9 01       SOP1   LDA #$01        ;SET SYMBOLIC FLAG
03302  2AD6  8D 38 10           STA SYMBOL      ;STORE FLAG
03303  2AD9              ;*********************************
03304  2AD9              ; SETUP START OF TABLE POINTER
03305  2AD9              ;*********************************
03306  2AD9  A9 70              LDA #<STABLE
03307  2ADB  8D 3B 10           STA SYMBOS
03308  2ADE  8D 39 10           STA SYMBOP
03309  2AE1  A9 37              LDA #>STABLE
03310  2AE3  8D 3C 10           STA SYMBOS+1
03311  2AE6  8D 3A 10           STA SYMBOP+1
03312  2AE9              ;*********************************
03313  2AE9              ; CHECK FOR SYMBOL TABLE OPTION
03314  2AE9              ;*********************************
03315  2AE9  A9 51       SYTAB  LDA #<MSS2      ;LOW BYTE MESSAGE
03316  2AEB  A0 2E              LDY #>MSS2      ;HIGH BYTE MESSAGE
03317  2AED  20 BB 1B           JSR STRPNT      ;OUTPUT MESSAGE
03318  2AF0  20 90 1B           JSR CRNO        ;GET KEY PRESS
03319  2AF3  B0 28              BCS SY          ;C=1 NO
03320  2AF5              ;*********************************
03321  2AF5              ; APPEND SYMBOL TABLE
03322  2AF5              ;*********************************
03323  2AF5  A9 95              LDA #<MSS4
03324  2AF7  A0 2E              LDY #>MSS4
03325  2AF9  20 BB 1B           JSR STRPNT
03326  2AFC  20 90 1B           JSR CRNO
03327  2AFF  B0 0A              BCS SOP4
03328  2B01  A9 F3              LDA #<UTABLE
03329  2B03  8D 39 10           STA SYMBOP
03330  2B06  A9 38              LDA #>UTABLE
03331  2B08  8D 3A 10           STA SYMBOP+1
03332  2B0B              ;*********************************
03333  2B0B              ; GO AND LOAD TABLE
03334  2B0B              ;*********************************
03335  2B0B  20 B0 2C    SOP4   JSR READXX      ;READ FILE
03336  2B0E  B0 0D              BCS SY          ;C=1 ERROR
03337  2B10              ;*********************************
03338  2B10              ; SETUP END OF TABLE POINTER
03339  2B10              ;*********************************
03340  2B10  AD 39 10           LDA SYMBOP      ;XREF POINTER
03341  2B13  8D 3D 10           STA SYMBOE
03342  2B16  AD 3A 10           LDA SYMBOP+1
03343  2B19  8D 3E 10           STA SYMBOE+1
03344  2B1C  60                 RTS
03345  2B1D              ;*********************************
03346  2B1D              ; DEFAULT SYMBOL TABLE END
03347  2B1D              ;*********************************
03348  2B1D  A9 F3       SY     LDA #<UTABLE
03349  2B1F  8D 3D 10           STA SYMBOE
03350  2B22  A9 38              LDA #>UTABLE
03351  2B24  8D 3E 10           STA SYMBOE+1
03352  2B27  60                 RTS






PDISASS64.ASM......PAGE 0073

LINE# LOC   CODE        LINE


03353  2B28              ;*********************************
03354  2B28              ; SET OR RESET SYMBOL TABLE
03355  2B28              ;*********************************
03356  2B28  AD 3B 10    SSET   LDA SYMBOS
03357  2B2B  8D 39 10           STA SYMBOP
03358  2B2E  AD 3C 10           LDA SYMBOS+1
03359  2B31  8D 3A 10           STA SYMBOP+1
03360  2B34  60                 RTS
03361  2B35              ;*********************************
03362  2B35              ; EQUATE TABLE SETUP
03363  2B35              ;*********************************
03364  2B35  AD 32 10    EQUINT LDA TABINE
03365  2B38  8D 2E 10           STA TABINP
03366  2B3B  8D 30 10           STA TABINS
03367  2B3E  AD 33 10           LDA TABINE+1
03368  2B41  8D 2F 10           STA TABINP+1
03369  2B44  8D 31 10           STA TABINS+1
03370  2B47  60                 RTS
03371  2B48              ;*********************************
03372  2B48              ; ENTRY POINT FOR ADDRESS
03373  2B48              ;*********************************
03374  2B48  AD 38 10    SYM    LDA SYMBOL
03375  2B4B  F0 43              BEQ SYMEND
03376  2B4D  AD 22 10           LDA SELECT      ;COPY SELECT
03377  2B50  8D 45 10           STA WORKED      ;ADDRESS INTO
03378  2B53  AD 23 10           LDA SELECT+1    ;WORKED
03379  2B56  8D 46 10           STA WORKED+1
03380  2B59  4C 61 2B           JMP SYM1        ;CHECK FOR MATCH
03381  2B5C              ;*********************************
03382  2B5C              ; ENTRY POINT FOR OPCODES
03383  2B5C              ;*********************************
03384  2B5C  AD 38 10    SYMOP  LDA SYMBOL
03385  2B5F  F0 2F              BEQ SYMEND
03386  2B61              ;*********************************
03387  2B61              ; COMPARE ADDRESS TO SYMBOL TABLE
03388  2B61              ;*********************************
03389  2B61  20 28 2B    SYM1   JSR SSET
03390  2B64  20 31 2C    SYM2   JSR GETC
03391  2B67  8D 48 10           STA WORKER+1
03392  2B6A  20 28 2C           JSR INCC
03393  2B6D  20 31 2C           JSR GETC
03394  2B70  8D 47 10           STA WORKER
03395  2B73              ;*********************************
03396  2B73  38                 SEC             ;SET CARRY
03397  2B74  AD 47 10           LDA WORKER
03398  2B77  ED 45 10           SBC WORKED      ;SUB FROM LOW
03399  2B7A  8D 51 10           STA TEMP        ;STORE RESULT
03400  2B7D  AD 48 10           LDA WORKER+1
03401  2B80  ED 46 10           SBC WORKED+1    ;SUB FROM HIGH
03402  2B83  0D 51 10           ORA TEMP        ;OR RESULTS
03403  2B86  F0 0A              BEQ MATCH       ;CHECK FOR MATCH
03404  2B88  20 04 2C           JSR NEXTC       ;IF NOT NEXT
03405  2B8B  B0 03              BCS SYMEND      ;END OF TABLE?
03406  2B8D  4C 64 2B           JMP SYM2        ;NO CHECK NEXT
03407  2B90  18          SYMEND CLC             ;NO MATCHES CLEAR






PDISASS64.ASM......PAGE 0074

LINE# LOC   CODE        LINE


03408  2B91  60                 RTS             ;RETURN
03409  2B92              ;*********************************
03410  2B92              ; FOUND MATCH
03411  2B92              ;*********************************
03412  2B92  AD 12 10    MATCH  LDA PASS        ;CHECK PASS
03413  2B95  CD 15 10           CMP CPASS       ;IS IT LAST
03414  2B98  F0 18              BEQ MATCHS      ;IF SO PRINT
03415  2B9A  CD 16 10           CMP SPASS
03416  2B9D  F0 3A              BEQ MATCHT
03417  2B9F  20 3C 22           JSR RANGE       ;SYMBOL IN RANGE
03418  2BA2  90 3F              BCC MATEXT      ;NO INTERNAL EQ
03419  2BA4  20 28 2C           JSR INCC        ;INC TO SYMBOL
03420  2BA7  20 31 2C           JSR GETC        ;GET FIRST CHAR
03421  2BAA  C9 20              CMP #$20        ;SPACE
03422  2BAC  F0 03              BEQ MATONE      ;NOT EQUATE
03423  2BAE  4C B3 22           JMP PUTI        ;PUT IN EQUATE
03424  2BB1  60          MATONE RTS             ;RETURN
03425  2BB2              ;*********************************
03426  2BB2              ; CHECK FOR SYMBOL+1
03427  2BB2              ;*********************************
03428  2BB2  20 28 2C    MATCHS JSR INCC        ;INC TO LABEL
03429  2BB5  20 31 2C           JSR GETC        ;GET CHARARCTER
03430  2BB8  C9 20              CMP #$20        ;IS IT SPACE
03431  2BBA  D0 1D              BNE MATCHT      ;IF NOT GO ON
03432  2BBC  38                 SEC             ;SET CARRY
03433  2BBD  AD 39 10           LDA SYMBOP      ;GET LOW POINT
03434  2BC0  E9 09              SBC #$09        ;LAST SYMBOL
03435  2BC2  48                 PHA             ;PUSH ON STACK
03436  2BC3  AD 3A 10           LDA SYMBOP+1    ;GET HIGH POINT
03437  2BC6  E9 00              SBC #$00        ;LAST SYMBOL
03438  2BC8  A8                 TAY             ;PUT IN Y
03439  2BC9  68                 PLA             ;GET LO POINT
03440  2BCA  20 E4 2B           JSR STRSYM      ;PRINT SYMBOL
03441  2BCD  A9 2B              LDA #'+'         ;ASCII +
03442  2BCF  20 11 1C           JSR PCHAR       ;PRINT IT
03443  2BD2  A9 31              LDA #'1'         ;ASCII 1
03444  2BD4  20 11 1C           JSR PCHAR       ;PRINT IT
03445  2BD7  38                 SEC             ;C=1 SYMBOL
03446  2BD8  60                 RTS             ;RETURN
03447  2BD9              ;*********************************
03448  2BD9  AD 39 10    MATCHT LDA SYMBOP      ;LOW BYTE LABEL
03449  2BDC  AC 3A 10           LDY SYMBOP+1    ;HIGH BYTE LABEL
03450  2BDF  20 E4 2B           JSR STRSYM      ;PRINT LABEL
03451  2BE2              ;*********************************
03452  2BE2  38                 SEC             ;MATCH SET CARRY
03453  2BE3  60          MATEXT RTS             ;RETURN
03454  2BE4              ;*********************************
03455  2BE4              ; PRINT SYMBOL
03456  2BE4              ;*********************************
03457  2BE4  85 DD       STRSYM STA ZEROUR
03458  2BE6  84 DE              STY ZEROUR+1
03459  2BE8  A0 00              LDY #$00
03460  2BEA  B1 DD       STRSY1 LDA (ZEROUR),Y
03461  2BEC  F0 0A              BEQ SYEXIT
03462  2BEE  C9 20              CMP #$20






PDISASS64.ASM......PAGE 0075

LINE# LOC   CODE        LINE


03463  2BF0  F0 06              BEQ SYEXIT
03464  2BF2  20 11 1C           JSR PCHAR
03465  2BF5  C8                 INY
03466  2BF6  D0 F2              BNE STRSY1
03467  2BF8  60          SYEXIT RTS
03468  2BF9  B1 DD       FIXSYM LDA (ZEROUR),Y
03469  2BFB  F0 FB              BEQ SYEXIT
03470  2BFD  20 11 1C           JSR PCHAR
03471  2C00  C8                 INY
03472  2C01  4C F9 2B           JMP FIXSYM
03473  2C04              ;*********************************
03474  2C04              ; INC SYMBOL ADDRESS TABLE POINTER
03475  2C04              ;*********************************
03476  2C04  18          NEXTC  CLC
03477  2C05  AD 39 10           LDA SYMBOP
03478  2C08  69 08              ADC #$08
03479  2C0A  8D 39 10           STA SYMBOP
03480  2C0D  AD 3A 10           LDA SYMBOP+1
03481  2C10  69 00              ADC #$00
03482  2C12  8D 3A 10           STA SYMBOP+1
03483  2C15  CD 3E 10           CMP SYMBOE+1
03484  2C18  90 0A              BCC COK
03485  2C1A  D0 0A              BNE NCOK
03486  2C1C  AD 39 10           LDA SYMBOP
03487  2C1F  CD 3D 10           CMP SYMBOE
03488  2C22  B0 02              BCS NCOK
03489  2C24  18          COK    CLC
03490  2C25  60                 RTS
03491  2C26  38          NCOK   SEC
03492  2C27  60                 RTS
03493  2C28              ;*********************************
03494  2C28  EE 39 10    INCC   INC SYMBOP
03495  2C2B  D0 03              BNE *+5
03496  2C2D  EE 3A 10           INC SYMBOP+1
03497  2C30  60                 RTS
03498  2C31              ;*********************************
03499  2C31              ; GET BYTE FROM ADDRESS TABLE
03500  2C31              ;*********************************
03501  2C31  AD 39 10    GETC   LDA SYMBOP
03502  2C34  85 DD              STA ZEROUR
03503  2C36  AD 3A 10           LDA SYMBOP+1
03504  2C39  85 DE              STA ZEROUR+1
03505  2C3B  A0 00              LDY #$00
03506  2C3D  B1 DD              LDA (ZEROUR),Y
03507  2C3F  60                 RTS
03508  2C40              ;*********************************
03509  2C40              ; PRINT EQUATE TABLE
03510  2C40              ;*********************************
03511  2C40  38          EQUPRT SEC
03512  2C41  AD 30 10           LDA TABINS
03513  2C44  ED 32 10           SBC TABINE
03514  2C47  8D 51 10           STA TEMP
03515  2C4A  AD 31 10           LDA TABINS+1
03516  2C4D  ED 33 10           SBC TABINE+1
03517  2C50  0D 51 10           ORA TEMP






PDISASS64.ASM......PAGE 0076

LINE# LOC   CODE        LINE


03518  2C53  F0 55              BEQ EQUEND
03519  2C55  20 5E 23           JSR SORT
03520  2C58  20 61 20           JSR COMENT
03521  2C5B  20 29 22           JSR PRTOTH
03522  2C5E  A9 27              LDA #<EQUATE
03523  2C60  A0 2F              LDY #>EQUATE
03524  2C62  20 BB 1B           JSR STRPNT
03525  2C65  20 FE 1A           JSR NEWLIN
03526  2C68  20 61 20           JSR COMENT
03527  2C6B  20 03 23    EQUOP  JSR GETI
03528  2C6E  8D 45 10           STA WORKED
03529  2C71  20 FA 22           JSR INCI
03530  2C74  20 03 23           JSR GETI
03531  2C77  8D 46 10           STA WORKED+1
03532  2C7A  20 29 22           JSR PRTOTH
03533  2C7D  20 5C 2B           JSR SYMOP
03534  2C80  B0 03              BCS EQUOP1
03535  2C82  20 BF 20           JSR PWORK
03536  2C85  A9 3D       EQUOP1 LDA #'='
03537  2C87  20 11 1C           JSR PCHAR
03538  2C8A  A9 24              LDA #'$'
03539  2C8C  20 11 1C           JSR PCHAR
03540  2C8F  20 C2 20           JSR PWORKD
03541  2C92  20 FE 1A           JSR NEWLIN
03542  2C95              ;*********************************
03543  2C95  20 FA 22           JSR INCI
03544  2C98  AD 2F 10           LDA TABINP+1
03545  2C9B  CD 33 10           CMP TABINE+1
03546  2C9E  90 CB              BCC EQUOP
03547  2CA0  D0 08              BNE EQUEND
03548  2CA2  AD 2E 10           LDA TABINP
03549  2CA5  CD 32 10           CMP TABINE
03550  2CA8  90 C1              BCC EQUOP
03551  2CAA              ;*********************************
03552  2CAA  20 61 20    EQUEND JSR COMENT
03553  2CAD  4C 9A 22           JMP RESINT
03554  2CB0              ;*********************************
03555  2CB0              ; READ CROSS REFERENCE SEQ FILE
03556  2CB0              ;      INTO SYMBOL TABLE
03557  2CB0              ;*********************************
03558  2CB0              ; READ FILE NAME DEFAULT ON CR
03559  2CB0              ;*********************************
03560  2CB0  A9 77       READXX LDA #<MSS3
03561  2CB2  A0 2E              LDY #>MSS3
03562  2CB4  20 BB 1B           JSR STRPNT
03563  2CB7  20 E4 FF    SOP2   JSR GETIN
03564  2CBA  F0 FB              BEQ SOP2
03565  2CBC  C9 30              CMP #'0'
03566  2CBE  F0 04              BEQ SOP3
03567  2CC0  C9 31              CMP #'1'
03568  2CC2  D0 F3              BNE SOP2
03569  2CC4  20 D2 FF    SOP3   JSR CHROUT
03570  2CC7  8D E6 10           STA TEXTER
03571  2CCA              ;*********************************
03572  2CCA  A9 B9              LDA #<LOADF






PDISASS64.ASM......PAGE 0077

LINE# LOC   CODE        LINE


03573  2CCC  A0 2E              LDY #>LOADF
03574  2CCE  20 BB 1B           JSR STRPNT
03575  2CD1              ;*********************************
03576  2CD1  20 1C 1B           JSR INSTNG
03577  2CD4  F0 20              BEQ READXF
03578  2CD6  98                 TYA
03579  2CD7  48                 PHA
03580  2CD8  20 AB 14           JSR INITD
03581  2CDB  68                 PLA
03582  2CDC  A8                 TAY
03583  2CDD  A2 00              LDX #$00
03584  2CDF  BD 29 2E    XFILE1 LDA NAMS,X
03585  2CE2  99 5C 10           STA BUF,Y
03586  2CE5  C8                 INY
03587  2CE6  E8                 INX
03588  2CE7  E0 04              CPX #$04
03589  2CE9  D0 F4              BNE XFILE1
03590  2CEB  98                 TYA
03591  2CEC  A0 10              LDY #>BUF
03592  2CEE  A2 5C              LDX #<BUF
03593  2CF0  20 BD FF           JSR SETNAM
03594  2CF3  4C FF 2C           JMP REOPEN
03595  2CF6              ;*********************************
03596  2CF6              ; DEFAULT FILENAME XRFF0000
03597  2CF6              ;********************************
03598  2CF6  A9 0E       READXF LDA #$0E
03599  2CF8  A0 2E              LDY #>NAME
03600  2CFA  A2 1F              LDX #<NAME
03601  2CFC  20 BD FF           JSR SETNAM
03602  2CFF              ;*********************************
03603  2CFF              ; OPEN FILE
03604  2CFF              ;********************************
03605  2CFF  A9 03       REOPEN LDA #$03
03606  2D01  A2 08              LDX #$08
03607  2D03  A0 03              LDY #$03
03608  2D05  20 BA FF           JSR SETLFS
03609  2D08  20 C0 FF           JSR OPEN
03610  2D0B              ;********************************
03611  2D0B              ; CHECK FOR DISK ERROR
03612  2D0B              ;*********************************
03613  2D0B  20 C4 1A           JSR DISERR
03614  2D0E  B0 3F              BCS QUITXX
03615  2D10              ;*********************************
03616  2D10              ; OUTPUT LOADING MESSAGE
03617  2D10              ;*********************************
03618  2D10  A9 D7              LDA #<LOADM     ;MSG LOW
03619  2D12  A0 2E              LDY #>LOADM     ;MSG HIGH
03620  2D14  20 BB 1B           JSR STRPNT      ;OUTPUT MSG
03621  2D17              ;*********************************
03622  2D17  A9 00              LDA #$00        ;COL COUNTER
03623  2D19  8D 51 10           STA TEMP
03624  2D1C              ;*********************************
03625  2D1C              ; INPUT AND LOAD SYMBOL TABLE
03626  2D1C              ;*********************************
03627  2D1C  20 60 2D    READX  JSR READS       ;INPUT SYMBOL






PDISASS64.ASM......PAGE 0078

LINE# LOC   CODE        LINE


03628  2D1F  20 DE 2D           JSR PUTC
03629  2D22  20 06 2E           JSR LINES       ;SCREEN OUT
03630  2D25  20 E1 FF           JSR STOP
03631  2D28  F0 05              BEQ QUITX
03632  2D2A  20 B7 FF           JSR READST
03633  2D2D  F0 ED              BEQ READX
03634  2D2F              ;*********************************
03635  2D2F              ;    CLOSE OPEN FILE
03636  2D2F              ;*********************************
03637  2D2F  A9 03       QUITX  LDA #$03
03638  2D31  20 C3 FF           JSR CLOSE
03639  2D34  20 CC FF           JSR CLRCHN
03640  2D37  20 F3 20           JSR CRLF
03641  2D3A              ;*********************************
03642  2D3A              ; SET END OF TABLE
03643  2D3A              ;*********************************
03644  2D3A  AD 39 10           LDA SYMBOP
03645  2D3D  8D 3D 10           STA SYMBOE
03646  2D40  AD 3A 10           LDA SYMBOP+1
03647  2D43  8D 3E 10           STA SYMBOE+1
03648  2D46              ;*********************************
03649  2D46              ; OUTPUT LOADED MESSAGE
03650  2D46              ;*********************************
03651  2D46  A9 F5              LDA #<LOADC
03652  2D48  A0 2E              LDY #>LOADC
03653  2D4A  20 BB 1B           JSR STRPNT
03654  2D4D  18                 CLC
03655  2D4E  60                 RTS
03656  2D4F              ;*********************************
03657  2D4F              ; OUTPUT ERROR MESSAGE
03658  2D4F              ;*********************************
03659  2D4F  A9 03       QUITXX LDA #$03
03660  2D51  20 C3 FF           JSR CLOSE
03661  2D54  20 CC FF           JSR CLRCHN
03662  2D57  A9 0C              LDA #<LOADE
03663  2D59  A0 2F              LDY #>LOADE
03664  2D5B  20 BB 1B           JSR STRPNT
03665  2D5E  38                 SEC
03666  2D5F  60                 RTS
03667  2D60              ;*********************************
03668  2D60              ; READ SYMBOL FROM FILE
03669  2D60              ;*********************************
03670  2D60  A2 03       READS  LDX #$03        ;FILE NUMBER
03671  2D62  20 C6 FF           JSR CHKIN       ;FILE IS INPUT
03672  2D65  A0 02              LDY #$02        ;COUNTER
03673  2D67  20 CF FF           JSR CHRIN       ;INPUT CHAR
03674  2D6A  99 DA 10           STA SYMBUF,Y    ;1ST CHAR
03675  2D6D  20 D2 FF           JSR CHROUT      ;PRITN IT
03676  2D70  C8                 INY             ;INC POINTER
03677  2D71  20 CF FF    READY  JSR CHRIN       ;NEXT CHAR
03678  2D74  99 DA 10           STA SYMBUF,Y    ;STORE
03679  2D77  20 D2 FF           JSR CHROUT      ;PRINT IT
03680  2D7A  C8                 INY             ;INC OFFSET
03681  2D7B  C0 08              CPY #$08        ;8 IS FOR NULL
03682  2D7D  D0 F2              BNE READY       ;BRANCH IF NOT






PDISASS64.ASM......PAGE 0079

LINE# LOC   CODE        LINE


03683  2D7F  A9 00              LDA #$00        ;NULL MARKER
03684  2D81  99 DA 10           STA SYMBUF,Y    ;STORE AT END
03685  2D84              ;*********************************
03686  2D84  20 05 21           JSR SPACE       ;PRINT SPACE
03687  2D87  20 D0 20           JSR DOLLAR      ;PRINT $ SIGN
03688  2D8A              ;*********************************
03689  2D8A  AD E6 10           LDA TEXTER
03690  2D8D  C9 30              CMP #'0'
03691  2D8F  F0 2F              BEQ STDREF
03692  2D91              ;*********************************
03693  2D91  A0 00              LDY #$00
03694  2D93  20 A0 2D           JSR XGET
03695  2D96  C8                 INY
03696  2D97  20 A0 2D           JSR XGET
03697  2D9A  20 CF FF           JSR CHRIN       ;GET $0D
03698  2D9D  4C CC FF           JMP CLRCHN
03699  2DA0              ;*********************************
03700  2DA0  20 CF FF    XGET   JSR CHRIN
03701  2DA3  20 D2 FF           JSR CHROUT
03702  2DA6  20 6C 1B           JSR BINARY
03703  2DA9  0A                 ASL A
03704  2DAA  0A                 ASL A
03705  2DAB  0A                 ASL A
03706  2DAC  0A                 ASL A
03707  2DAD  99 DA 10           STA SYMBUF,Y
03708  2DB0  20 CF FF           JSR CHRIN
03709  2DB3  20 D2 FF           JSR CHROUT
03710  2DB6  20 6C 1B           JSR BINARY
03711  2DB9  19 DA 10           ORA SYMBUF,Y
03712  2DBC  99 DA 10           STA SYMBUF,Y
03713  2DBF  60                 RTS
03714  2DC0              ;*********************************
03715  2DC0  A0 00       STDREF LDY #$00        ;ZERO OFFSET
03716  2DC2  20 CF FF           JSR CHRIN       ;HIGH BYTES
03717  2DC5  99 DA 10           STA SYMBUF,Y    ;
03718  2DC8  8C 54 10           STY SAVY        ;
03719  2DCB  20 A5 1B           JSR PRBYT       ;
03720  2DCE  AC 54 10           LDY SAVY        ;
03721  2DD1  C8                 INY             ;
03722  2DD2  20 CF FF           JSR CHRIN       ;LOW BYTE
03723  2DD5  99 DA 10           STA SYMBUF,Y    ;
03724  2DD8  20 A5 1B           JSR PRBYT       ;
03725  2DDB  4C CC FF           JMP CLRCHN      ;KEYBOARD INPUT
03726  2DDE              ;*********************************
03727  2DDE              ; MOVE SYMBOL FROM BUFFER TO TABLE
03728  2DDE              ;*********************************
03729  2DDE  A0 00       PUTC   LDY #$00
03730  2DE0  AD 39 10           LDA SYMBOP
03731  2DE3  85 DD              STA ZEROUR
03732  2DE5  AD 3A 10           LDA SYMBOP+1
03733  2DE8  85 DE              STA ZEROUR+1
03734  2DEA  B9 DA 10    PUT    LDA SYMBUF,Y
03735  2DED  91 DD              STA (ZEROUR),Y
03736  2DEF  C8                 INY
03737  2DF0  C0 09              CPY #$09






PDISASS64.ASM......PAGE 0080

LINE# LOC   CODE        LINE


03738  2DF2  D0 F6              BNE PUT
03739  2DF4  18                 CLC
03740  2DF5  AD 39 10           LDA SYMBOP
03741  2DF8  69 09              ADC #$09
03742  2DFA  8D 39 10           STA SYMBOP
03743  2DFD  AD 3A 10           LDA SYMBOP+1
03744  2E00  69 00              ADC #$00
03745  2E02  8D 3A 10           STA SYMBOP+1
03746  2E05  60                 RTS
03747  2E06              ;*********************************
03748  2E06              ; OUTPUT SYMBOL IN 4 COLUMNS
03749  2E06              ;*********************************
03750  2E06  EE 51 10    LINES  INC TEMP
03751  2E09  A9 03              LDA #$03
03752  2E0B  CD 51 10           CMP TEMP
03753  2E0E  F0 05              BEQ RESET
03754  2E10  A9 2E              LDA #'.'
03755  2E12  4C D2 FF           JMP CHROUT
03756  2E15  A9 00       RESET  LDA #$00
03757  2E17  8D 51 10           STA TEMP
03758  2E1A  A9 0D              LDA #$0D
03759  2E1C  4C D2 FF           JMP CHROUT
03760  2E1F              ;*********************************
03761  2E1F              ;   COMMAND MESSAGES
03762  2E1F              ;*********************************
03763  2E1F  30 3A       NAME   .BYTE '0:XRLL0000'
03764  2E29  2C 53       NAMS   .BYTE ',S,R'
03765  2E2D              ;*********************************
03766  2E2D  0D          MSS1   .BYTE $0D
03767  2E2E              ; .BYTE 'SYMBOLIC DISASSEMBLY (Y OR N/CR)? '
03768  2E2E  53 59              .BYTE 'SYMBOLIC DISASSEMBLY (Y/CR OR N)? '

03769  2E50  00                 .BYTE 0
03770  2E51  0D          MSS2   .BYTE $0D
03771  2E52  4C 4F              .BYTE 'LOAD USER SYMBOL TABLE (Y OR N/CR)?
 '
03772  2E76  00                 .BYTE 0
03773  2E77  0D          MSS3   .BYTE $0D
03774  2E78  46 4F              .BYTE 'FORMAT 0=STANDARD 1=ASCII : '
03775  2E94  00                 .BYTE 0
03776  2E95  0D          MSS4   .BYTE $0D
03777  2E96  41 50              .BYTE 'APPEND DEFAULT TABLE (Y OR N/CR)? '

03778  2EB8  00                 .BYTE 0
03779  2EB9  0D          LOADF  .BYTE $0D
03780  2EBA  53 59       .BYTE  'SYMBOL TABLE(CR OR D:NAME): '
03781  2ED6  00          .BYTE  0
03782  2ED7  0D          LOADM  .BYTE $0D,$0D
03782  2ED8  0D 
03783  2ED9  52 45       .BYTE  'READING SYMBOL TABLE FILE'
03784  2EF2  0D          .BYTE  $0D,$0D
03784  2EF3  0D 
03785  2EF4  00          .BYTE  0
03786  2EF5  0D          LOADC  .BYTE $0D
03787  2EF6  53 59       .BYTE  'SYMBOL TABLE LOADED'
03788  2F09  0D          .BYTE  $0D,$0D
03788  2F0A  0D 
03789  2F0B  00          .BYTE  0






PDISASS64.ASM......PAGE 0081

LINE# LOC   CODE        LINE


03790  2F0C  0D          LOADE  .BYTE $0D
03791  2F0D  53 59       .BYTE  'SYMBOL TABLE NOT LOADED'
03792  2F24  0D          .BYTE  $0D,$0D
03792  2F25  0D 
03793  2F26  00          .BYTE  0
03794  2F27              ;*********************************
03795  2F27  3B 20       EQUATE .BYTE '; EXTERNAL ADDRESS EQUATES'
03796  2F41  00                 .BYTE 0
03797  2F42              ;*********************************
03798  2F42              ; PATCH CODE AREA
03799  2F42              ;*********************************
03800  2F42              *=*+$0800
03801  3742              ;*********************************
03802  3742              ; BIT INSTRUCTION CODING
03803  3742              ;*********************************
03804  3742              BITOPT = *
03805  3742  A9 04              LDA #<MSB1      ;TABLE TYPE
03806  3744  A0 19              LDY #>MSB1
03807  3746  20 BB 1B           JSR STRPNT
03808  3749  20 E4 FF    BOP0   JSR GETIN
03809  374C  F0 FB              BEQ BOP0
03810  374E  C9 30              CMP #'0'        ;STANDARD
03811  3750  F0 12              BEQ BSC
03812  3752  C9 31              CMP #'1'        ;$2C ABS
03813  3754  F0 0E              BEQ BSC 
03814  3756  C9 32              CMP #'2'        ;$24 ZP
03815  3758  F0 0A              BEQ BSC
03816  375A  C9 33              CMP #'3'        ;$2C AND $24
03817  375C  F0 06              BEQ BSC
03818  375E  C9 0D              CMP #$0D        ;STANDARD
03819  3760  D0 E7              BNE BOP0
03820  3762  A9 30              LDA #'0'
03821  3764              BSC    = *
03822  3764  48                 PHA             ;STASH INPUT
03823  3765  20 D2 FF           JSR CHROUT      ;OUTPUT FEEDBACK
03824  3768  68                 PLA             ;POP INPUT
03825  3769  49 30              EOR #$30        ;MAKE A NUMBER
03826  376B  8D 6F 37           STA BITFLG      ;SET FLAG
03827  376E  60                 RTS
03828  376F              ;*********************************
03829  376F              ; BIT INSTRUCTION CODING FLAG
03830  376F              ;*********************************
03831  376F              BITFLG = *
03832  376F  AA                 .BYTE $AA
03833  3770              ;*********************************
03834  3770              
03835  3770              ;*********************************
03836  3770              ; SYMBOL TABLE
03837  3770              ;*********************************
03838  3770              ;  KERNAL JUMP TABLE
03839  3770              ;*********************************
03840  3770              STABLE = *
03841  3770  FF                 .BYTE $FF,$80,'IDBYTE',0
03841  3771  80 
03841  3772  49 44 






PDISASS64.ASM......PAGE 0082

LINE# LOC   CODE        LINE


03841  3778  00 
03842  3779  FF                 .BYTE $FF,$81,'CINT  ',0
03842  377A  81 
03842  377B  43 49 
03842  3781  00 
03843  3782  FF                 .BYTE $FF,$84,'IOINIT',0
03843  3783  84 
03843  3784  49 4F 
03843  378A  00 
03844  378B  FF                 .BYTE $FF,$87,'RAMTAS',0
03844  378C  87 
03844  378D  52 41 
03844  3793  00 
03845  3794  FF                 .BYTE $FF,$8A,'RESTOR',0
03845  3795  8A 
03845  3796  52 45 
03845  379C  00 
03846  379D  FF                 .BYTE $FF,$8D,'VECTOR',0
03846  379E  8D 
03846  379F  56 45 
03846  37A5  00 
03847  37A6  FF                 .BYTE $FF,$90,'SETMSG',0
03847  37A7  90 
03847  37A8  53 45 
03847  37AE  00 
03848  37AF  FF                 .BYTE $FF,$93,'SECOND',0
03848  37B0  93 
03848  37B1  53 45 
03848  37B7  00 
03849  37B8  FF                 .BYTE $FF,$96,'TKSA  ',0
03849  37B9  96 
03849  37BA  54 4B 
03849  37C0  00 
03850  37C1  FF                 .BYTE $FF,$99,'MEMTOP',0
03850  37C2  99 
03850  37C3  4D 45 
03850  37C9  00 
03851  37CA  FF                 .BYTE $FF,$9C,'MEMBOT',0
03851  37CB  9C 
03851  37CC  4D 45 
03851  37D2  00 
03852  37D3  FF                 .BYTE $FF,$9F,'SCNKEY',0
03852  37D4  9F 
03852  37D5  53 43 
03852  37DB  00 
03853  37DC  FF                 .BYTE $FF,$A2,'SETTMO',0
03853  37DD  A2 
03853  37DE  53 45 
03853  37E4  00 
03854  37E5  FF                 .BYTE $FF,$A5,'ACPTR ',0
03854  37E6  A5 
03854  37E7  41 43 
03854  37ED  00 
03855  37EE  FF                 .BYTE $FF,$A8,'CIOUT ',0
03855  37EF  A8 






PDISASS64.ASM......PAGE 0083

LINE# LOC   CODE        LINE


03855  37F0  43 49 
03855  37F6  00 
03856  37F7  FF                 .BYTE $FF,$AB,'UNTLK ',0
03856  37F8  AB 
03856  37F9  55 4E 
03856  37FF  00 
03857  3800  FF                 .BYTE $FF,$AE,'UNLSN ',0
03857  3801  AE 
03857  3802  55 4E 
03857  3808  00 
03858  3809  FF                 .BYTE $FF,$B1,'LISTEN',0
03858  380A  B1 
03858  380B  4C 49 
03858  3811  00 
03859  3812  FF                 .BYTE $FF,$B4,'TALK  ',0
03859  3813  B4 
03859  3814  54 41 
03859  381A  00 
03860  381B  FF                 .BYTE $FF,$B7,'READST',0
03860  381C  B7 
03860  381D  52 45 
03860  3823  00 
03861  3824  FF                 .BYTE $FF,$BA,'SETLFS',0
03861  3825  BA 
03861  3826  53 45 
03861  382C  00 
03862  382D  FF                 .BYTE $FF,$BD,'SETNAM',0
03862  382E  BD 
03862  382F  53 45 
03862  3835  00 
03863  3836  FF                 .BYTE $FF,$C0,'OPEN  ',0
03863  3837  C0 
03863  3838  4F 50 
03863  383E  00 
03864  383F  FF                 .BYTE $FF,$C3,'CLOSE ',0
03864  3840  C3 
03864  3841  43 4C 
03864  3847  00 
03865  3848  FF                 .BYTE $FF,$C6,'CHKIN ',0
03865  3849  C6 
03865  384A  43 48 
03865  3850  00 
03866  3851  FF                 .BYTE $FF,$C9,'CHKOUT',0
03866  3852  C9 
03866  3853  43 48 
03866  3859  00 
03867  385A  FF                 .BYTE $FF,$CC,'CLRCHN',0
03867  385B  CC 
03867  385C  43 4C 
03867  3862  00 
03868  3863  FF                 .BYTE $FF,$CF,'CHRIN ',0
03868  3864  CF 
03868  3865  43 48 
03868  386B  00 
03869  386C  FF                 .BYTE $FF,$D2,'CHROUT',0






PDISASS64.ASM......PAGE 0084

LINE# LOC   CODE        LINE


03869  386D  D2 
03869  386E  43 48 
03869  3874  00 
03870  3875  FF                 .BYTE $FF,$D5,'LOAD  ',0
03870  3876  D5 
03870  3877  4C 4F 
03870  387D  00 
03871  387E  FF                 .BYTE $FF,$D8,'SAVE  ',0
03871  387F  D8 
03871  3880  53 41 
03871  3886  00 
03872  3887  FF                 .BYTE $FF,$DB,'SETTIM',0
03872  3888  DB 
03872  3889  53 45 
03872  388F  00 
03873  3890  FF                 .BYTE $FF,$DE,'RDTIM ',0
03873  3891  DE 
03873  3892  52 44 
03873  3898  00 
03874  3899  FF                 .BYTE $FF,$E1,'STOP  ',0
03874  389A  E1 
03874  389B  53 54 
03874  38A1  00 
03875  38A2  FF                 .BYTE $FF,$E4,'GETIN ',0
03875  38A3  E4 
03875  38A4  47 45 
03875  38AA  00 
03876  38AB  FF                 .BYTE $FF,$E7,'CLALL ',0
03876  38AC  E7 
03876  38AD  43 4C 
03876  38B3  00 
03877  38B4  FF                 .BYTE $FF,$EA,'UDTIM ',0
03877  38B5  EA 
03877  38B6  55 44 
03877  38BC  00 
03878  38BD  FF                 .BYTE $FF,$ED,'SCREEN',0
03878  38BE  ED 
03878  38BF  53 43 
03878  38C5  00 
03879  38C6  FF                 .BYTE $FF,$F0,'PLOT  ',0
03879  38C7  F0 
03879  38C8  50 4C 
03879  38CE  00 
03880  38CF  FF                 .BYTE $FF,$F3,'IOBASE',0
03880  38D0  F3 
03880  38D1  49 4F 
03880  38D7  00 
03881  38D8              ;*********************************
03882  38D8  FF                 .BYTE $FF,$FA,'NMIVEC',0
03882  38D9  FA 
03882  38DA  4E 4D 
03882  38E0  00 
03883  38E1  FF                 .BYTE $FF,$FC,'RESVEC',0
03883  38E2  FC 
03883  38E3  52 45 






PDISASS64.ASM......PAGE 0085

LINE# LOC   CODE        LINE


03883  38E9  00 
03884  38EA  FF                 .BYTE $FF,$FE,'IRQVEC',0
03884  38EB  FE 
03884  38EC  49 52 
03884  38F2  00 
03885  38F3              ;*********************************
03886  38F3  00          UTABLE .BYTE 0
03887  38F4              ;*********************************
03888  38F4              .END


ERRORS = 00000


SYMBOL TABLE

SYMBOL VALUE
 ABSBIT   1F4A    ABSEXT   1F6F    ABSLUT   1F4B    ABSX     1F70
 ABSY     1F76    AC0      25AE    AC1      25B1    ACC      1EFF
 ACHECK   259C    ADRS     104F    AFILE    1675    AGET     16A9
 AGET1    16B5    ALINE    25DF    ALOP     25F1    AOP      1641
 AOP1     1706    AOP2     1730    AOP3     1755    AOPX     1701
 ASC      1772    ASCCCC   252A    ASCI1    2557    ASCII    254C
 ASCIIQ   2585    ASCKK    2541    B0000    1E18    BASIC    100D
 BINARY   1B6C    BITFLG   376F    BITOPT   3742    BOP      166C
 BOP0     3749    BSC      3764    BSTUB    0001    BUF      105C
 BYABIT   1DE7    BYTES    25B4    BYTESX   25DC    BYTT     1DBF
 BYZBIT   1DC2    CASCII   2634    CDATA    10E7    CHKIN    FFC6
 CHKOUT   FFC9    CHRIN    FFCF    CHROUT   FFD2    CLOSE    FFC3
 CLRCHN   FFCC    COK      2C24    COMENT   2061    COMET    2067
 COMOPT   101D    COMPT    2077    CONST0   1D21    CONST1   1D26
 CPASS    1015    CRLF     20F3    CRLFPR   1C5B    CRNO     1B90
 CRNO1    1B9D    CRYS     1B83    CRYS1    1B9B    CSHORT   2075
 DATABE   10EF    DATABP   10EB    DATABS   10ED    DATAO1   24B8
 DATAO2   24EE    DATAOP   24A9    DATUT    2596    DBYTES   2640
 DBYTEX   266D    DECSL    2142    DEVICE   1019    DISA     1230
 DISASS   1221    DISB     125E    DISC     12ED    DISERR   1AC4
 DISFUL   12EA    DISL     1D94    DISL1    1DA5    DLOOA    1AEF
 DLOOC    1AE5    DLOOE    1AD9    DLOOP    128F    DOLLAR   20D0
 DONE     1364    DONED    1345    DOP      136D    DOP2     1639
 DOP3     163B    DSLINE   1D7D    EA       1020    EAGOL    1028
 EAOUT    102C    EAS      10E4    EASCI1   2618    EASCII   261D
 EFILE    2051    ENDAX    24B5    ENDDAT   2599    EPASS    1014
 EQUATE   2F27    EQUEND   2CAA    EQUINT   2B35    EQUOP    2C6B
 EQUOP1   2C85    EQUPRT   2C40    ERRCT    105A    FILE     158D
 FILEOK   1587    FINAL    1DBC    FINISH   1C48    FIXSYM   2BF9
 FOP1     17AE    FOP2     17B0    FOROPT   101C    FORWRD   1FE9
 GETBYT   1B4F    GETC     2C31    GETI     2303    GETIN    FFE4
 GETOPE   277E    GETSL    212C    GETWRD   1B2B    GFILE0   157B
 HEADER   1C7A    HEADES   1CCD    HEADFX   1CF5    HEADOK   1CE7
 HEADSY   1CE8    HEXA     1D11    ILLEGL   1EBE    ILLMSG   217E
 ILLOP    275D    IMEXIT   1F39    IMMEDT   1F04    IMPLI1   1F8A
 IMPLID   1F7C    IMPONE   1F89    INCC     2C28    INCI     22FA
 INCIE    22F2    INCSL    2123    INDRCT   1F96    INDX     1FAB








SYMBOL TABLE

SYMBOL VALUE
 INDY     1FB4    INEND    1B4E    INENX    1B6B    INIT     1856
 INITD    14AB    INITIN   2262    INSTN1   1B1E    INSTNG   1B1C
 INTCH    2321    INTCHA   2312    INTCHK   231E    INTEND   235A
 INTEXT   22F0    INTMAT   235C    INTOUT   2449    INTPR    2454
 INTPRM   247B    INTPRS   2476    INTPRT   2433    INTSA    214E
 INTSET   2274    IPASS    1013    ISKIP    1EF8    LARGE    23C4
 LINECK   1A85    LINECO   1AC3    LINECT   1058    LINEFL   10C0
 LINEOK   1CBC    LINES    2E06    LISTCT   1057    LOADC    2EF5
 LOADE    2F0C    LOADF    2EB9    LOADM    2ED7    LOOP1    244F
 LOOP2    24A3    LPAREN   20D5    LTITLE   1D46    LTITLS   1D70
 MATCH    2B92    MATCHS   2BB2    MATCHT   2BD9    MATEXT   2BE3
 MATONE   2BB1    MBYTE    272C    MCODES   28C0    MDBYTE   273C
 MEMSIZ   0037    MNAMES   27E8    MNEMON   2745    MNLOOP   274F
 MODES    29C0    MPASS    11F2    MSA1     1989    MSA2     19AB
 MSA3     19C3    MSAOP    196A    MSB1     1904    MSB4     1A45
 MSB5     1A65    MSD1     1871    MSD2     1883    MSD4     1893
 MSD4A    18AD    MSD5     18C0    MSF1     1801    MSF2     181D
 MSG      17B4    MSG1     1831    MSG2     1858    MSG5     19D9
 MSGBIT   215B    MSGBZP   2163    MSGDIS   120E    MSGEND   2179
 MSGERR   1204    MSR1     18DC    MSS1     2E2D    MSS2     2E51
 MSS3     2E77    MSS4     2E95    MWORD    2734    NAME     2E1F
 NAMS     2E29    NASCII   2625    NBUF     10C4    NCHARS   10C3
 NCOK     2C26    NDATA    10E9    NEGREL   2175    NEWEXT   1B1B
 NEWLIN   1AFE    NEXLIN   1C6D    NEXPTR   1C6A    NEXPTS   1CBD
 NEXTBY   2713    NEXTC    2C04    NEXTP    12C0    NEXTSL   210A
 NOASC    263E    NOBINC   272A    NOFILE   158B    NOHEX    1B7F
 NOID     159E    NOINC    2121    NOPRT    161E    NOTABS   16EC
 NPRAD    20AD    NPRAD1   20AE    OFFSET   1024    OFILE    15A1
 OFILE1   15B4    OFILE2   15B9    OFILE3   15DC    OFILE4   15EB
 OFILED   1596    ONEBIT   1E4C    ONEBX    1E7B    ONEBY    1E78
 ONEBYT   1E4D    OPCPUT   1EB7    OPCSYM   1EBA    OPEN     FFC0
 OPERN1   2771    OPERND   2779    ORGIN    203B    OUFILE   1560
 OUTPUT   101A    P1       20A4    PAGECT   1055    PAGER1   1CB6
 PASS     1012    PAUS1    257E    PAUSE    12B9    PCHAR    1C11
 PEXIT    1C46    PFILE0   138D    PFILE1   138F    PMSG     11F8
 POSREL   2171    POVER    20A1    PRAD     208A    PRBYT    1BA5
 PRBYTS   1B9F    PREND    24A0    PRFILE   1485    PRIN     1C26
 PRINT    1620    PRLA     2080    PRO2RD   1461    PROGED   13D5
 PROGM    1852    PROGOK   14AA    PROGRD   13C0    PRTASS   2764
 PRTDAF   2221    PRTDAL   16D0    PRTDAS   16BD    PRTDAT   2205
 PRTEST   21FE    PRTGET   15EC    PRTNEX   16C8    PRTNU1   1BE0
 PRTNU2   1BE7    PRTNU3   1BE8    PRTNUM   1BD7    PRTOK    2493
 PRTON1   21A0    PRTONE   2192    PRTOT1   2234    PRTOTH   2229
 PRTPAG   1BCC    PRTTH1   21F3    PRTTHE   21CD    PRTTW1   21C2
 PRTTWO   21A8    PSELEC   20B6    PUIT     22CD    PUT      2DEA
 PUTC     2DDE    PUTI     22B3    PWORK    20BF    PWORKD   20C2
 Q00000   2606    QUITS    12F3    QUITX    2D2F    QUITXX   2D4F
 QUTERR   130A    RANG     224E    RANGE    223C    READS    2D60
 READST   FFB7    READX    2D1C    READXF   2CF6    READXX   2CB0
 READY    2D71    RELATV   1FC0    RELND    1FF2    RELNEG   201D
 RELP     202F    RELPC    2010    RELPM    2021    RELPUT   200C
 RELSYM   200F    REOPEN   2CFF    RESET    2E15    RESINT   229A
 ROPT     1018    ROUT     2260    RPAREN   20DA    S3       23AC
 SA       101E    SAGOL    1026    SAOUT    102A    SAVA     1052
 SAVEE    104D    SAVEP    1049    SAVES    104B    SAVINT   2281








SYMBOL TABLE

SYMBOL VALUE
 SAVX     1053    SAVY     1054    SBLOK    2725    SCREN    1C3A
 SCRNO1   1D07    SCROFF   1CF8    SCRON    1D08    SELECT   1022
 SEMIC    20CB    SETLFS   FFBA    SETNAM   FFBD    SEXIT    1BCB
 SKIPER   2532    SLOK     211C    SMALL    23C7    SMALLP   1036
 SMALLS   1034    SOP      2AC0    SOP1     2AD4    SOP2     2CB7
 SOP3     2CC4    SOP4     2B0B    SORT     235E    SORT1    2373
 SORT2    2382    SORT3    2404    SORT4    2430    SORTOK   242D
 SOUT     1BC1    SPAC     20FD    SPAC6    20F8    SPACE    2105
 SPACM    20FA    SPASS    1016    SSET     2B28    STABLE   3770
 STARTD   100F    STARTS   14C5    STDREF   2DC0    STOP     FFE1
 STRPNT   1BBB    STRSY1   2BEA    STRSYM   2BE4    SUBP     2794
 SUBS     27CC    SUBS1    27B0    SY       2B1D    SYEXIT   2BF8
 SYM      2B48    SYM1     2B61    SYM2     2B64    SYMBOE   103D
 SYMBOL   1038    SYMBOP   1039    SYMBOS   103B    SYMBUF   10DA
 SYMEND   2B90    SYMOP    2B5C    SYTAB    2AE9    T2       23AF
 TABINE   1032    TABINP   102E    TABINS   1030    TDATA    10F1
 TEMP     1051    TEXTER   10E6    TWOB     1EBD    TWOBIT   1E81
 TWOBX    1EB4    TWOBY    1EB1    TWOBYT   1E82    UTABLE   38F3
 UYMBOE   1043    UYMBOP   103F    UYMBOS   1041    VERSON   10C2
 VICREG   D011    WIND1    1543    WIND2    1545    WINDOP   1507
 WINDOW   101B    WORD1    2685    WORDM    26CB    WORDPT   26BF
 WORDS    2670    WORDS2   26FB    WORDS3   270D    WORDSX   26BC
 WORDSY   26C5    WORDXX   2710    WORKED   1045    WORKER   1047
 WREADY   867E    WRITE    184E    XFILE1   2CDF    XGET     2DA0
 XINDEX   20DF    XOP0     1789    XOP1     1799    XOP2     179B
 XOPT     1017    XTITLE   1D2B    XTITLS   1D63    YINDEX   20E9
 YSHEX    1B81    ZERBIT   1F3A    ZEROPG   1F3B    ZEROUR   00DD
 ZEROX    1F3E    ZEROY    1F44   

END OF ASSEMBLY
PDISASS64.ASM......PAGE 0001

LINE# LOC   CODE        LINE


00001  0000              ;.PAGE 'DISASSEMBLER64'
00002  0000              ;.OPT LIST
00003  0000              ;*********************************
00004  0000              *=$1001                ;START OF BASIC
00005  1001              ;*********************************
00006  1001              ; SET BSTUB TO ONE TO ALLOW FOR
00007  1001              ; INSERTION OF BASIC STUB CODE
00008  1001              ;*********************************
00009  1001              BSTUB  = 1
00010  1001              ;*********************************
00011  1001              ;
00012  1001              ;        DISASSEMBLER64
00013  1001              ;    DISASSEMBLER.C64 V080282
00014  1001              ;    SYMBOLIC DISASSEMBLER
00015  1001              ;       BY DENTON MARLOWE
00016  1001              ;
00017  1001              ;  (C)1986 BY DENTON MARLOWE
00018  1001              ;
00019  1001              ; MACRO ASSEMBLER DEVELOPMENT SYSTEM
00020  1001              ;  (C) 1982 BY COMMODORE MACHINES
00021  1001              ;
00022  1001              ;*********************************
00023  1001              ;
00024  1001              ; BASIC FORMAT PROGRAM
00025  1001              ;
00026  1001              ; 10 SYS(4111)
00027  1001              ;
00028  1001              ;*********************************
00030  1001              ;.IF  BSTUB == 1
00031  1001  0D 10              .WORD BASIC     ;NEXT LINE POINTER
00032  1003  0A                 .BYTE $0A,$00   ;LINE NUMBER
00032  1004  00 
00033  1005  9E                 .BYTE $9E       ;SYS COMMAND
00034  1006  28 34              .BYTE '(4111)'  ;ASCII (4111)
00035  100C  00                 .BYTE 0         ;END OF LINE
00036  100D  00          BASIC  .BYTE 0,0       ;END OF BASIC
00036  100E  00 
00038  100F              ;.FI
00039  100F              ;*********************************
00040  100F              ;.LIB DIS.ASM
00041  100F              ;*********************************
00042  100F              ;.LIB OPTION.ASM
00043  100F              ;*********************************
00044  100F              ;.LIB UTIL.ASM
00045  100F              ;*********************************
00046  100F              ;.LIB MODE.ASM
00047  100F              ;*********************************
00048  100F              ;.LIB INTERNAL.ASM
00049  100F              ;*********************************
00050  100F              ;.LIB ASC.ASM
00051  100F              ;*********************************
00052  100F              ;.LIB TABLE.ASM
00053  100F              ;*********************************
00054  100F              ;.LIB SYM.ASM
00055  100F              ;*********************************






PDISASS64.ASM......PAGE 0002

LINE# LOC   CODE        LINE


00056  100F              ;.END
00057  100F              ;*********************************
00058  100F              ; FILE DIS.ASM
00059  100F              ;*********************************
00060  100F              ;
00061  100F              ;        DISASSEMBLER64
00062  100F              ;    SYMBOLIC DISASSEMBLER
00063  100F              ;       BY DENTON MARLOWE
00064  100F              ;
00065  100F              ;  (C)1986 BY DENTON MARLOWE
00066  100F              ;
00067  100F              ;*********************************
00068  100F              ; KERNAL ADDRESS
00069  100F              ;*********************************
00070  100F              VICREG=$D011           ;SCREEN REGISTER
00071  100F              CHROUT=$FFD2           ;OUTPUT CHARACTER
00072  100F              CHKIN  =$FFC6          ;OPEN INPUT FILE
00073  100F              CHRIN  =$FFCF          ;GET KEYBOARD INPUT
00074  100F              GETIN  =$FFE4          ;GET KEYBOARD CHAR
00075  100F              CLRCHN=$FFCC           ;RESET I/O CHANNELS
00076  100F              STOP   =$FFE1          ;CHECK FOR STOP
00077  100F              READST=$FFB7           ;READ ST
00078  100F              SETNAM=$FFBD           ;SET FILENAME
00079  100F              SETLFS=$FFBA           ;SET LOGICAL FILE
00080  100F              OPEN   =$FFC0          ;OPEN FILE
00081  100F              CHKOUT=$FFC9           ;OPEN OUTPUT CHANNEL
00082  100F              CLOSE  =$FFC3          ;CLOSE LOGICAL FILE
00083  100F              ;*********************************
00084  100F              ; RETURN TO BASIC (RESTORE)
00085  100F              ;*********************************
00086  100F              ;WREADY=$E391 ;BASIC RETURN
00087  100F              WREADY = $867E         ;BASICW
00088  100F              ;*********************************
00089  100F              ; ZEROPAGE USAGE EQUATES
00090  100F              ;*********************************
00091  100F              ;ZEROUR=$02 ;ZEROPAGE POINTER
00092  100F              MEMSIZ=$37             ;TOP OF FREE RAM+1
00093  100F              ;*********************************
00094  100F              ; ZEROPAGE USAGE EQUATES
00095  100F              ; $00D8-00E8  APPLICATION SOFTWARE
00096  100F              ;*********************************
00097  100F              ZEROUR=$DD             ;$FD    ;ZERO PAGE POINTER

00098  100F              ;*********************************
00099  100F              ;        ENTRY POINT
00100  100F              ;*********************************
00101  100F  4C 21 12    STARTD JMP DISASS
00102  1012              ;*********************************
00103  1012              ;       VARIABLES
00104  1012              ;*********************************
00105  1012  31          PASS   .BYTE '1'       ;PASS INDICATOR
00106  1013  31          IPASS  .BYTE '1'       ;INTERNAL PASS
00107  1014  32          EPASS  .BYTE '2'       ;EXTERNAL PASS
00108  1015  33          CPASS  .BYTE '3'       ;PRINTING PASS
00109  1016  34          SPASS  .BYTE '4'       ;SYMBOL PASS
00110  1017              ;*********************************






PDISASS64.ASM......PAGE 0003

LINE# LOC   CODE        LINE


00111  1017  AA          XOPT   .BYTE $AA       ;LABEL GENERATION
00112  1018  AA          ROPT   .BYTE $AA       ;REL ADDRESS OPT
00113  1019  AA          DEVICE .BYTE $AA       ;OUTPUT DEVICE
00114  101A  AA          OUTPUT .BYTE $AA       ;OUTPUT FLAG
00115  101B  AA          WINDOW .BYTE $AA       ;WINDOW FLAG
00116  101C  AA          FOROPT .BYTE $AA       ;FORMAT FLAG
00117  101D  AA          COMOPT .BYTE $AA       ;COMMENT FLAG
00118  101E              ;*********************************
00119  101E              ; DISASSEMBLY ADDRESS POINTERS
00120  101E              ;*********************************
00121  101E  AA AA       SA     .WORD $AAAA     ;START ADDRESS
00122  1020  AA AA       EA     .WORD $AAAA     ;END ADDRESS
00123  1022  AA AA       SELECT .WORD $AAAA     ;BYTE POINTER
00124  1024  AA AA       OFFSET .WORD $AAAA     ;ADDRESS OFFSET
00125  1026  AA AA       SAGOL  .WORD $AAAA     ;GOLBAL START
00126  1028  AA AA       EAGOL  .WORD $AAAA     ;GOLBAL END
00127  102A  AA AA       SAOUT  .WORD $AAAA     ;START ADDRESS
00128  102C  AA AA       EAOUT  .WORD $AAAA     ;END ADDRESS
00129  102E              ;*********************************
00130  102E              ; INTERNAL ADDRESS TABLE
00131  102E              ;*********************************
00132  102E  AA AA       TABINP .WORD $AAAA     ;TABLE POINTER
00133  1030  AA AA       TABINS .WORD $AAAA     ;TABLE START
00134  1032  AA AA       TABINE .WORD $AAAA     ;TABLE END
00135  1034              ;*********************************
00136  1034              ; SORT TABLE POINTERS
00137  1034              ;*********************************
00138  1034  AA AA       SMALLS .WORD $AAAA     ;TABLE START
00139  1036  AA AA       SMALLP .WORD $AAAA     ;TABLE POINTER
00140  1038              ;*********************************
00141  1038              ; SYMBOL TABLE
00142  1038              ;*********************************
00143  1038  AA          SYMBOL .BYTE $AA       ;SYMBOL OPTION
00144  1039  AA AA       SYMBOP .WORD $AAAA     ;TABLE POINTER
00145  103B  AA AA       SYMBOS .WORD $AAAA     ;TABLE START
00146  103D  AA AA       SYMBOE .WORD $AAAA     ;TABLE END
00147  103F              ;*********************************
00148  103F              ; UNDEFINED SYMBOL TABLE
00149  103F              ;*********************************
00150  103F  AA AA       UYMBOP .WORD $AAAA     ;TABLE POINTER
00151  1041  AA AA       UYMBOS .WORD $AAAA     ;TABLE START
00152  1043  AA AA       UYMBOE .WORD $AAAA     ;TABLE END
00153  1045              ;*********************************
00154  1045              ; TEMP WORKING STORAGE
00155  1045              ;*********************************
00156  1045  AA AA       WORKED .WORD $AAAA     ;TWO BYTE OP
00157  1047  AA AA       WORKER .WORD $AAAA     ;TWO BYTE OP
00158  1049  AA AA       SAVEP  .WORD $AAAA     ;TWO BYTE OP
00159  104B  AA AA       SAVES  .WORD $AAAA     ;TWO BYTE OP
00160  104D  AA AA       SAVEE  .WORD $AAAA     ;TWO BYTE OP
00161  104F              ;*********************************
00162  104F              ; OTHER VARIABLES
00163  104F              ;*********************************
00164  104F  AA AA       ADRS   .WORD $AAAA
00165  1051  AA          TEMP   .BYTE $AA






PDISASS64.ASM......PAGE 0004

LINE# LOC   CODE        LINE


00166  1052  AA          SAVA   .BYTE $AA
00167  1053  AA          SAVX   .BYTE $AA
00168  1054  AA          SAVY   .BYTE $AA
00169  1055              ;*********************************
00170  1055              ; PRINTER OUTPUT STORAGE
00171  1055              ;*********************************
00172  1055  AA AA       PAGECT .WORD $AAAA     ;PAGE COUNT
00173  1057  AA          LISTCT .BYTE $AA       ;LINE COUNT
00174  1058  AA AA       LINECT .WORD $AAAA     ;LINE COUNT
00175  105A  AA AA       ERRCT  .WORD $AAAA     ;ERROR COUNT
00176  105C              ;*********************************
00177  105C              ; INPUT BUFFER
00178  105C              ;*********************************
00179  105C              BUF    = *
00180  105C  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00180  105D  00 
00180  105E  00 
00180  105F  00 
00180  1060  00 
00180  1061  00 
00180  1062  00 
00180  1063  00 
00180  1064  00 
00180  1065  00 
00181  1066  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00181  1067  00 
00181  1068  00 
00181  1069  00 
00181  106A  00 
00181  106B  00 
00181  106C  00 
00181  106D  00 
00181  106E  00 
00181  106F  00 
00182  1070  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00182  1071  00 
00182  1072  00 
00182  1073  00 
00182  1074  00 
00182  1075  00 
00182  1076  00 
00182  1077  00 
00182  1078  00 
00182  1079  00 
00183  107A  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00183  107B  00 
00183  107C  00 
00183  107D  00 
00183  107E  00 
00183  107F  00 
00183  1080  00 
00183  1081  00 
00183  1082  00 
00183  1083  00 
00184  1084  00                 .BYTE 0,0,0,0,0,0,0,0,0,0






PDISASS64.ASM......PAGE 0005

LINE# LOC   CODE        LINE


00184  1085  00 
00184  1086  00 
00184  1087  00 
00184  1088  00 
00184  1089  00 
00184  108A  00 
00184  108B  00 
00184  108C  00 
00184  108D  00 
00185  108E  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00185  108F  00 
00185  1090  00 
00185  1091  00 
00185  1092  00 
00185  1093  00 
00185  1094  00 
00185  1095  00 
00185  1096  00 
00185  1097  00 
00186  1098  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00186  1099  00 
00186  109A  00 
00186  109B  00 
00186  109C  00 
00186  109D  00 
00186  109E  00 
00186  109F  00 
00186  10A0  00 
00186  10A1  00 
00187  10A2  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00187  10A3  00 
00187  10A4  00 
00187  10A5  00 
00187  10A6  00 
00187  10A7  00 
00187  10A8  00 
00187  10A9  00 
00187  10AA  00 
00187  10AB  00 
00188  10AC  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00188  10AD  00 
00188  10AE  00 
00188  10AF  00 
00188  10B0  00 
00188  10B1  00 
00188  10B2  00 
00188  10B3  00 
00188  10B4  00 
00188  10B5  00 
00189  10B6  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00189  10B7  00 
00189  10B8  00 
00189  10B9  00 
00189  10BA  00 
00189  10BB  00 






PDISASS64.ASM......PAGE 0006

LINE# LOC   CODE        LINE


00189  10BC  00 
00189  10BD  00 
00189  10BE  00 
00189  10BF  00 
00190  10C0              ;*********************************
00191  10C0              ; FILE NAME BUFFER
00192  10C0              ;*********************************
00193  10C0  AA AA       LINEFL .WORD $AAAA
00194  10C2  AA          VERSON .BYTE $AA
00195  10C3  AA          NCHARS .BYTE $AA
00196  10C4              NBUF   = *
00197  10C4  30 3A              .BYTE '0:'
00198  10C6  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
00198  10C7  AA 
00198  10C8  AA 
00198  10C9  AA 
00198  10CA  AA 
00198  10CB  AA 
00198  10CC  AA 
00198  10CD  AA 
00199  10CE  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
00199  10CF  AA 
00199  10D0  AA 
00199  10D1  AA 
00199  10D2  AA 
00199  10D3  AA 
00199  10D4  AA 
00199  10D5  AA 
00200  10D6  AA                 .BYTE $AA,$AA,$AA,$AA
00200  10D7  AA 
00200  10D8  AA 
00200  10D9  AA 
00201  10DA              ;*********************************
00202  10DA              ; SYMBOL TABLE BUFFER
00203  10DA              ;*********************************
00204  10DA              SYMBUF = *
00205  10DA  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,
$AA
00205  10DB  AA 
00205  10DC  AA 
00205  10DD  AA 
00205  10DE  AA 
00205  10DF  AA 
00205  10E0  AA 
00205  10E1  AA 
00205  10E2  AA 
00205  10E3  AA 
00206  10E4              ;*********************************
00207  10E4              ; DATA TABLE
00208  10E4              ;*********************************
00209  10E4  AA AA       EAS    .WORD $AAAA
00210  10E6  AA          TEXTER .BYTE $AA
00211  10E7  AA AA       CDATA  .WORD $AAAA
00212  10E9  AA AA       NDATA  .WORD $AAAA
00213  10EB  AA AA       DATABP .WORD $AAAA     ;DATA POINT
00214  10ED  AA AA       DATABS .WORD $AAAA     ;DATA START






PDISASS64.ASM......PAGE 0007

LINE# LOC   CODE        LINE


00215  10EF  AA AA       DATABE .WORD $AAAA     ;DATA END
00216  10F1              ;*********************************
00217  10F1              ; DATA TABLE
00218  10F1              ;*********************************
00219  10F1  AA          TDATA  .BYTE $AA
00220  10F2              ;*********************************
00221  10F2              *=*+$0100
00222  11F2              ;*********************************
00223  11F2  0D          MPASS  .BYTE $0D,'PASS',0
00223  11F3  50 41 
00223  11F7  00 
00224  11F8  0D          PMSG   .BYTE $0D,$12,' PAUSE ',$92,$0D,0
00224  11F9  12 
00224  11FA  20 50 
00224  1201  92 
00224  1202  0D 
00224  1203  00 
00225  1204  45 52       MSGERR .BYTE 'ERRORS = ',0
00225  120D  00 
00226  120E  45 4E       MSGDIS .BYTE 'END OF DISASSEMBLY',0
00226  1220  00 
00227  1221              ;*********************************
00228  1221              ; INITIALIZE DISASSEMBLER
00229  1221              ;*********************************
00230  1221  A2 FF       DISASS LDX #$FF
00231  1223  9A                 TXS
00232  1224  D8                 CLD
00233  1225  20 6D 13           JSR DOP         ;GET OPTIONS
00234  1228  20 62 22           JSR INITIN      ;INIT POINTERS
00235  122B  A9 31              LDA #'1'        ;PASS ONE
00236  122D  8D 12 10           STA PASS        ;SET PASS INDICATOR
00237  1230              ;*********************************
00238  1230              ; DISASSEMBLER LOOP
00239  1230              ;*********************************
00240  1230  20 4E 21    DISA   JSR INTSA       ;SET SA
00241  1233  A9 00              LDA #00         ;ZERO BYTE
00242  1235  8D E7 10           STA CDATA       ;SET TABLE NUMBER
00243  1238  A9 F2              LDA #<MPASS     ;PASS MSG
00244  123A  A0 11              LDY #>MPASS     ;
00245  123C  20 BB 1B           JSR STRPNT      ;PRINT IT
00246  123F  AD 12 10           LDA PASS        ;GET PASS
00247  1242  20 11 1C           JSR PCHAR       ;PRINT NUMBER
00248  1245  20 F3 20           JSR CRLF        ;CR
00249  1248              ;*********************************
00250  1248  AD 12 10           LDA PASS        ;GET PASS
00251  124B  CD 15 10           CMP CPASS       ;IS IT LAST
00252  124E  F0 0E              BEQ DISB        ;IF SO PRINT
00253  1250  CD 14 10           CMP EPASS       ;IS IT EXTERNAL
00254  1253  D0 3A              BNE DLOOP       ;IF NOT GO ON
00255  1255  20 81 22           JSR SAVINT      ;SAVE INTERNAL
00256  1258  20 35 2B           JSR EQUINT      ;SET EQUATES
00257  125B  4C 8F 12           JMP DLOOP       ;GO ON
00258  125E              ;*********************************
00259  125E  A9 01       DISB   LDA #$01        ;ONE BYTE
00260  1260  8D 58 10           STA LINECT      ;SET LINE # TO 1






PDISASS64.ASM......PAGE 0008

LINE# LOC   CODE        LINE


00261  1263  8D 55 10           STA PAGECT      ;SET PAGE TO 1
00262  1266  A9 00              LDA #$00        ;ZERO BYTE
00263  1268  8D 59 10           STA LINECT+1    ;SET LINE # TO 1
00264  126B  8D 56 10           STA PAGECT+1    ;SET PAGE TO 1
00265  126E  8D 57 10           STA LISTCT      ;SET LIST TO 0
00266  1271  8D 5A 10           STA ERRCT       ;SET ERROR TO 0
00267  1274  8D 5B 10           STA ERRCT+1     ;SET ERROR TO 0
00268  1277  8D C0 10           STA LINEFL      ;SET LINE TO 0
00269  127A  8D C1 10           STA LINEFL+1    ;SET LINE TO 0
00270  127D  AD 1A 10           LDA OUTPUT      ;GET OUTPUT
00271  1280  8D 19 10           STA DEVICE      ;SET OUTPUT
00272  1283              ;*********************************
00273  1283  20 7A 1C           JSR HEADER      ;PRINT HEADER
00274  1286  20 96 15           JSR OFILED      ;OPEN DISK FILE
00275  1289  20 3B 20           JSR ORGIN       ;PRINT ORGIN LABEL
00276  128C  20 40 2C           JSR EQUPRT      ;PRINT EQUATE
00277  128F              ;********************************
00278  128F  20 7D 1D    DLOOP  JSR DSLINE      ;DIS ONE LINE
00279  1292  B0 2C              BCS NEXTP       ;IF EA STOP
00280  1294  20 85 1A           JSR LINECK      ;LINE COUNT
00281  1297  20 E1 FF           JSR STOP        ;CHECK STOP
00282  129A  F0 57              BEQ QUITS       ;IF SO QUIT
00283  129C  20 E4 FF           JSR GETIN       ;GET KEY
00284  129F  F0 EE              BEQ DLOOP       ;IF NONE NEXT
00285  12A1  C9 20              CMP #' '          ;IS IT A SPACE
00286  12A3  D0 EA              BNE DLOOP       ;IF NOT NEXT
00287  12A5              ;*********************************
00288  12A5              ; PAUSE LISTING
00289  12A5              ;********************************
00290  12A5  AD 19 10           LDA DEVICE
00291  12A8  48                 PHA
00292  12A9  A9 03              LDA #$03
00293  12AB  8D 19 10           STA DEVICE
00294  12AE  A9 F8              LDA #<PMSG
00295  12B0  A0 11              LDY #>PMSG
00296  12B2  20 BB 1B           JSR STRPNT
00297  12B5  68                 PLA
00298  12B6  8D 19 10           STA DEVICE
00299  12B9  20 E4 FF    PAUSE  JSR GETIN       ;PAUSE FOR KEY
00300  12BC  F0 FB              BEQ PAUSE       ;
00301  12BE  D0 CF              BNE DLOOP       ;NEXT LINE
00302  12C0              ;********************************
00303  12C0  EE 12 10    NEXTP  INC PASS        ;INC PASS
00304  12C3  AD 12 10           LDA PASS        ;GET PASS
00305  12C6  CD 15 10           CMP CPASS       ;LAST PASS?
00306  12C9  90 1F              BCC DISFUL      ;IF LESS AGAIN
00307  12CB  D0 20              BNE DISC        ;FINISH
00308  12CD  AD 1B 10           LDA WINDOW      ;WINDOW FLAG
00309  12D0  F0 18              BEQ DISFUL      ;FULL OUTPUT
00310  12D2              ;*********************************
00311  12D2              ; WINDOWED OUTPUT
00312  12D2              ;*********************************
00313  12D2  AD 2A 10           LDA SAOUT       ;
00314  12D5  8D 1E 10           STA SA          ;
00315  12D8  AD 2B 10           LDA SAOUT+1     ;






PDISASS64.ASM......PAGE 0009

LINE# LOC   CODE        LINE


00316  12DB  8D 1F 10           STA SA+1        ;
00317  12DE  AD 2C 10           LDA EAOUT       ;
00318  12E1  8D 20 10           STA EA          ;
00319  12E4  AD 2D 10           LDA EAOUT+1     ;
00320  12E7  8D 21 10           STA EA+1        ;
00321  12EA              ;*********************************
00322  12EA  4C 30 12    DISFUL JMP DISA        ;LAST PASS
00323  12ED  20 23 21    DISC   JSR INCSL
00324  12F0  20 51 20           JSR EFILE       ;END FILE MSG
00325  12F3              ;*********************************
00326  12F3  AD 19 10    QUITS  LDA DEVICE      ;CHECK DEV
00327  12F6  29 08              AND #$08        ;DISK FILE?
00328  12F8  F0 10              BEQ QUTERR      ;IF NOT BRANCH
00329  12FA  A9 08              LDA #$08        ;DISK
00330  12FC  20 C3 FF           JSR CLOSE       ;CLOSE IT
00331  12FF  AD 1A 10           LDA OUTPUT      ;GET OUTPUT
00332  1302  29 07              AND #07         ;MASK DISK
00333  1304  8D 1A 10           STA OUTPUT      ;RESET OUTPUT
00334  1307  8D 19 10           STA DEVICE      ;RESET OUTPUT
00335  130A              ;*********************************
00336  130A              ; PRINT ERRORS
00337  130A              ;*********************************
00338  130A  AD 1A 10    QUTERR LDA OUTPUT
00339  130D  09 03              ORA #$03
00340  130F  8D 1A 10           STA OUTPUT
00341  1312  8D 19 10           STA DEVICE
00342  1315  20 FE 1A           JSR NEWLIN
00343  1318  20 FE 1A           JSR NEWLIN
00344  131B  A9 04              LDA #<MSGERR
00345  131D  A0 12              LDY #>MSGERR
00346  131F  20 BB 1B           JSR STRPNT
00347  1322  AE 5A 10           LDX ERRCT
00348  1325  AD 5B 10           LDA ERRCT+1
00349  1328  20 D7 1B           JSR PRTNUM
00350  132B              ;*********************************
00351  132B  AD 19 10           LDA DEVICE      ;CHECK DEV
00352  132E  29 04              AND #$04        ;PRINTER?
00353  1330  F0 13              BEQ DONED       ;IF NOT DONE
00354  1332  A9 04              LDA #$04        ;DEVICE 4
00355  1334  8D 1A 10           STA OUTPUT      ;SET DEVICE
00356  1337  8D 19 10           STA DEVICE      ;SET DEVICE
00357  133A  20 33 24           JSR INTPRT      ;PRINT INTABLE
00358  133D  A9 07              LDA #$07        ;DEVICE 3 AND 4
00359  133F  8D 19 10           STA DEVICE      ;SET DEVICE
00360  1342  8D 1A 10           STA OUTPUT      ;SET DEVICE
00361  1345  20 FE 1A    DONED  JSR NEWLIN      ;NEWLINE
00362  1348  20 FE 1A           JSR NEWLIN      ;NEWLINE
00363  134B  A9 0E              LDA #<MSGDIS    ;END MSG
00364  134D  A0 12              LDY #>MSGDIS
00365  134F  20 BB 1B           JSR STRPNT      ;PRINT IT
00366  1352  20 FE 1A           JSR NEWLIN      ;NEW LINE
00367  1355  AD 19 10           LDA DEVICE      ;CHECK DEVICE
00368  1358  29 04              AND #$04        ;PRINTER
00369  135A  F0 08              BEQ DONE        ;
00370  135C  20 48 1C           JSR FINISH      ;FINISH PAGE






PDISASS64.ASM......PAGE 0010

LINE# LOC   CODE        LINE


00371  135F  A9 04              LDA #$04        ;PRINTER
00372  1361  20 C3 FF           JSR CLOSE       ;CLOSE FILE
00373  1364              ;*********************************
00374  1364  20 CC FF    DONE   JSR CLRCHN      ;RESET I/O
00375  1367  20 08 1D           JSR SCRON       ;TURN SCREEN ON
00376  136A  4C 7E 86           JMP WREADY      ;RETURN
00377  136D              ;*********************************
00378  136D              ;.FIL 0:OPTION.ASM
00379  136D              ;*********************************
00380  136D              ;.END
00381  136D              ;*********************************
00382  136D              ; FILE OPTION.ASM
00383  136D              ;*********************************
00384  136D              ;
00385  136D              ;        DISASSEMBLER64
00386  136D              ;    SYMBOLIC DISASSEMBLER
00387  136D              ;       BY DENTON MARLOWE
00388  136D              ;
00389  136D              ;  (C)1986 BY DENTON MARLOWE
00390  136D              ;
00391  136D              ;*********************************
00392  136D              ; DISASSEMBLER OPTIONS
00393  136D              ;*********************************
00394  136D  A9 03       DOP    LDA #$03        ;DEVICE #3 SCREEN
00395  136F  8D 19 10           STA DEVICE      ;CURRENT OUTPUT
00396  1372  A9 00              LDA #$00        ;NO DEVICES
00397  1374  8D 1A 10           STA OUTPUT      ;FINAL OUTPUT
00398  1377  A9 B4              LDA #<MSG       ;START UP MSG
00399  1379  A0 17              LDY #>MSG
00400  137B  20 BB 1B           JSR STRPNT      ;PRINT IT
00401  137E              ;*********************************
00402  137E              ; READ IN DISK FILE ?
00403  137E              ;*********************************
00404  137E  A9 01              LDA #<MSF1
00405  1380  A0 18              LDY #>MSF1
00406  1382  20 BB 1B           JSR STRPNT
00407  1385  20 1C 1B           JSR INSTNG
00408  1388  D0 03              BNE PFILE0
00409  138A  4C C5 14           JMP STARTS
00410  138D  A2 00       PFILE0 LDX #$00
00411  138F  BD 52 18    PFILE1 LDA PROGM,X
00412  1392  99 5C 10           STA BUF,Y
00413  1395  C8                 INY
00414  1396  E8                 INX
00415  1397  E0 04              CPX #$04
00416  1399  D0 F4              BNE PFILE1
00417  139B  8C 52 10           STY SAVA
00418  139E  20 AB 14           JSR INITD
00419  13A1  20 85 14           JSR PRFILE
00420  13A4              ;*********************************
00421  13A4              ; READ IN FILE FOR SA AND EA
00422  13A4              ;*********************************
00423  13A4  A2 08              LDX #$08        ;FILE #8
00424  13A6  20 C6 FF           JSR CHKIN       ;INPUT FILE
00425  13A9  20 CF FF           JSR CHRIN       ;GET LOW BYTE SA






PDISASS64.ASM......PAGE 0011

LINE# LOC   CODE        LINE


00426  13AC  8D 1E 10           STA SA          ;SET START
00427  13AF  20 CF FF           JSR CHRIN       ;GET HIGH BYTE SA
00428  13B2  8D 1F 10           STA SA+1        ;SET START
00429  13B5  20 4E 21           JSR INTSA       ;SET END
00430  13B8              ;*********************************
00431  13B8  A9 00              LDA #$00        ;ZERO BYTE
00432  13BA  8D 4F 10           STA ADRS        ;BYTE COUNTER
00433  13BD  8D 50 10           STA ADRS+1      ;BYTE COUNTER
00434  13C0  20 CF FF    PROGRD JSR CHRIN       ;INPUT BYTE
00435  13C3  20 B7 FF           JSR READST      ;READ STATUS
00436  13C6  D0 0D              BNE PROGED      ;IF NOT ZERO END
00437  13C8  20 23 21           JSR INCSL       ;INC END ADDRESS
00438  13CB  EE 4F 10           INC ADRS        ;INC BYTE COUNT
00439  13CE  D0 03              BNE *+5         ;
00440  13D0  EE 50 10           INC ADRS+1      ;
00441  13D3  D0 EB              BNE PROGRD      ;NEXT BYTE
00442  13D5  AD 22 10    PROGED LDA SELECT      ;
00443  13D8  8D 20 10           STA EA          ;
00444  13DB  AD 23 10           LDA SELECT+1    ;
00445  13DE  8D 21 10           STA EA+1        ;
00446  13E1              ;*********************************
00447  13E1  A9 08              LDA #$08        ;FILE #8
00448  13E3  20 C3 FF           JSR CLOSE       ;CLOSE IT
00449  13E6  20 CC FF           JSR CLRCHN      ;RESET I/O
00450  13E9              ;*********************************
00451  13E9              ; PRINT PROGRAM LOAD ADDRESS
00452  13E9              ; AND END ADDRESS
00453  13E9              ;*********************************
00454  13E9  A9 1D              LDA #<MSF2
00455  13EB  A0 18              LDY #>MSF2
00456  13ED  20 BB 1B           JSR STRPNT
00457  13F0  AD 1E 10           LDA SA
00458  13F3  8D 45 10           STA WORKED
00459  13F6  AD 1F 10           LDA SA+1
00460  13F9  8D 46 10           STA WORKED+1
00461  13FC  20 C2 20           JSR PWORKD
00462  13FF              ;
00463  13FF  A9 2D              LDA #'-'
00464  1401              ;
00465  1401  20 11 1C           JSR PCHAR
00466  1404  20 D0 20           JSR DOLLAR
00467  1407  20 B6 20           JSR PSELEC
00468  140A  20 F3 20           JSR CRLF
00469  140D              ;*********************************
00470  140D              ; CALCULATE BUFFER ADDRESS
00471  140D              ;*********************************
00472  140D  A9 00              LDA #$00        ;MEMSIZ
00473  140F  8D 22 10           STA SELECT
00474  1412  A9 80              LDA #$80        ;MEMSIZ+1
00475  1414  8D 23 10           STA SELECT+1
00476  1417  20 42 21           JSR DECSL
00477  141A  38                 SEC
00478  141B  AD 22 10           LDA SELECT
00479  141E  ED 4F 10           SBC ADRS
00480  1421  8D 22 10           STA SELECT






PDISASS64.ASM......PAGE 0012

LINE# LOC   CODE        LINE


00481  1424  AD 23 10           LDA SELECT+1
00482  1427  ED 50 10           SBC ADRS+1
00483  142A  8D 23 10           STA SELECT+1
00484  142D              ;*********************************
00485  142D              ; CALCULATE ADDRESS OFFSET
00486  142D              ;*********************************
00487  142D  38                 SEC
00488  142E  AD 22 10           LDA SELECT
00489  1431  ED 1E 10           SBC SA
00490  1434  8D 24 10           STA OFFSET
00491  1437  8D 45 10           STA WORKED
00492  143A  AD 23 10           LDA SELECT+1
00493  143D  ED 1F 10           SBC SA+1
00494  1440  8D 25 10           STA OFFSET+1
00495  1443  8D 46 10           STA WORKED+1
00496  1446  A9 AD              LDA #<MSD4A
00497  1448  A0 18              LDY #>MSD4A
00498  144A  20 BB 1B           JSR STRPNT
00499  144D  20 C2 20           JSR PWORKD
00500  1450  20 F3 20           JSR CRLF
00501  1453              ;*********************************
00502  1453              ; OPEN FILE AND READ PRG INTO BUF
00503  1453              ;*********************************
00504  1453  20 85 14           JSR PRFILE      ;OPEN FILE
00505  1456  A2 08              LDX #$08        ;FILE #8
00506  1458  20 C6 FF           JSR CHKIN       ;INPUT FILE
00507  145B  20 CF FF           JSR CHRIN       ;GET LOW BYTE SA
00508  145E  20 CF FF           JSR CHRIN       ;GET HIGH BYTE SA
00509  1461  20 CF FF    PRO2RD JSR CHRIN       ;INPUT BYTE
00510  1464  AE 22 10           LDX SELECT      ;LOW BYTE POINTER
00511  1467  86 DD              STX ZEROUR      ;ZERO PAGE
00512  1469  AE 23 10           LDX SELECT+1    ;HIH BYTE POINTER
00513  146C  86 DE              STX ZEROUR+1    ;ZERO PAGE
00514  146E  A0 00              LDY #$00        ;OFFSET
00515  1470  91 DD              STA (ZEROUR),Y  ;STORE BYTE
00516  1472  20 23 21           JSR INCSL       ;INC POINTER
00517  1475  20 B7 FF           JSR READST      ;READ STATUS
00518  1478  F0 E7              BEQ PRO2RD      ;NEXT BYTE
00519  147A  A9 08              LDA #$08        ;FILE #8
00520  147C  20 C3 FF           JSR CLOSE       ;CLOSE IT
00521  147F  20 CC FF           JSR CLRCHN      ;RESET I/O
00522  1482  4C 07 15           JMP WINDOP      ;WINDOW OPTION
00523  1485              ;*********************************
00524  1485              ; OPEN PROGRAM FILE
00525  1485              ;*********************************
00526  1485  AD 52 10    PRFILE LDA SAVA
00527  1488  A2 5C              LDX #<BUF
00528  148A  A0 10              LDY #>BUF
00529  148C  20 BD FF           JSR SETNAM
00530  148F  A9 08              LDA #$08
00531  1491  A8                 TAY
00532  1492  AA                 TAX
00533  1493  20 BA FF           JSR SETLFS
00534  1496  20 C0 FF           JSR OPEN
00535  1499  20 C4 1A           JSR DISERR






PDISASS64.ASM......PAGE 0013

LINE# LOC   CODE        LINE


00536  149C  90 0C              BCC PROGOK
00537  149E  A9 08              LDA #$08
00538  14A0  20 C3 FF           JSR CLOSE
00539  14A3  68                 PLA
00540  14A4  68                 PLA
00541  14A5  68                 PLA
00542  14A6  68                 PLA
00543  14A7  4C 7E 86           JMP WREADY
00544  14AA              ;*********************************
00545  14AA  60          PROGOK RTS
00546  14AB              ;*********************************
00547  14AB              ; INIT DISK
00548  14AB              ;*********************************
00549  14AB  A9 02       INITD  LDA #$02
00550  14AD  A0 18              LDY #>INIT
00551  14AF  A2 56              LDX #<INIT
00552  14B1  20 BD FF           JSR SETNAM
00553  14B4  A9 0F              LDA #$0F
00554  14B6  A2 08              LDX #$08
00555  14B8  A0 0F              LDY #$0F
00556  14BA  20 BA FF           JSR SETLFS
00557  14BD  20 C0 FF           JSR OPEN
00558  14C0  A9 0F              LDA #$0F
00559  14C2  4C C3 FF           JMP CLOSE
00560  14C5              ;*********************************
00561  14C5              ; GET START ADDRESS
00562  14C5              ;*********************************
00563  14C5  A9 71       STARTS LDA #<MSD1
00564  14C7  A0 18              LDY #>MSD1
00565  14C9  20 BB 1B           JSR STRPNT
00566  14CC  20 2B 1B           JSR GETWRD
00567  14CF  AD 4F 10           LDA ADRS
00568  14D2  8D 1E 10           STA SA
00569  14D5  AD 50 10           LDA ADRS+1
00570  14D8  8D 1F 10           STA SA+1
00571  14DB              ;*********************************
00572  14DB              ; GET END ADDRESS
00573  14DB              ;*********************************
00574  14DB  A9 83              LDA #<MSD2
00575  14DD  A0 18              LDY #>MSD2
00576  14DF  20 BB 1B           JSR STRPNT
00577  14E2  20 2B 1B           JSR GETWRD
00578  14E5  AD 4F 10           LDA ADRS
00579  14E8  8D 20 10           STA EA
00580  14EB  AD 50 10           LDA ADRS+1
00581  14EE  8D 21 10           STA EA+1
00582  14F1              ;*********************************
00583  14F1              ; ADDRRESS OFFSET
00584  14F1              ;*********************************
00585  14F1  A9 93              LDA #<MSD4
00586  14F3  A0 18              LDY #>MSD4
00587  14F5  20 BB 1B           JSR STRPNT
00588  14F8  20 2B 1B           JSR GETWRD
00589  14FB  AD 4F 10           LDA ADRS
00590  14FE  8D 24 10           STA OFFSET






PDISASS64.ASM......PAGE 0014

LINE# LOC   CODE        LINE


00591  1501  AD 50 10           LDA ADRS+1
00592  1504  8D 25 10           STA OFFSET+1
00593  1507              ;*********************************
00594  1507              ; OUTPUT WINDOW
00595  1507              ;*********************************
00596  1507  A9 C0       WINDOP LDA #<MSD5
00597  1509  A0 18              LDY #>MSD5
00598  150B  20 BB 1B           JSR STRPNT
00599  150E  20 90 1B           JSR CRNO
00600  1511  B0 30              BCS WIND1
00601  1513  A9 71              LDA #<MSD1
00602  1515  A0 18              LDY #>MSD1
00603  1517  20 BB 1B           JSR STRPNT
00604  151A  20 2B 1B           JSR GETWRD
00605  151D  AD 4F 10           LDA ADRS
00606  1520  8D 2A 10           STA SAOUT
00607  1523  AD 50 10           LDA ADRS+1
00608  1526  8D 2B 10           STA SAOUT+1
00609  1529  A9 83              LDA #<MSD2
00610  152B  A0 18              LDY #>MSD2
00611  152D  20 BB 1B           JSR STRPNT
00612  1530  20 2B 1B           JSR GETWRD
00613  1533  AD 4F 10           LDA ADRS
00614  1536  8D 2C 10           STA EAOUT
00615  1539  AD 50 10           LDA ADRS+1
00616  153C  8D 2D 10           STA EAOUT+1
00617  153F  A9 FF              LDA #$FF
00618  1541  30 02              BMI WIND2
00619  1543  A9 00       WIND1  LDA #$00
00620  1545  8D 1B 10    WIND2  STA WINDOW
00621  1548              ;*********************************
00622  1548              ; SETUP GOBAL POINTER
00623  1548              ;*********************************
00624  1548  AD 1E 10           LDA SA
00625  154B  8D 26 10           STA SAGOL
00626  154E  AD 1F 10           LDA SA+1
00627  1551  8D 27 10           STA SAGOL+1
00628  1554  AD 20 10           LDA EA
00629  1557  8D 28 10           STA EAGOL
00630  155A  AD 21 10           LDA EA+1
00631  155D  8D 29 10           STA EAGOL+1
00632  1560              ;*********************************
00633  1560              ; SOURCE FILE OUTPUT?
00634  1560              ;*********************************
00635  1560  A9 31       OUFILE LDA #<MSG1
00636  1562  A0 18              LDY #>MSG1
00637  1564  20 BB 1B           JSR STRPNT
00638  1567              ;*********************************
00639  1567  A9 00              LDA #$00
00640  1569  8D C3 10           STA NCHARS
00641  156C  20 1C 1B           JSR INSTNG
00642  156F  F0 1A              BEQ NOFILE
00643  1571  A9 30              LDA #'0'
00644  1573  8D C2 10           STA VERSON
00645  1576  8C C3 10           STY NCHARS






PDISASS64.ASM......PAGE 0015

LINE# LOC   CODE        LINE


00646  1579  A2 00              LDX #$00
00647  157B  BD 5C 10    GFILE0 LDA BUF,X
00648  157E  9D C4 10           STA NBUF,X
00649  1581  E8                 INX
00650  1582  EC C3 10           CPX NCHARS
00651  1585  D0 F4              BNE GFILE0
00652  1587              ;*********************************
00653  1587  A9 08       FILEOK LDA #$08
00654  1589  D0 02              BNE FILE
00655  158B  A9 00       NOFILE LDA #$00
00656  158D  0D 1A 10    FILE   ORA OUTPUT
00657  1590  8D 1A 10           STA OUTPUT
00658  1593  4C EC 15           JMP PRTGET
00659  1596              ;*********************************
00660  1596              ;     OPEN SOURCE DISK FILE
00661  1596              ;*********************************
00662  1596  AC C3 10    OFILED LDY NCHARS
00663  1599  F0 03              BEQ NOID
00664  159B  20 AB 14           JSR INITD
00665  159E  20 F8 1C    NOID   JSR SCROFF
00666  15A1              ;*********************************
00667  15A1  AC C3 10    OFILE  LDY NCHARS
00668  15A4  F0 45              BEQ OFILE4
00669  15A6  AD C2 10           LDA VERSON
00670  15A9  C9 30              CMP #'0'
00671  15AB  F0 07              BEQ OFILE1
00672  15AD  AD C2 10           LDA VERSON
00673  15B0  99 C4 10           STA NBUF,Y
00674  15B3  C8                 INY
00675  15B4  EE C2 10    OFILE1 INC VERSON
00676  15B7  A2 00              LDX #$00
00677  15B9  BD 4E 18    OFILE2 LDA WRITE,X
00678  15BC  99 C4 10           STA NBUF,Y
00679  15BF  C8                 INY
00680  15C0  E8                 INX
00681  15C1  E0 04              CPX #$04
00682  15C3  D0 F4              BNE OFILE2
00683  15C5  98                 TYA
00684  15C6  A0 10              LDY #>NBUF
00685  15C8  A2 C4              LDX #<NBUF
00686  15CA  20 BD FF           JSR SETNAM
00687  15CD  A9 08              LDA #$08
00688  15CF  AA                 TAX
00689  15D0  A8                 TAY
00690  15D1  20 BA FF           JSR SETLFS
00691  15D4  20 C0 FF           JSR OPEN
00692  15D7  20 C4 1A           JSR DISERR
00693  15DA  90 0F              BCC OFILE4
00694  15DC              ;*********************************
00695  15DC              ;  CLOSE OUT FILE ON ERROR
00696  15DC              ;*********************************
00697  15DC  A9 08       OFILE3 LDA #$08
00698  15DE  20 C3 FF           JSR CLOSE
00699  15E1  20 CC FF           JSR CLRCHN
00700  15E4  68                 PLA






PDISASS64.ASM......PAGE 0016

LINE# LOC   CODE        LINE


00701  15E5  68                 PLA
00702  15E6  68                 PLA
00703  15E7  68                 PLA
00704  15E8  4C 7E 86           JMP WREADY
00705  15EB  60          OFILE4 RTS
00706  15EC              ;*********************************
00707  15EC              ; GET PRINTER OPTION
00708  15EC              ;*********************************
00709  15EC  A9 58       PRTGET LDA #<MSG2
00710  15EE  A0 18              LDY #>MSG2
00711  15F0  20 BB 1B           JSR STRPNT
00712  15F3  20 83 1B           JSR CRYS
00713  15F6  B0 26              BCS NOPRT
00714  15F8  A9 00              LDA #$00
00715  15FA  20 BD FF           JSR SETNAM
00716  15FD  A9 04              LDA #$04
00717  15FF  A2 04              LDX #$04
00718  1601  A0 00              LDY #$00
00719  1603  20 BA FF           JSR SETLFS
00720  1606  20 C0 FF           JSR OPEN
00721  1609  A2 04              LDX #$04
00722  160B  20 C9 FF           JSR CHKOUT
00723  160E  20 B7 FF           JSR READST
00724  1611  29 80              AND #$80
00725  1613  08                 PHP
00726  1614  20 CC FF           JSR CLRCHN
00727  1617  28                 PLP
00728  1618  30 04              BMI NOPRT
00729  161A  A9 04              LDA #$04
00730  161C  D0 02              BNE PRINT
00731  161E  A9 03       NOPRT  LDA #$03
00732  1620  0D 1A 10    PRINT  ORA OUTPUT
00733  1623  8D 1A 10           STA OUTPUT
00734  1626              ;*********************************
00735  1626              ; GO GET SYMBOLIC OPTION
00736  1626              ;*********************************
00737  1626  20 C0 2A           JSR SOP
00738  1629              ;*********************************
00739  1629              ; GET RELATIVE ADDRESS OPTION
00740  1629              ;*********************************
00741  1629  A9 DC              LDA #<MSR1
00742  162B  A0 18              LDY #>MSR1
00743  162D  20 BB 1B           JSR STRPNT
00744  1630  20 83 1B           JSR CRYS
00745  1633  90 04              BCC DOP2
00746  1635  A9 01              LDA #$01
00747  1637  D0 02              BNE DOP3
00748  1639  A9 00       DOP2   LDA #$00
00749  163B  8D 18 10    DOP3   STA ROPT
00750  163E              ;*********************************
00751  163E              ; GET BIT INSTRUCTION CODING OPTION
00752  163E              ;*********************************
00753  163E  20 42 37           JSR BITOPT
00754  1641              ;*********************************
00755  1641              ; DATA TABLE OPTION






PDISASS64.ASM......PAGE 0017

LINE# LOC   CODE        LINE


00756  1641              ;*********************************
00757  1641  AD 3D 10    AOP    LDA SYMBOE
00758  1644  8D EB 10           STA DATABP
00759  1647  8D ED 10           STA DATABS
00760  164A  8D EF 10           STA DATABE
00761  164D  85 DD              STA ZEROUR
00762  164F  AD 3E 10           LDA SYMBOE+1
00763  1652  8D EC 10           STA DATABP+1
00764  1655  8D EE 10           STA DATABS+1
00765  1658  8D F0 10           STA DATABE+1
00766  165B  85 DE              STA ZEROUR+1
00767  165D              ;*********************************
00768  165D  A9 6A              LDA #<MSAOP
00769  165F  A0 19              LDY #>MSAOP
00770  1661  20 BB 1B           JSR STRPNT
00771  1664  20 1C 1B           JSR INSTNG
00772  1667  D0 03              BNE BOP
00773  1669  4C EC 16           JMP NOTABS
00774  166C              ;*********************************
00775  166C  98          BOP    TYA
00776  166D  48                 PHA
00777  166E  20 AB 14           JSR INITD
00778  1671  68                 PLA
00779  1672  A8                 TAY
00780  1673  A2 00              LDX #$00
00781  1675  BD 29 2E    AFILE  LDA NAMS,X
00782  1678  99 5C 10           STA BUF,Y
00783  167B  C8                 INY
00784  167C  E8                 INX
00785  167D  E0 04              CPX #$04
00786  167F  D0 F4              BNE AFILE
00787  1681  98                 TYA
00788  1682  A0 10              LDY #>BUF
00789  1684  A2 5C              LDX #<BUF
00790  1686  20 BD FF           JSR SETNAM
00791  1689  A9 03              LDA #$03
00792  168B  A2 08              LDX #$08
00793  168D  A0 03              LDY #$03
00794  168F  20 BA FF           JSR SETLFS
00795  1692  20 C0 FF           JSR OPEN
00796  1695  20 C4 1A           JSR DISERR
00797  1698  B0 1B              BCS AGET1
00798  169A  A2 03              LDX #$03
00799  169C  20 C6 FF           JSR CHKIN
00800  169F              ;*********************************
00801  169F              ; READ IN DATA TABLE
00802  169F              ;*********************************
00803  169F  A0 00              LDY #$00
00804  16A1  20 CF FF           JSR CHRIN
00805  16A4  8D E9 10           STA NDATA
00806  16A7  F0 0C              BEQ AGET1
00807  16A9  20 CF FF    AGET   JSR CHRIN
00808  16AC  99 F1 10           STA TDATA,Y
00809  16AF  C8                 INY
00810  16B0  20 B7 FF           JSR READST






PDISASS64.ASM......PAGE 0018

LINE# LOC   CODE        LINE


00811  16B3  F0 F4              BEQ AGET
00812  16B5  A9 03       AGET1  LDA #$03
00813  16B7  20 C3 FF           JSR CLOSE
00814  16BA  20 CC FF           JSR CLRCHN
00815  16BD              ;*********************************
00816  16BD              ; PRINT DATA TABLE
00817  16BD              ;*********************************
00818  16BD  AD E9 10    PRTDAS LDA NDATA
00819  16C0  8D E7 10           STA CDATA
00820  16C3  A0 00              LDY #$00
00821  16C5  8C 54 10           STY SAVY
00822  16C8  20 F3 20    PRTNEX JSR CRLF
00823  16CB  A2 05              LDX #$05
00824  16CD  8E 53 10           STX SAVX
00825  16D0  AC 54 10    PRTDAL LDY SAVY
00826  16D3  B9 F1 10           LDA TDATA,Y
00827  16D6  20 A5 1B           JSR PRBYT
00828  16D9  20 05 21           JSR SPACE
00829  16DC  EE 54 10           INC SAVY
00830  16DF  CE 53 10           DEC SAVX
00831  16E2  D0 EC              BNE PRTDAL
00832  16E4  CE E7 10           DEC CDATA
00833  16E7  D0 DF              BNE PRTNEX
00834  16E9              ;*********************************
00835  16E9  4C 89 17           JMP XOP0
00836  16EC              ;*********************************
00837  16EC              ; READ DATA FOR KEYBOARD
00838  16EC              ;*********************************
00839  16EC  A9 89       NOTABS LDA #<MSA1      ;NUMBER OF DATA
00840  16EE  A0 19              LDY #>MSA1
00841  16F0  20 BB 1B           JSR STRPNT
00842  16F3  20 2B 1B           JSR GETWRD      ;INPUT HEX BYTE
00843  16F6  AD 4F 10           LDA ADRS        ;GET BYTE
00844  16F9  8D E9 10           STA NDATA       ;SET NUM TABLES
00845  16FC  D0 03              BNE AOPX        ;0 DATA THEN END
00846  16FE  4C 89 17           JMP XOP0        ;RETURN
00847  1701  A9 00       AOPX   LDA #$00        ;ZERO OFFSET
00848  1703  8D E7 10           STA CDATA       ;FIRST TABLE
00849  1706              ;*********************************
00850  1706              ; CALCULATE TABLE OFFSET
00851  1706              ;*********************************
00852  1706  AD E7 10    AOP1   LDA CDATA       ;GET TABLE NUMBER
00853  1709  0A                 ASL A           ;*2
00854  170A  0A                 ASL A           ;*4
00855  170B  18                 CLC             ;C=0
00856  170C  6D E7 10           ADC CDATA       ;*5
00857  170F  8D 54 10           STA SAVY        ;STORE AS OFFSET
00858  1712              ;*********************************
00859  1712  A9 AB              LDA #<MSA2
00860  1714  A0 19              LDY #>MSA2
00861  1716  20 BB 1B           JSR STRPNT      ;PRINT MSG
00862  1719  20 2B 1B           JSR GETWRD      ;GET ADDRESS
00863  171C  AC 54 10           LDY SAVY        ;GET OFFSET
00864  171F  AD 4F 10           LDA ADRS
00865  1722  99 F1 10           STA TDATA,Y






PDISASS64.ASM......PAGE 0019

LINE# LOC   CODE        LINE


00866  1725  C8                 INY
00867  1726  AD 50 10           LDA ADRS+1
00868  1729  99 F1 10           STA TDATA,Y
00869  172C  C8                 INY
00870  172D  8C 54 10           STY SAVY
00871  1730              ;*********************************
00872  1730              ; END OF DATA TABLE
00873  1730              ;*********************************
00874  1730  A9 C3       AOP2   LDA #<MSA3
00875  1732  A0 19              LDY #>MSA3
00876  1734  20 BB 1B           JSR STRPNT
00877  1737  20 2B 1B           JSR GETWRD      ;GET ADDRESS
00878  173A  AC 54 10           LDY SAVY
00879  173D  AD 4F 10           LDA ADRS
00880  1740  99 F1 10           STA TDATA,Y
00881  1743  C8                 INY
00882  1744  AD 50 10           LDA ADRS+1
00883  1747  99 F1 10           STA TDATA,Y
00884  174A  C8                 INY
00885  174B  8C 54 10           STY SAVY
00886  174E              ;*********************************
00887  174E              ; GET TYPE OF TABLE
00888  174E              ;*********************************
00889  174E  A9 D9              LDA #<MSG5      ;TABLE TYPE
00890  1750  A0 19              LDY #>MSG5
00891  1752  20 BB 1B           JSR STRPNT
00892  1755  20 E4 FF    AOP3   JSR GETIN
00893  1758  F0 FB              BEQ AOP3
00894  175A  C9 30              CMP #'0'
00895  175C  F0 14              BEQ ASC
00896  175E  C9 31              CMP #'1'
00897  1760  F0 10              BEQ ASC
00898  1762  C9 32              CMP #'2'
00899  1764  F0 0C              BEQ ASC
00900  1766  C9 33              CMP #'3'
00901  1768  F0 08              BEQ ASC
00902  176A  C9 34              CMP #'4'
00903  176C  F0 04              BEQ ASC
00904  176E  C9 53              CMP #'S'
00905  1770  D0 E3              BNE AOP3
00906  1772  20 D2 FF    ASC    JSR CHROUT
00907  1775  AC 54 10           LDY SAVY
00908  1778  99 F1 10           STA TDATA,Y
00909  177B              ;*********************************
00910  177B  EE E7 10           INC CDATA       ;INC TABLE COUNT
00911  177E  AD E7 10           LDA CDATA       ;GET TABLE COUNT
00912  1781  CD E9 10           CMP NDATA       ;ALL TABLES?
00913  1784  F0 03              BEQ XOP0        ;IF NOT GET MORE
00914  1786  4C 06 17           JMP AOP1        ;IF NOT GET MORE
00915  1789              ;*********************************
00916  1789              ; GET LABEL GENERATION OPTION
00917  1789              ;*********************************
00918  1789  A9 45       XOP0   LDA #<MSB4
00919  178B  A0 1A              LDY #>MSB4
00920  178D  20 BB 1B           JSR STRPNT






PDISASS64.ASM......PAGE 0020

LINE# LOC   CODE        LINE


00921  1790  20 83 1B           JSR CRYS
00922  1793  B0 04              BCS XOP1
00923  1795  A9 01              LDA #$01
00924  1797  D0 02              BNE XOP2
00925  1799  A9 00       XOP1   LDA #$00
00926  179B  8D 17 10    XOP2   STA XOPT
00927  179E              ;*********************************
00928  179E              ; OUTPUT FORMAT OPTION
00929  179E              ;*********************************
00930  179E  A9 65              LDA #<MSB5
00931  17A0  A0 1A              LDY #>MSB5
00932  17A2  20 BB 1B           JSR STRPNT
00933  17A5  20 83 1B           JSR CRYS
00934  17A8  B0 04              BCS FOP1
00935  17AA  A9 00              LDA #$00
00936  17AC  F0 02              BEQ FOP2
00937  17AE  A9 FF       FOP1   LDA #$FF
00938  17B0  8D 1C 10    FOP2   STA FOROPT
00939  17B3              ;*********************************
00940  17B3  60                 RTS
00941  17B4              ;*********************************
00942  17B4              ;   COMMAND MESSAGES
00943  17B4              ;*********************************
00944  17B4  0D          MSG    .BYTE $0D,$0D
00944  17B5  0D 
00945  17B6  43 42       .BYTE  'CBM RESIDENT DISASSEMBLER'
00946  17CF  20 56       .BYTE  ' V080282'
00947  17D7  0D          .BYTE  $0D
00948  17D8  28 43       .BYTE  '(C) 1982 BY COMMODORE '
00949  17EE  42 55       .BYTE  'BUSINESS MACHINES'
00950  17FF  0D          .BYTE  $0D
00951  1800  00          .BYTE  0
00952  1801              ;*********************************
00953  1801  0D          MSF1   .BYTE $0D
00954  1802  50 52       .BYTE  'PROGRAM FILE (CR OR NAME):'
00955  181C  00          .BYTE  0
00956  181D  0D          MSF2   .BYTE $0D
00957  181E  50 52       .BYTE  'PROGRAM ADDRESS: $'
00958  1830  00          .BYTE  0
00959  1831              ;*********************************
00960  1831  0D          MSG1   .BYTE $0D
00961  1832  45 44       .BYTE  'EDITOR64 FILE (CR OR NAME):'
00962  184D  00          .BYTE  0
00963  184E              ;*********************************
00964  184E  2C 53       WRITE  .BYTE ',S,W'
00965  1852  2C 50       PROGM  .BYTE ',P,R'
00966  1856  49 30       INIT   .BYTE 'I0'
00967  1858              ;*********************************
00968  1858  0D          MSG2   .BYTE $0D
00969  1859  48 41       .BYTE  'HARD COPY (Y/CR OR N)? '
00970  1870  00          .BYTE  0
00971  1871              ;*********************************
00972  1871  0D          MSD1   .BYTE $0D
00973  1872  53 54       .BYTE  'START ADDRESS :$'
00974  1882  00          .BYTE  0






PDISASS64.ASM......PAGE 0021

LINE# LOC   CODE        LINE


00975  1883              ;*********************************
00976  1883  0D          MSD2   .BYTE $0D
00977  1884  45 4E       .BYTE  'END ADDRESS :$'
00978  1892  00          .BYTE  0
00979  1893              ;*********************************
00980  1893  0D          MSD4   .BYTE $0D
00981  1894  41 44       .BYTE  'ADDRESS OFFSET (OR CR):$'
00982  18AC  00          .BYTE  0
00983  18AD              ;*********************************
00984  18AD  0D          MSD4A  .BYTE $0D
00985  18AE  41 44       .BYTE  'ADDRESS OFFSET :$'
00986  18BF  00          .BYTE  0
00987  18C0              ;*********************************
00988  18C0  0D          MSD5   .BYTE $0D
00989  18C1  57 49       .BYTE  'WINDOW OUTPUT(Y OR N/CR)? '
00990  18DB  00          .BYTE  0
00991  18DC              ;*********************************
00992  18DC  0D          MSR1   .BYTE $0D
00993  18DD  52 45       .BYTE  'RELATIVE BRANCH TO LABEL '
00994  18F6  28 59       .BYTE  '(Y/CR OR N)? '
00995  1903  00          .BYTE  0
00996  1904              ;*********************************
00997  1904  0D          MSB1   .BYTE $0D
00998  1905  42 49              .BYTE 'BIT INSTRUCTION CODING'
00999  191B  0D                 .BYTE $0D,$0D
00999  191C  0D 
01000  191D  30 2F              .BYTE '0/CR STANDARD',$0D
01000  192A  0D 
01001  192B  31 20              .BYTE '1     $2C ABS',$0D
01001  1938  0D 
01002  1939  32 20              .BYTE '2     $24 ZP',$0D
01002  1945  0D 
01003  1946  33 20              .BYTE '3     $2C AND $24',$0D
01003  1957  0D 
01004  1958  0D                 .BYTE $0D
01005  1959  45 4E              .BYTE 'ENTER BIT CODE: '
01006  1969  00                 .BYTE 0
01007  196A              ;*********************************
01008  196A  0D          MSAOP  .BYTE $0D
01009  196B  44 41       .BYTE  'DATA TABLE FILE (CR OR NAME):'
01010  1988  00          .BYTE  0
01011  1989  0D          MSA1   .BYTE $0D
01012  198A  4E 55       .BYTE  'NUMBER OF DATA TABLES (OR CR) :$'
01013  19AA  00          .BYTE  0
01014  19AB  0D          MSA2   .BYTE $0D
01015  19AC  54 41       .BYTE  'TABLE START ADDRESS :$'
01016  19C2  00          .BYTE  0
01017  19C3  0D          MSA3   .BYTE $0D
01018  19C4  54 41       .BYTE  'TABLE END ADDRESS :$'
01019  19D8  00          .BYTE  0
01020  19D9  0D          MSG5   .BYTE $0D,$0D
01020  19DA  0D 
01021  19DB  44 49              .BYTE 'DISASSEMBLY OPTIONS'
01022  19EE  0D                 .BYTE $0D,$0D
01022  19EF  0D 






PDISASS64.ASM......PAGE 0022

LINE# LOC   CODE        LINE


01023  19F0  30 20              .BYTE '0 ASCII',$0D
01023  19F7  0D 
01024  19F8  31 20              .BYTE '1 BYTE',$0D
01024  19FE  0D 
01025  19FF  32 20              .BYTE '2 WORD',$0D
01025  1A05  0D 
01026  1A06  33 20              .BYTE '3 DBYTE',$0D
01026  1A0D  0D 
01027  1A0E  34 20              .BYTE '4 WORD-1',$0D
01027  1A16  0D 
01028  1A17  53 20              .BYTE 'S SKIP ADDRESS RANGE',$0D
01028  1A2B  0D 
01029  1A2C  45 4E              .BYTE 'ENTER DISASSEMBLY CODE: '
01030  1A44  00                 .BYTE 0
01031  1A45              ;*********************************
01032  1A45  0D          MSB4   .BYTE $0D
01033  1A46  4C 41       .BYTE  'LABLE GENERATION (Y/CR OR N)? '
01034  1A64  00          .BYTE  0
01035  1A65              ;*********************************
01036  1A65  0D          MSB5   .BYTE $0D
01037  1A66  46 4F       .BYTE  'FORMATED LISTING (Y/CR OR N)? '
01038  1A84  00          .BYTE  0
01039  1A85              ;*********************************
01040  1A85              ;.FIL 0:UTIL.ASM
01041  1A85              ;*********************************
01042  1A85              ;.END
01043  1A85              ;*********************************
01044  1A85              ; FILE UTIL.ASM
01045  1A85              ;*********************************
01046  1A85              ;
01047  1A85              ;        DISASSEMBLER64
01048  1A85              ;    SYMBOLIC DISASSEMBLER
01049  1A85              ;       BY DENTON MARLOWE
01050  1A85              ;
01051  1A85              ;  (C)1986 BY DENTON MARLOWE
01052  1A85              ;
01053  1A85              ;*********************************
01054  1A85              ;      *** UTILITIES ***
01055  1A85              ;*********************************
01056  1A85              ; CHECK LINE COUNT FOR OUTPUT FILE
01057  1A85              ;*********************************
01058  1A85  AD 12 10    LINECK LDA PASS
01059  1A88  CD 15 10           CMP CPASS
01060  1A8B  D0 36              BNE LINECO
01061  1A8D  AD 19 10           LDA DEVICE
01062  1A90  29 08              AND #$08
01063  1A92  F0 2F              BEQ LINECO
01064  1A94              ;*********************************
01065  1A94              ; CLOSE SOURCE FILE AND OPEN NEXT
01066  1A94              ;*********************************
01067  1A94  38                 SEC
01068  1A95  AD C0 10           LDA LINEFL
01069  1A98  E9 20              SBC #$20
01070  1A9A  8D 51 10           STA TEMP
01071  1A9D  AD C1 10           LDA LINEFL+1






PDISASS64.ASM......PAGE 0023

LINE# LOC   CODE        LINE


01072  1AA0  E9 03              SBC #$03
01073  1AA2  0D 51 10           ORA TEMP
01074  1AA5  90 1C              BCC LINECO
01075  1AA7  EA                 NOP
01076  1AA8  EA                 NOP
01077  1AA9  EA                 NOP
01078  1AAA  20 51 20           JSR EFILE
01079  1AAD  A9 08              LDA #$08
01080  1AAF  20 C3 FF           JSR CLOSE
01081  1AB2  20 A1 15           JSR OFILE
01082  1AB5  A9 00              LDA #$00
01083  1AB7  8D C0 10           STA LINEFL
01084  1ABA  8D C1 10           STA LINEFL+1
01085  1ABD  20 3B 20           JSR ORGIN
01086  1AC0  20 61 20           JSR COMENT
01087  1AC3  60          LINECO RTS
01088  1AC4              ;*********************************
01089  1AC4              ;  DISK ERROR CHECK
01090  1AC4              ;*********************************
01091  1AC4  A9 08       DISERR LDA #$08        ;DEV #8
01092  1AC6  85 BA              STA $BA         ;PUT IN DEV TABLE
01093  1AC8  20 B4 FF           JSR $FFB4       ;SEND TALK
01094  1ACB  A9 6F              LDA #$6F        ;SECONDARY ADDRESS
01095  1ACD  85 B9              STA $B9         ;PUT IN TABLE
01096  1ACF  20 96 FF           JSR $FF96       ;SEND SEC
01097  1AD2  20 A5 FF           JSR $FFA5       ;GET FIRST BYTE
01098  1AD5  C9 30              CMP #$30        ;IS IT A ZERO
01099  1AD7  D0 0C              BNE DLOOC       ;IF NOT ZERO ERROR
01100  1AD9  20 A5 FF    DLOOE  JSR $FFA5       ;GET BYTE
01101  1ADC  C9 0D              CMP #$0D        ;IS IT CR?
01102  1ADE  D0 F9              BNE DLOOE       ;GET NEXT BYTE
01103  1AE0  20 AB FF           JSR $FFAB       ;UNTALK
01104  1AE3  18                 CLC             ;NO ERROR FLAG
01105  1AE4  60                 RTS             ;RETURN
01106  1AE5              ;*********************************
01107  1AE5              ; PRINT DISK ERROR
01108  1AE5              ;*********************************
01109  1AE5  48          DLOOC  PHA             ;STACK BYTE
01110  1AE6  A9 0D              LDA #$0D        ;ASCII CR
01111  1AE8  20 D2 FF           JSR CHROUT      ;PRINT IT
01112  1AEB  68                 PLA             ;GET BYTE
01113  1AEC  20 D2 FF           JSR CHROUT      ;PRINT IT
01114  1AEF  20 A5 FF    DLOOA  JSR $FFA5       ;GET NEXT BYTE
01115  1AF2  20 D2 FF           JSR CHROUT      ;PRINT IT
01116  1AF5  C9 0D              CMP #$0D        ;IS IT CR
01117  1AF7  D0 F6              BNE DLOOA       ;GET NEXT BYTE
01118  1AF9  20 AB FF           JSR $FFAB       ;UNTALK
01119  1AFC  38                 SEC             ;SET ERROR FLAG
01120  1AFD  60                 RTS             ;RETURN
01121  1AFE              ;*********************************
01122  1AFE              ; START NEW LINE AND INC COUNT
01123  1AFE              ;*********************************
01124  1AFE  EE 58 10    NEWLIN INC LINECT
01125  1B01  D0 03              BNE *+5
01126  1B03  EE 59 10           INC LINECT+1






PDISASS64.ASM......PAGE 0024

LINE# LOC   CODE        LINE


01127  1B06  EE C0 10           INC LINEFL
01128  1B09  D0 03              BNE *+5
01129  1B0B  EE C1 10           INC LINEFL+1
01130  1B0E  20 F3 20           JSR CRLF
01131  1B11  AD 19 10           LDA DEVICE
01132  1B14  29 04              AND #$04
01133  1B16  F0 03              BEQ NEWEXT
01134  1B18  20 6D 1C           JSR NEXLIN
01135  1B1B  60          NEWEXT RTS
01136  1B1C              ;*********************************
01137  1B1C              ; INPUT UTILITIES
01138  1B1C              ;*********************************
01139  1B1C              ; INPUT STRING ROUTINE
01140  1B1C              ;*********************************
01141  1B1C  A0 00       INSTNG LDY #$00
01142  1B1E  20 CF FF    INSTN1 JSR CHRIN
01143  1B21  99 5C 10           STA BUF,Y
01144  1B24  C8                 INY
01145  1B25  C9 0D              CMP #$0D
01146  1B27  D0 F5              BNE INSTN1
01147  1B29  88                 DEY
01148  1B2A  60                 RTS
01149  1B2B              ;*********************************
01150  1B2B              ; INPUT HEX CHAR STRING
01151  1B2B              ;*********************************
01152  1B2B  A9 00       GETWRD LDA #$00
01153  1B2D  8D 4F 10           STA ADRS
01154  1B30  8D 50 10           STA ADRS+1
01155  1B33  20 1C 1B           JSR INSTNG
01156  1B36  88                 DEY
01157  1B37  30 15              BMI INEND
01158  1B39              ;*********************************
01159  1B39              ; PROCESS INPUT
01160  1B39              ;*********************************
01161  1B39  20 4F 1B           JSR GETBYT
01162  1B3C  AD 51 10           LDA TEMP
01163  1B3F  8D 4F 10           STA ADRS
01164  1B42  88                 DEY
01165  1B43  30 09              BMI INEND
01166  1B45  20 4F 1B           JSR GETBYT
01167  1B48  AD 51 10           LDA TEMP
01168  1B4B  8D 50 10           STA ADRS+1
01169  1B4E  60          INEND  RTS
01170  1B4F              ;*********************************
01171  1B4F              ; COVERT BUFFER INTO BYTES
01172  1B4F              ;*********************************
01173  1B4F  B9 5C 10    GETBYT LDA BUF,Y
01174  1B52  20 6C 1B           JSR BINARY
01175  1B55  8D 51 10           STA TEMP
01176  1B58  88                 DEY
01177  1B59  30 10              BMI INENX
01178  1B5B  B9 5C 10           LDA BUF,Y
01179  1B5E  20 6C 1B           JSR BINARY
01180  1B61  0A                 ASL A
01181  1B62  0A                 ASL A






PDISASS64.ASM......PAGE 0025

LINE# LOC   CODE        LINE


01182  1B63  0A                 ASL A
01183  1B64  0A                 ASL A
01184  1B65  0D 51 10           ORA TEMP
01185  1B68  8D 51 10           STA TEMP
01186  1B6B  60          INENX  RTS
01187  1B6C              ;*********************************
01188  1B6C              ; CONVERT A INTO HEX NIBBLE
01189  1B6C              ;*********************************
01190  1B6C  38          BINARY SEC
01191  1B6D  E9 30              SBC #'0'
01192  1B6F  90 0E              BCC NOHEX
01193  1B71  C9 0A              CMP #$0A
01194  1B73  90 0C              BCC YSHEX
01195  1B75  E9 07              SBC #$07
01196  1B77  C9 10              CMP #$10
01197  1B79  B0 04              BCS NOHEX
01198  1B7B  C9 0A              CMP #$0A
01199  1B7D  B0 02              BCS YSHEX
01200  1B7F  38          NOHEX  SEC
01201  1B80  60                 RTS
01202  1B81  18          YSHEX  CLC
01203  1B82  60                 RTS
01204  1B83              ;*********************************
01205  1B83              ; GET OPTION (CR/Y OR N): Y=C=0
01206  1B83              ;*********************************
01207  1B83  20 CF FF    CRYS   JSR CHRIN
01208  1B86  C9 59              CMP #'Y'
01209  1B88  F0 11              BEQ CRYS1
01210  1B8A  C9 0D              CMP #$0D
01211  1B8C  F0 0D              BEQ CRYS1
01212  1B8E  D0 0D              BNE CRNO1
01213  1B90              ;*********************************
01214  1B90              ; GET OPTION (Y OR CR/N): Y=C=0
01215  1B90              ;*********************************
01216  1B90  20 CF FF    CRNO   JSR CHRIN
01217  1B93  C9 4E              CMP #'N'
01218  1B95  F0 06              BEQ CRNO1
01219  1B97  C9 0D              CMP #$0D
01220  1B99  F0 02              BEQ CRNO1
01221  1B9B  18          CRYS1  CLC
01222  1B9C  60                 RTS
01223  1B9D  38          CRNO1  SEC
01224  1B9E  60                 RTS
01225  1B9F              ;*********************************
01226  1B9F              ; PRINT UTILITES
01227  1B9F              ;*********************************
01228  1B9F              ; PRINT WORD MSB IN Y LSB IN A
01229  1B9F              ;*********************************
01230  1B9F  48          PRBYTS PHA             ;PUT A ON STACK
01231  1BA0  98                 TYA             ;PUT HIH BYTE IN A
01232  1BA1  20 A5 1B           JSR PRBYT       ;PRINT MSB
01233  1BA4  68                 PLA             ;GET LSB
01234  1BA5              ;*********************************
01235  1BA5              ; PRINT BYTE IN A
01236  1BA5              ;*********************************






PDISASS64.ASM......PAGE 0026

LINE# LOC   CODE        LINE


01237  1BA5  48          PRBYT  PHA             ;PUT BYTE ON STACK
01238  1BA6  4A                 LSR A           ;4 RIGHT SHIFTS
01239  1BA7  4A                 LSR A           ;TO MOVE HIGH
01240  1BA8  4A                 LSR A           ;NIBBLE TO LOW
01241  1BA9  4A                 LSR A           ;NIB WITH HIGH 0'S
01242  1BAA  A8                 TAY             ;USE AS POINTER
01243  1BAB  B9 11 1D           LDA HEXA,Y      ;GET ASCII
01244  1BAE  20 11 1C           JSR PCHAR       ;PRINT
01245  1BB1  68                 PLA             ;PULL BYTE OUT
01246  1BB2  29 0F              AND #$0F        ;MASK HIGH NIBBLE
01247  1BB4  A8                 TAY             ;USE AS POINTER
01248  1BB5  B9 11 1D           LDA HEXA,Y      ;GET ASCII
01249  1BB8  4C 11 1C           JMP PCHAR       ;PRINT
01250  1BBB              ;*********************************
01251  1BBB              ; STRING OUTPUT ROUTINE
01252  1BBB              ;*********************************
01253  1BBB  85 DD       STRPNT STA ZEROUR      ;POINTER TO
01254  1BBD  84 DE              STY ZEROUR+1    ;MESSAGE
01255  1BBF  A0 00              LDY #$00        ;OFFSET
01256  1BC1  B1 DD       SOUT   LDA (ZEROUR),Y  ;GET CHAR
01257  1BC3  F0 06              BEQ SEXIT       ;IF ZERO EXIT
01258  1BC5  20 11 1C           JSR PCHAR       ;PRINT
01259  1BC8  C8                 INY             ;INC OFFSET
01260  1BC9  D0 F6              BNE SOUT        ;LOOP
01261  1BCB  60          SEXIT  RTS             ;RETURN
01262  1BCC              ;*********************************
01263  1BCC              ; PRINT DEC NUMBER (0000)
01264  1BCC              ;*********************************
01265  1BCC  86 DD       PRTPAG STX ZEROUR      ;LOW  BYTE NUM
01266  1BCE  85 DE              STA ZEROUR+1    ;HIGH BYTE NUM
01267  1BD0  A2 03              LDX #$03        ;4 CHARS
01268  1BD2  8E 53 10           STX SAVX        ;SAVE COUNT
01269  1BD5  D0 09              BNE PRTNU1      ;BRANCH
01270  1BD7              ;*********************************
01271  1BD7              ; PRINT DEC NUMBER (00000)
01272  1BD7              ;*********************************
01273  1BD7  86 DD       PRTNUM STX ZEROUR      ;LOW  BYTE NUM
01274  1BD9  85 DE              STA ZEROUR+1    ;HIGH BYTE NUM
01275  1BDB  A2 04              LDX #$04        ;5 CHARS
01276  1BDD  8E 53 10           STX SAVX        ;SAVE COUNT
01277  1BE0              ;*********************************
01278  1BE0              ; PRINT DEC NUMBER AND LEADING 0
01279  1BE0              ;*********************************
01280  1BE0  AE 53 10    PRTNU1 LDX SAVX
01281  1BE3  A0 30              LDY #$30
01282  1BE5  D0 01              BNE PRTNU3
01283  1BE7  C8          PRTNU2 INY 
01284  1BE8  38          PRTNU3 SEC 
01285  1BE9  A5 DD              LDA ZEROUR
01286  1BEB  FD 21 1D           SBC CONST0,X
01287  1BEE  85 DD              STA ZEROUR
01288  1BF0  A5 DE              LDA ZEROUR+1
01289  1BF2  FD 26 1D           SBC CONST1,X
01290  1BF5  85 DE              STA ZEROUR+1
01291  1BF7  B0 EE              BCS PRTNU2






PDISASS64.ASM......PAGE 0027

LINE# LOC   CODE        LINE


01292  1BF9  A5 DD              LDA ZEROUR
01293  1BFB  7D 21 1D           ADC CONST0,X
01294  1BFE  85 DD              STA ZEROUR
01295  1C00  A5 DE              LDA ZEROUR+1
01296  1C02  7D 26 1D           ADC CONST1,X
01297  1C05  85 DE              STA ZEROUR+1
01298  1C07  98                 TYA
01299  1C08  20 11 1C           JSR PCHAR
01300  1C0B  CE 53 10           DEC SAVX
01301  1C0E  10 D0              BPL PRTNU1
01302  1C10  60                 RTS
01303  1C11              ;*********************************
01304  1C11              ;  OUTPUT CHAR TO OPEN CHANNEL
01305  1C11              ;*********************************
01306  1C11  48          PCHAR  PHA             ;SAVE CHAR
01307  1C12  AD 19 10           LDA DEVICE      ;GET FILE FLAG
01308  1C15  29 08              AND #$08        ;CHECK FOR DISK
01309  1C17  F0 0D              BEQ PRIN        ;IF NONE BRANCH
01310  1C19  A2 08              LDX #$08        ;DISK FILE #1
01311  1C1B  20 C9 FF           JSR CHKOUT      ;FILE IS OUTPUT
01312  1C1E  68                 PLA             ;GET CHAR
01313  1C1F  48                 PHA             ;RESAVE CHAR
01314  1C20  20 D2 FF           JSR CHROUT      ;OUTPUT TO DISK
01315  1C23  20 CC FF           JSR CLRCHN      ;RESET OUTPUT
01316  1C26  AD 19 10    PRIN   LDA DEVICE      ;GET DEVICE FLAG
01317  1C29  29 04              AND #$04        ;CHECK FOR PRINTER
01318  1C2B  F0 0D              BEQ SCREN       ;IF NOT BRANCH
01319  1C2D  A2 04              LDX #$04        ;PRINT FILE #4
01320  1C2F  20 C9 FF           JSR CHKOUT      ;FILE IS OUTPUT
01321  1C32  68                 PLA             ;GET CHAR
01322  1C33  48                 PHA             ;RESAVE CHAR
01323  1C34  20 D2 FF           JSR CHROUT      ;OUTPUT TO PRINTER
01324  1C37  20 CC FF           JSR CLRCHN      ;RESET OUTPUT
01325  1C3A  AD 19 10    SCREN  LDA DEVICE      ;GET DEVICE FLAG
01326  1C3D  29 03              AND #$03        ;CHECK FOR SCREEN
01327  1C3F  F0 05              BEQ PEXIT       ;IF NOT BRANCH
01328  1C41  68                 PLA             ;GET CHAR
01329  1C42  48                 PHA             ;RESAVE CHAR
01330  1C43  20 D2 FF           JSR CHROUT      ;OUTPUT TO SCREEN
01331  1C46  68          PEXIT  PLA             ;GET CHAR
01332  1C47  60                 RTS             ;RETURN
01333  1C48              ;*********************************
01334  1C48              ; PRINTER OUTPUT ROUTINES
01335  1C48              ;*********************************
01336  1C48              ; FINISH OUT PAGE WITH CR
01337  1C48              ;*********************************
01338  1C48  20 5B 1C    FINISH JSR CRLFPR      ;PRINT CR
01339  1C4B  EE 57 10           INC LISTCT      ;INC LINE COUNT
01340  1C4E  AD 57 10           LDA LISTCT      ;GET COUNT
01341  1C51  C9 42              CMP #$42        ;66 LINES
01342  1C53  D0 F3              BNE FINISH      ;IF NOT MORE
01343  1C55  A9 00              LDA #$00        ;ZERO BYTE
01344  1C57  8D 57 10           STA LISTCT      ;RESET COUNT
01345  1C5A  60                 RTS             ;RETURN
01346  1C5B              ;*********************************






PDISASS64.ASM......PAGE 0028

LINE# LOC   CODE        LINE


01347  1C5B              ; PRINT CR TO PRINTER
01348  1C5B              ;*********************************
01349  1C5B  A9 04       CRLFPR LDA #$04        ;DEVICE #4
01350  1C5D  8D 19 10           STA DEVICE      ;SET PRINTER
01351  1C60  20 F3 20           JSR CRLF        ;CR
01352  1C63  AD 1A 10           LDA OUTPUT      ;GET DEVICE
01353  1C66  8D 19 10           STA DEVICE      ;RESET DEVICE
01354  1C69  60                 RTS             ;RETURN
01355  1C6A              ;*********************************
01356  1C6A              ; START NEWLINE AND CHECK COUNT
01357  1C6A              ;*********************************
01358  1C6A  20 5B 1C    NEXPTR JSR CRLFPR      ;PRINT CR
01359  1C6D  EE 57 10    NEXLIN INC LISTCT      ;INC LINE COUNT
01360  1C70  AD 57 10           LDA LISTCT      ;GET COUNT
01361  1C73  C9 3C              CMP #$3C        ;48 LINES
01362  1C75  D0 45              BNE LINEOK      ;IF NOT BRANCH
01363  1C77  20 48 1C           JSR FINISH      ;FINISH PAGE
01364  1C7A              ;*********************************
01365  1C7A              ; START NEW PAGE WITH HEADING
01366  1C7A              ;*********************************
01367  1C7A  AD 19 10    HEADER LDA DEVICE      ;CHECK DEVICE
01368  1C7D  29 04              AND #$04        ;PRINTER?
01369  1C7F  F0 3B              BEQ LINEOK      ;IF NOT EXIT
01370  1C81  20 6A 1C           JSR NEXPTR      ;NEXT LINE
01371  1C84  A9 04              LDA #$04        ;DEVICE #4
01372  1C86  8D 19 10           STA DEVICE      ;SET DEVICE
01373  1C89  A9 2B              LDA #<XTITLE    ;HEADER
01374  1C8B  A0 1D              LDY #>XTITLE    ;
01375  1C8D  20 BB 1B           JSR STRPNT      ;PRINT IT
01376  1C90              ;*********************************
01377  1C90              ; PRINT PAGE COUNT AND HEADER
01378  1C90              ;*********************************
01379  1C90  AE 55 10           LDX PAGECT
01380  1C93  AD 56 10           LDA PAGECT+1
01381  1C96  20 CC 1B           JSR PRTPAG
01382  1C99  20 6A 1C           JSR NEXPTR
01383  1C9C  20 6A 1C           JSR NEXPTR
01384  1C9F  A9 04              LDA #$04
01385  1CA1  8D 19 10           STA DEVICE
01386  1CA4  A9 46              LDA #<LTITLE
01387  1CA6  A0 1D              LDY #>LTITLE
01388  1CA8  20 BB 1B           JSR STRPNT
01389  1CAB  20 6A 1C           JSR NEXPTR
01390  1CAE              ;*********************************
01391  1CAE              ; INC PAGE COUNT
01392  1CAE              ;*********************************
01393  1CAE  EE 55 10           INC PAGECT
01394  1CB1  D0 03              BNE PAGER1
01395  1CB3  EE 56 10           INC PAGECT+1
01396  1CB6  20 6A 1C    PAGER1 JSR NEXPTR
01397  1CB9  20 6A 1C           JSR NEXPTR
01398  1CBC  60          LINEOK RTS 
01399  1CBD              ;*********************************
01400  1CBD              ; SYMBOL TABLE ROUTINES
01401  1CBD              ;*********************************






PDISASS64.ASM......PAGE 0029

LINE# LOC   CODE        LINE


01402  1CBD              ; START NEWLINE AND CHECK COUNT
01403  1CBD              ;*********************************
01404  1CBD  20 5B 1C    NEXPTS JSR CRLFPR      ;PRINT CR
01405  1CC0  EE 57 10           INC LISTCT      ;INC LINE COUNT
01406  1CC3  AD 57 10           LDA LISTCT      ;GET COUNT
01407  1CC6  C9 3C              CMP #$3C        ;48 LINES
01408  1CC8  D0 1D              BNE HEADOK      ;IF NOT BRANCH
01409  1CCA  20 48 1C           JSR FINISH      ;FINISH PAGE
01410  1CCD              ;*********************************
01411  1CCD              ; START NEW PAGE WITH HEADING
01412  1CCD              ;*********************************
01413  1CCD  20 BD 1C    HEADES JSR NEXPTS      ;NEXT LINE
01414  1CD0  A9 63              LDA #<XTITLS    ;HEADER
01415  1CD2  A0 1D              LDY #>XTITLS    ;
01416  1CD4  20 BB 1B           JSR STRPNT      ;PRINT IT
01417  1CD7  20 BD 1C           JSR NEXPTS
01418  1CDA  20 BD 1C           JSR NEXPTS
01419  1CDD  A9 70              LDA #<LTITLS
01420  1CDF  A0 1D              LDY #>LTITLS
01421  1CE1  20 BB 1B           JSR STRPNT
01422  1CE4  20 BD 1C           JSR NEXPTS
01423  1CE7  60          HEADOK RTS
01424  1CE8              ;*********************************
01425  1CE8              ; CHECK FOR NEW PAGE FOR SYMBOL
01426  1CE8              ;*********************************
01427  1CE8  AD 57 10    HEADSY LDA LISTCT
01428  1CEB  C9 35              CMP #$35
01429  1CED  B0 06              BCS HEADFX
01430  1CEF  20 BD 1C           JSR NEXPTS
01431  1CF2  4C BD 1C           JMP NEXPTS
01432  1CF5  4C 48 1C    HEADFX JMP FINISH
01433  1CF8              ;*********************************
01434  1CF8              ; SCREEN UTILITES
01435  1CF8              ;*********************************
01436  1CF8  AD 19 10    SCROFF LDA DEVICE
01437  1CFB  29 04              AND #$04
01438  1CFD  F0 08              BEQ SCRNO1
01439  1CFF  AD 11 D0           LDA VICREG
01440  1D02  29 EF              AND #$EF
01441  1D04  8D 11 D0           STA VICREG
01442  1D07  60          SCRNO1 RTS
01443  1D08              ;*********************************
01444  1D08  AD 11 D0    SCRON  LDA VICREG
01445  1D0B  09 10              ORA #$10
01446  1D0D  8D 11 D0           STA VICREG
01447  1D10  60                 RTS
01448  1D11              ;*********************************
01449  1D11              ; HEX-TO-ASCII TABLE
01450  1D11              ;*********************************
01451  1D11  30 31       HEXA   .BYTE '0123456789ABCDEF'
01452  1D21              ;*********************************
01453  1D21              ; CONSTANTS FOR PRTNUM ROUTINE
01454  1D21              ;*********************************
01455  1D21  01          CONST0 .BYTE $01,$0A,$64,$E8,$10
01455  1D22  0A 






PDISASS64.ASM......PAGE 0030

LINE# LOC   CODE        LINE


01455  1D23  64 
01455  1D24  E8 
01455  1D25  10 
01456  1D26  00          CONST1 .BYTE $00,$00,$00,$03,$27
01456  1D27  00 
01456  1D28  00 
01456  1D29  03 
01456  1D2A  27 
01457  1D2B              ;*********************************
01458  1D2B              ; PAGE TITLE
01459  1D2B              ;*********************************
01460  1D2B  44 49       XTITLE .BYTE 'DISASSEMBLER64.......PAGE '
01461  1D45  00                 .BYTE $00
01462  1D46  4C 49       LTITLE .BYTE 'LINE# LOC   CODE        LINE'
01463  1D62  00                 .BYTE $00
01464  1D63              ;********************************
01465  1D63              ; SYMBOL PAGE TITLE
01466  1D63              ;********************************
01467  1D63  53 59       XTITLS .BYTE 'SYMBOL TABLE',0
01467  1D6F  00 
01468  1D70  53 59       LTITLS .BYTE 'SYMBOL VALUE',0
01468  1D7C  00 
01469  1D7D              ;*********************************
01470  1D7D              ;.FIL 0:MODE.ASM
01471  1D7D              ;*********************************
01472  1D7D              ;.END
01473  1D7D              ;*********************************
01474  1D7D              ; FILE MODE.ASM
01475  1D7D              ;*********************************
01476  1D7D              ;
01477  1D7D              ;        DISASSEMBLER64
01478  1D7D              ;    SYMBOLIC DISASSEMBLER
01479  1D7D              ;       BY DENTON MARLOWE
01480  1D7D              ;
01481  1D7D              ;  (C)1986 BY DENTON MARLOWE
01482  1D7D              ;
01483  1D7D              ;*********************************
01484  1D7D              ; ADDRESSING MODE UTILITIES
01485  1D7D              ;*********************************
01486  1D7D              ;      DISASSEMBLE ONE LINE
01487  1D7D              ;*********************************
01488  1D7D  20 A9 24    DSLINE JSR DATAOP      ;CHECK FOR DATA
01489  1D80  30 3D              BMI BYTT        ;N=1 THEN FOUND
01490  1D82              ;*********************************
01491  1D82              ; CHECK BIT ZP DECODING OPTIONS
01492  1D82              ;*********************************
01493  1D82  AD 6F 37           LDA BITFLG      ;CHECK BIT FLAG
01494  1D85  F0 0D              BEQ DISL        ;IF ZERO NO BIT
01495  1D87                     
01496  1D87  20 2C 21           JSR GETSL       ;GET BYTE
01497  1D8A  C9 24              CMP #$24        ;ZEROPAGE BIT
01498  1D8C  F0 34              BEQ BYZBIT      ;
01499  1D8E  C9 2C              CMP #$2C        ;ZEROPAGE BIT
01500  1D90  F0 55              BEQ BYABIT      ;
01501  1D92  D0 00              BNE DISL        ;






PDISASS64.ASM......PAGE 0031

LINE# LOC   CODE        LINE


01502  1D94              ;*********************************
01503  1D94              ; CHECK BIT ABS DECODING OPTIONS
01504  1D94              ;*********************************
01505  1D94              
01506  1D94              ;********************************
01507  1D94              ; PROCESS LINE OF CODE
01508  1D94              ;********************************
01509  1D94              DISL   = *
01510  1D94  20 2C 21           JSR GETSL       ;GET BYTE
01511  1D97  AE 12 10           LDX PASS        ;GET PASS COUNT
01512  1D9A  EC 15 10           CPX CPASS       ;LAST
01513  1D9D  F0 06              BEQ DISL1       ;IF LAST BRANCH
01514  1D9F  20 71 27           JSR OPERN1      ;IF LAST BRANCH
01515  1DA2  4C BF 1D           JMP BYTT        ;NEXT INSTRUCTION
01516  1DA5              ;********************************
01517  1DA5              ; PRINT DISASSEMBLY ADDRESS
01518  1DA5              ;********************************
01519  1DA5  20 64 27    DISL1  JSR PRTASS      ;PRINT LINE DATA
01520  1DA8  20 8A 20           JSR PRAD        ;PRINT ADDRESS
01521  1DAB  20 05 21           JSR SPACE       ;SPACE OVER
01522  1DAE              ;********************************
01523  1DAE              ; PRINT INSTRUCTION
01524  1DAE              ;********************************
01525  1DAE  20 2C 21           JSR GETSL       ;GET BYTE
01526  1DB1  48                 PHA             ;STORE
01527  1DB2  20 45 27           JSR MNEMON      ;PRINT MNEMONIC
01528  1DB5  20 05 21           JSR SPACE       ;SPACE OVER
01529  1DB8  68                 PLA             ;GET BYTE
01530  1DB9  20 79 27           JSR OPERND      ;PRINT OPERAND
01531  1DBC  20 FE 1A    FINAL  JSR NEWLIN      ;START NEW LINE
01532  1DBF  4C 0A 21    BYTT   JMP NEXTSL      ;NEXT INSTRUCTION
01533  1DC2              ;********************************
01534  1DC2              ;      BIT ZP SKIP TRICK
01535  1DC2              ;
01536  1DC2              ; THE SKIP WILL ALWAYS INVOLVE
01537  1DC2              ; A FOLLWING OPCODE THAT IS EITHER
01538  1DC2              ; AN OPCODE WITH NO OPERAND OR
01539  1DC2              ; OR ONE BYTE OPERAND LIKE A BRANCH
01540  1DC2              ; OR ZERO PAGE INSTRUCTION
01541  1DC2              ;*********************************
01542  1DC2              BYZBIT = *
01543  1DC2  AD 6F 37           LDA BITFLG
01544  1DC5  29 02              AND #$02
01545  1DC7  F0 CB              BEQ DISL
01546  1DC9              ;********************************
01547  1DC9              ;      TO SKIP OR NOT
01548  1DC9              ;*********************************
01549  1DC9  20 23 21           JSR INCSL       ;INC TO OPERAND
01550  1DCC  20 2C 21           JSR GETSL       ;GET OPERAND
01551  1DCF  48                 PHA
01552  1DD0  20 42 21           JSR DECSL
01553  1DD3  68                 PLA
01554  1DD4                                     ;CHECK FOR SKIP
01555  1DD4  C9 10              CMP #$10        ;BPL SKIP
01556  1DD6  F0 40              BEQ B0000






PDISASS64.ASM......PAGE 0032

LINE# LOC   CODE        LINE


01557  1DD8  C9 18              CMP #$18        ;CLC SKIP
01558  1DDA  F0 3C              BEQ B0000
01559  1DDC  C9 30              CMP #$30        ;BMI
01560  1DDE  F0 38              BEQ B0000
01561  1DE0  C9 38              CMP #$38        ;SEC
01562  1DE2  F0 34              BEQ B0000
01563  1DE4              ;
01564  1DE4  4C 94 1D           JMP DISL
01565  1DE7              ;********************************
01566  1DE7              ;      BIT ABS SKIP TRICK
01567  1DE7              ;*********************************
01568  1DE7              BYABIT = *
01569  1DE7  AD 6F 37           LDA BITFLG
01570  1DEA  29 01              AND #$01
01571  1DEC  F0 A6              BEQ DISL
01572  1DEE              ;********************************
01573  1DEE              ;      TO SKIP OR NOT
01574  1DEE              ;*********************************
01575  1DEE  20 23 21           JSR INCSL       ;INC TO OPERAND
01576  1DF1  20 2C 21           JSR GETSL       ;GET OPERAND
01577  1DF4  48                 PHA
01578  1DF5  20 42 21           JSR DECSL
01579  1DF8  68                 PLA
01580  1DF9                                     ;CHECK FOR SKIP
01581  1DF9  C9 A1              CMP #$A1        ;LDY A IMMEDIATE SKIP
01582  1DFB  F0 1B              BEQ B0000
01583  1DFD  C9 A2              CMP #$A2        ;LDA A IMMEDIATE SKIP
01584  1DFF  F0 17              BEQ B0000
01585  1E01  C9 A9              CMP #$A9        ;LDX A IMMEDIATE SKIP
01586  1E03  F0 13              BEQ B0000
01587  1E05                     
01588  1E05  C9 65              CMP #$65        ;ADC ZP
01589  1E07  F0 0F              BEQ B0000
01590  1E09                     
01591  1E09  C9 85              CMP #$85        ;STA ZP
01592  1E0B  F0 0B              BEQ B0000
01593  1E0D                     
01594  1E0D  C9 B1              CMP #$B1        ;LDA (ZP),Y
01595  1E0F  F0 07              BEQ B0000
01596  1E11                     
01597  1E11  C9 E6              CMP #$E6        ;INC
01598  1E13  F0 03              BEQ B0000
01599  1E15              ;
01600  1E15  4C 94 1D           JMP DISL
01601  1E18              ;********************************
01602  1E18              ;      PRINTING PASS?
01603  1E18              ;*********************************
01604  1E18              B0000  = *
01605  1E18  AD 12 10           LDA PASS        ;GET PASS COUNT
01606  1E1B  CD 15 10           CMP CPASS       ;LAST
01607  1E1E  D0 9F              BNE BYTT        ;IF NOT NEXT BYTE
01608  1E20              ;*********************************
01609  1E20              ;  PRINT LINE DATA FOR .BYTE
01610  1E20              ;*********************************
01611  1E20  20 61 20           JSR COMENT      ;COMENT LINE






PDISASS64.ASM......PAGE 0033

LINE# LOC   CODE        LINE


01612  1E23              ;
01613  1E23  20 05 22           JSR PRTDAT      ;PRINT LINE DATA
01614  1E26  20 92 21           JSR PRTONE      ;ONE BYTE
01615  1E29  20 8A 20           JSR PRAD        ;PRINT ADDRESS
01616  1E2C  20 05 21           JSR SPACE       ;SPACE OVER
01617  1E2F  A9 5B              LDA #<MSGBIT    ;.BYTE $
01618  1E31  A0 21              LDY #>MSGBIT    ;
01619  1E33  20 BB 1B           JSR STRPNT      ;PRINT IT
01620  1E36              ;
01621  1E36  20 2C 21           JSR GETSL       ;GET BYTE
01622  1E39  20 A5 1B           JSR PRBYT       ;PRINT BYTE
01623  1E3C              ;
01624  1E3C  A9 63              LDA #<MSGBZP    ;BIT COMMENT
01625  1E3E  A0 21              LDY #>MSGBZP    ;
01626  1E40  20 BB 1B           JSR STRPNT      ;PRINT IT
01627  1E43              ;
01628  1E43  20 FE 1A           JSR NEWLIN      ;PRINT BYTE
01629  1E46                                     ;JSR INCSL    ;INC SELECT
01630  1E46  20 67 20           JSR COMET       ;COMENT LINE
01631  1E49                                     ;JSR DECSL    ;REASET SELE
CT
01632  1E49  4C BC 1D           JMP FINAL       ;CR AND NEXT BYTE
01633  1E4C              ;*********************************
01634  1E4C              ;BYTEXT JMP DISL1
01635  1E4C              ;*********************************
01636  1E4C              ; ADDRESSING MODE UTILITIES
01637  1E4C              ;*********************************
01638  1E4C              ;
01639  1E4C              ;*********************************
01640  1E4C              ; ANALYSIS OPERAND ROUTINES
01641  1E4C              ;*********************************
01642  1E4C              ;    BIT ZP ONE-BYTE OPERAND
01643  1E4C              ; ZERO PAGE BIT IS ALMOST ALWAYS
01644  1E4C              ;   A BIT TRICK TO SKIP THE NEXT
01645  1E4C              ;          OPCODE
01646  1E4C              ;********************************
01647  1E4C  EA          ONEBIT NOP
01648  1E4D              ;*********************************
01649  1E4D              ;      ONE-BYTE OPERAND
01650  1E4D              ;********************************
01651  1E4D  20 23 21    ONEBYT JSR INCSL       ;INC TO BYTE
01652  1E50  20 2C 21           JSR GETSL       ;GET BYTE
01653  1E53  8D 45 10           STA WORKED      ;STORE OPERAND
01654  1E56  A9 00              LDA #$00        ;ZERO BYTE
01655  1E58  8D 46 10           STA WORKED+1    ;ZERO HIGH BYTE
01656  1E5B  AD 12 10           LDA PASS        ;GET PASS COUNT
01657  1E5E  CD 13 10           CMP IPASS       ;INTERNAL
01658  1E61  F0 54              BEQ OPCPUT      ;TABLE OPERAND
01659  1E63  CD 14 10           CMP EPASS       ;EXTERNAL
01660  1E66  F0 52              BEQ OPCSYM      ;EXTERNAL EQUATE
01661  1E68              ;*********************************
01662  1E68              ; OUTPUT OPERAND
01663  1E68              ;*********************************
01664  1E68  20 5C 2B           JSR SYMOP       ;CHECK FOR SYMBOL
01665  1E6B  B0 50              BCS TWOB        ;SYMBOL FOUND
01666  1E6D  20 3C 22           JSR RANGE       ;IS IT INTERNAL






PDISASS64.ASM......PAGE 0034

LINE# LOC   CODE        LINE


01667  1E70  90 06              BCC ONEBY       ;GENERATE LABEL
01668  1E72  20 D0 20           JSR DOLLAR      ;EXTERNAL
01669  1E75  4C 7B 1E           JMP ONEBX       ;PRINT ADDRESS
01670  1E78  20 80 20    ONEBY  JSR PRLA        ;PRINT XX
01671  1E7B  AD 45 10    ONEBX  LDA WORKED      ;GET OPERAND
01672  1E7E  4C A5 1B           JMP PRBYT       ;PRINT BYTE
01673  1E81              ;********************************
01674  1E81              ;      BIT ABS TWO-BYTE OPERAND
01675  1E81              ;********************************
01676  1E81  EA          TWOBIT NOP
01677  1E82              ;********************************
01678  1E82              ;      TWO-BYTE OPERAND
01679  1E82              ;********************************
01680  1E82  20 23 21    TWOBYT JSR INCSL       ;INC TO BYTE
01681  1E85  20 2C 21           JSR GETSL       ;GET BYTE
01682  1E88  8D 45 10           STA WORKED      ;STORE LOW BYTE
01683  1E8B  20 23 21           JSR INCSL       ;INC TO BYTE
01684  1E8E  20 2C 21           JSR GETSL       ;GET BYTE
01685  1E91  8D 46 10           STA WORKED+1    ;STORE HIGH BYTE
01686  1E94  AD 12 10           LDA PASS        ;GET PASS COUNT
01687  1E97  CD 13 10           CMP IPASS       ;INTERNAL
01688  1E9A  F0 1B              BEQ OPCPUT      ;TABLE OPERNAD
01689  1E9C  CD 14 10           CMP EPASS       ;EXTERNAL
01690  1E9F  F0 19              BEQ OPCSYM      ;EXTERNAL EQUATE
01691  1EA1              ;********************************
01692  1EA1              ;  OUTPUT OPERAND
01693  1EA1              ;********************************
01694  1EA1  20 5C 2B           JSR SYMOP       ;CHECK SYMBOL
01695  1EA4  B0 17              BCS TWOB        ;C=1 FOUND ONE
01696  1EA6  20 3C 22           JSR RANGE       ;IS IT INTERNAL
01697  1EA9  90 06              BCC TWOBY       ;GERNERATE LABEL
01698  1EAB  20 D0 20           JSR DOLLAR      ;EXTERNAL
01699  1EAE  4C B4 1E           JMP TWOBX       ;
01700  1EB1              ;********************************
01701  1EB1              ;  OUTPUT OPERAND
01702  1EB1              ;********************************
01703  1EB1              TWOBY  =*
01704  1EB1  20 80 20           JSR PRLA        ;PRINT XX
01705  1EB4              TWOBX  = *
01706  1EB4  4C C2 20           JMP PWORKD      ;PRINT ADDRESS
01707  1EB7              OPCPUT = *
01708  1EB7  4C B3 22           JMP PUTI        ;PUT IN TABLE
01709  1EBA              OPCSYM = *
01710  1EBA  4C 5C 2B           JMP SYMOP       ;CHECK EXT EQUATE
01711  1EBD              TWOB   = *
01712  1EBD  60                 RTS             ;RETURN
01713  1EBE              ;*********************************
01714  1EBE              ; ILLEGAL MODES, UNUSED OPCODES
01715  1EBE              ;
01716  1EBE              ; ZZZZ XX .BYTE $XX ;'Y' ;??? ILLEGAL OPCODE
01717  1EBE              ;
01718  1EBE              ;*********************************
01719  1EBE  EE 5A 10    ILLEGL INC ERRCT       ;INC ERROR COUNT
01720  1EC1  D0 03              BNE *+5         ;SKIP NEXT LINE
01721  1EC3  EE 5B 10           INC ERRCT+1     ;INC ERROR COUNT






PDISASS64.ASM......PAGE 0035

LINE# LOC   CODE        LINE


01722  1EC6  A0 27              LDY #>MBYTE     ;.BYTE
01723  1EC8  A9 2C              LDA #<MBYTE     ;
01724  1ECA  20 BB 1B           JSR STRPNT      ;PRINT STRING
01725  1ECD  20 D0 20           JSR DOLLAR      ;PRINT $
01726  1ED0  20 2C 21           JSR GETSL       ;GET ILLEGAL BYTE
01727  1ED3                     
01728  1ED3              ;BEGIN REV 2017-3
01729  1ED3  48                 PHA             ;PUT BYTE ON STACK
01730  1ED4              ;
01731  1ED4  20 A5 1B           JSR PRBYT       ;PRINT IT
01732  1ED7  20 05 21           JSR SPACE       ;SPACE OVER
01733  1EDA              ;
01734  1EDA  68                 PLA             ;POP BYTE OFF STACK
01735  1EDB  20 34 26           JSR CASCII      ;IS IT PRINTABLE ASCII
01736  1EDE  B0 18              BCS ISKIP       ;IF NOT EXIT
01737  1EE0  48                 PHA             ;STACK IT
01738  1EE1  20 05 21           JSR SPACE       ;SPACE OVER
01739  1EE4  20 CB 20           JSR SEMIC       ;COMMENT
01740  1EE7  A9 27              LDA #'''        ;QUOTE
01741  1EE9  20 11 1C           JSR PCHAR       ;PRINT IT
01742  1EEC  68                 PLA             ;POP IT
01743  1EED  20 11 1C           JSR PCHAR       ;PRINT IT
01744  1EF0  A9 27              LDA #'''        ;QUOTE
01745  1EF2  20 11 1C           JSR PCHAR       ;PRINT IT
01746  1EF5  20 05 21           JSR SPACE       ;SPACE OVER
01747  1EF8              ;
01748  1EF8              ISKIP  = *
01749  1EF8              ;END REV 2017-3
01750  1EF8  A0 21              LDY #>ILLMSG
01751  1EFA  A9 7E              LDA #<ILLMSG
01752  1EFC  4C BB 1B           JMP STRPNT
01753  1EFF              ;********************************
01754  1EFF              ;      ACCUMULATOR MODE
01755  1EFF              ;********************************
01756  1EFF  A9 41       ACC    LDA #'A'        ;ASCII A
01757  1F01  4C 11 1C           JMP PCHAR       ;PRINT IT
01758  1F04              ;********************************
01759  1F04              ;       IMMEDIATE MODE
01760  1F04              ;********************************
01761  1F04  20 23 21    IMMEDT JSR INCSL       ;INC TO DATA BYTE
01762  1F07  AE 12 10           LDX PASS        ;GET PASS
01763  1F0A  EC 15 10           CPX CPASS       ;LAST PASS
01764  1F0D  D0 2A              BNE IMEXIT      ;EXIT
01765  1F0F  A9 23              LDA #'#'        ;ASCII #
01766  1F11  20 11 1C           JSR PCHAR       ;PRINT IT
01767  1F14  20 D0 20           JSR DOLLAR      ;PRINT $
01768  1F17  20 2C 21           JSR GETSL       ;GET BYTE
01769  1F1A  48                 PHA             ;STACK IT
01770  1F1B  20 A5 1B           JSR PRBYT       ;PRINT IT
01771  1F1E  68                 PLA             ;POP IT
01772  1F1F  20 34 26           JSR CASCII      ;PRINTABLE ASCII
01773  1F22  B0 15              BCS IMEXIT      ;IF NOT EXIT
01774  1F24  48                 PHA             ;STACK IT
01775  1F25  20 F8 20           JSR SPAC6       ;SPACE OVER
01776  1F28  20 CB 20           JSR SEMIC       ;COMMENT






PDISASS64.ASM......PAGE 0036

LINE# LOC   CODE        LINE


01777  1F2B  A9 27              LDA #'''        ;QUOTE
01778  1F2D  20 11 1C           JSR PCHAR       ;PRINT IT
01779  1F30  68                 PLA             ;POP IT
01780  1F31  20 11 1C           JSR PCHAR       ;PRINT IT
01781  1F34  A9 27              LDA #'''        ;QUOTE
01782  1F36  20 11 1C           JSR PCHAR       ;PRINT IT
01783  1F39  60          IMEXIT RTS             ;EXIT
01784  1F3A              ;*********************************
01785  1F3A              ;      BIT ZERO PAGE MODE
01786  1F3A              ;*********************************
01787  1F3A  EA          ZERBIT NOP
01788  1F3B              ;*********************************
01789  1F3B              ;      ZERO PAGE MODE
01790  1F3B              ;*********************************
01791  1F3B  4C 4D 1E    ZEROPG JMP ONEBYT      ;PRINT ONE BYTE
01792  1F3E              ;*********************************
01793  1F3E              ;      ZERO PAGE,X MODE
01794  1F3E              ;********************************
01795  1F3E  20 4D 1E    ZEROX  JSR ONEBYT      ;PRINT ONE BYTE
01796  1F41  4C DF 20           JMP XINDEX      ;PRINT ,X
01797  1F44              ;********************************
01798  1F44              ;       ZERO PAGE,Y MODE
01799  1F44              ;********************************
01800  1F44  20 4D 1E    ZEROY  JSR ONEBYT      ;PRINT ONE BYTE
01801  1F47  4C E9 20           JMP YINDEX      ;PRINT ,Y
01802  1F4A              ;*********************************
01803  1F4A              ;         BIT ABSOLUTE MODE
01804  1F4A              ;*********************************
01805  1F4A  EA          ABSBIT NOP
01806  1F4B              ;*********************************
01807  1F4B              ;         ABSOLUTE MODE
01808  1F4B              ;*********************************
01809  1F4B  20 82 1E    ABSLUT JSR TWOBYT      ;PRINT TWO BYTE
01810  1F4E  20 42 21           JSR DECSL       ;DEC TO SECOND
01811  1F51  20 42 21           JSR DECSL       ;DEC TO OPCODE
01812  1F54  20 2C 21           JSR GETSL       ;GET BYTE
01813  1F57  48                 PHA
01814  1F58  20 23 21           JSR INCSL
01815  1F5B  20 23 21           JSR INCSL
01816  1F5E  68                 PLA
01817  1F5F  C9 4C              CMP #$4C        ;IS IT JMP
01818  1F61  D0 0C              BNE ABSEXT      ;IF NOT EXIT
01819  1F63  20 FE 1A           JSR NEWLIN      ;NEXT LINE
01820  1F66  20 23 21           JSR INCSL
01821  1F69  20 67 20           JSR COMET       ;COMMENT LINE
01822  1F6C  20 42 21           JSR DECSL
01823  1F6F  60          ABSEXT RTS             ;RETURN
01824  1F70              ;*********************************
01825  1F70              ;       ABSOLUTE,X MODE
01826  1F70              ;********************************
01827  1F70  20 82 1E    ABSX   JSR TWOBYT      ;PRINT TWO BYTE
01828  1F73  4C DF 20           JMP XINDEX      ;PRINT ,X
01829  1F76              ;********************************
01830  1F76              ;       ABSOLUTE,Y MODE
01831  1F76              ;********************************






PDISASS64.ASM......PAGE 0037

LINE# LOC   CODE        LINE


01832  1F76  20 82 1E    ABSY   JSR TWOBYT      ;PRINT TWO BYTE
01833  1F79  4C E9 20           JMP YINDEX      ;PRINT ,Y
01834  1F7C              ;********************************
01835  1F7C              ;       IMPLIED MODE
01836  1F7C              ;********************************
01837  1F7C  20 2C 21    IMPLID JSR GETSL       ;GET BYTE
01838  1F7F  F0 09              BEQ IMPLI1      ;BRK
01839  1F81  C9 60              CMP #$60        ;CHECK CODE
01840  1F83  F0 05              BEQ IMPLI1      ;RTS
01841  1F85  C9 40              CMP #$40        ;CHECK CODE
01842  1F87  F0 01              BEQ IMPLI1      ;RTI
01843  1F89  60          IMPONE RTS             ;RETURN
01844  1F8A  20 FE 1A    IMPLI1 JSR NEWLIN      ;PRINT NEW LINE
01845  1F8D  20 23 21           JSR INCSL
01846  1F90  20 67 20           JSR COMET       ;COMMENT LINE
01847  1F93  4C 42 21           JMP DECSL
01848  1F96              ;********************************
01849  1F96              ;       INDIRECT MODE
01850  1F96              ;********************************
01851  1F96  20 D5 20    INDRCT JSR LPAREN      ;PRINT (
01852  1F99  20 82 1E           JSR TWOBYT      ;PRINT TWO BYTE
01853  1F9C  20 DA 20           JSR RPAREN      ;PRINT )
01854  1F9F  20 FE 1A           JSR NEWLIN      ;NEXT LINE
01855  1FA2  20 23 21           JSR INCSL
01856  1FA5  20 67 20           JSR COMET       ;COMMENT LINE
01857  1FA8  4C 42 21           JMP DECSL
01858  1FAB              ;********************************
01859  1FAB              ;     INDIRECT,X MODE
01860  1FAB              ;********************************
01861  1FAB  20 D5 20    INDX   JSR LPAREN      ;PRINT (
01862  1FAE  20 3E 1F           JSR ZEROX       ;PRINT $HH,X
01863  1FB1  4C DA 20           JMP RPAREN      ;PRINT )
01864  1FB4              ;********************************
01865  1FB4              ;     INDIRECT,Y MODE
01866  1FB4              ;********************************
01867  1FB4  20 D5 20    INDY   JSR LPAREN      ;PRINT (
01868  1FB7  20 4D 1E           JSR ONEBYT      ;PRINT ONE BYTE
01869  1FBA  20 DA 20           JSR RPAREN      ;PRINT )
01870  1FBD  4C E9 20           JMP YINDEX      ;PRINT ,Y
01871  1FC0              ;*********************************
01872  1FC0              ;      RELATIVE MODE
01873  1FC0              ;*********************************
01874  1FC0  20 23 21    RELATV JSR INCSL       ;INC BYTE POINTER
01875  1FC3  AD 12 10           LDA PASS        ;GET PASS COUNT
01876  1FC6  CD 14 10           CMP EPASS       ;EXTERNAL
01877  1FC9  F0 44              BEQ RELSYM      ;EXIT ON EXTERNAL
01878  1FCB              ;
01879  1FCB  AD 22 10           LDA SELECT      ;GET LOW POINTER
01880  1FCE  8D 45 10           STA WORKED      ;STORE TEMP
01881  1FD1  AD 23 10           LDA SELECT+1    ;GET HIGH POINTER
01882  1FD4  8D 46 10           STA WORKED+1    ;STORE TEMP
01883  1FD7  EE 45 10           INC WORKED      ;ADD 1 TO ADDRESS
01884  1FDA  D0 03              BNE *+5         ;ZERO MEANS CARRY
01885  1FDC  EE 46 10           INC WORKED+1    ;INC HIGH ADDRESS
01886  1FDF              ;






PDISASS64.ASM......PAGE 0038

LINE# LOC   CODE        LINE


01887  1FDF  20 2C 21           JSR GETSL       ;GET BYTE BRANCH OFFSET
01888  1FE2  C9 00              CMP #$00        ;IS IT ZERO
01889  1FE4  10 03              BPL FORWRD      ;IF SO BRANCH
01890  1FE6  CE 46 10           DEC WORKED+1    ;DEC HIGH POINTER
01891  1FE9  18          FORWRD CLC             ;CLEAR CARRY FLAG
01892  1FEA  6D 45 10           ADC WORKED      ;ADD IN OPERAND
01893  1FED  90 03              BCC RELND       ;TO SELECT ADDRES
01894  1FEF  EE 46 10           INC WORKED+1    ;AND NOW POINTS
01895  1FF2  8D 45 10    RELND  STA WORKED      ;TARGET ADDRESS
01896  1FF5              ;
01897  1FF5  AD 12 10           LDA PASS        ;GET PASS COUNT
01898  1FF8  CD 13 10           CMP IPASS       ;INTERNAL
01899  1FFB  F0 0F              BEQ RELPUT      ;ADDRESS TABLE
01900  1FFD              ;
01901  1FFD  20 5C 2B           JSR SYMOP       ;CHECK FOR SYMBOL
01902  2000  B0 0D              BCS RELSYM      ;C=1 SYMBOL
01903  2002              ;
01904  2002  AD 18 10           LDA ROPT        ;CHECK OPTION
01905  2005  C9 01              CMP #$01        ;REL TO * ?
01906  2007  F0 07              BEQ RELPC       ;IF SO DO IT
01907  2009              ;
01908  2009  4C BF 20           JMP PWORK       ;PRINT ADDRESS
01909  200C              ;
01910  200C              RELPUT = *
01911  200C  4C B3 22           JMP PUTI        ;PUT IN TABLE
01912  200F              ;
01913  200F  60          RELSYM RTS             ;RETURN
01914  2010              ;*********************************
01915  2010              ; PRINT RELATIVE TO PC
01916  2010              ;*********************************
01917  2010  20 2C 21    RELPC  JSR GETSL       ;GET BRANCH DATA
01918  2013  48                 PHA             ;SAVE ON STACK
01919  2014  30 07              BMI RELNEG      ;BACKWARD ?
01920  2016  A9 71              LDA #<POSREL
01921  2018  A0 21              LDY #>POSREL
01922  201A  4C 21 20           JMP RELPM
01923  201D  A9 75       RELNEG LDA #<NEGREL
01924  201F  A0 21              LDY #>NEGREL
01925  2021  20 BB 1B    RELPM  JSR STRPNT
01926  2024  68                 PLA             ;GET BRANCH DATA
01927  2025  18                 CLC             ;CLEAR CARRY
01928  2026  69 02              ADC #$02        ;ADD 2 FOR BRANCH
01929  2028  10 05              BPL RELP        ;FORWARD ?
01930  202A  18                 CLC             ;CLEAR CARRY
01931  202B  49 FF              EOR #$FF        ;COMPLMENT
01932  202D  69 01              ADC #$01        ;ADD 1 FOR 2'S
01933  202F  20 A5 1B    RELP   JSR PRBYT       ;PRINT BRANCH
01934  2032  20 F8 20           JSR SPAC6       ;SPACE
01935  2035  20 CB 20           JSR SEMIC       ;COMMENT CHAR
01936  2038  4C BF 20           JMP PWORK       ;PRINT ADDRESS
01937  203B              ;*********************************
01938  203B              ;  ORGIN LABEL
01939  203B              ;*********************************
01940  203B  20 29 22    ORGIN  JSR PRTOTH      ;PRINT LINE DATA
01941  203E  A9 2A              LDA #'*'        ;PC






PDISASS64.ASM......PAGE 0039

LINE# LOC   CODE        LINE


01942  2040  20 11 1C           JSR PCHAR       ;PRINT IT
01943  2043  A9 3D              LDA #'='        ;EQUALS
01944  2045  20 11 1C           JSR PCHAR       ;PRINT IT
01945  2048  20 D0 20           JSR DOLLAR      ;ASCII $
01946  204B  20 B6 20           JSR PSELEC      ;PRINT ADDRESS
01947  204E  4C FE 1A           JMP NEWLIN      ;START NEWLINE
01948  2051              ;*********************************
01949  2051              ; END OF FILE LABLE
01950  2051              ;*********************************
01951  2051  20 61 20    EFILE  JSR COMENT      ;COMMENT LINE
01952  2054  20 29 22           JSR PRTOTH      ;PRINT LINE DATA
01953  2057  A9 79              LDA #<MSGEND    ;END MESSAGE
01954  2059  A0 21              LDY #>MSGEND
01955  205B  20 BB 1B           JSR STRPNT      ;PRINT IT
01956  205E  4C FE 1A           JMP NEWLIN      ;NEW LINE
01957  2061              ;*********************************
01958  2061              ; PRINT COMMENT LINE
01959  2061              ;*********************************
01960  2061  20 67 20    COMENT JSR COMET       ;PRINT COMMENT
01961  2064  4C FE 1A           JMP NEWLIN      ;NEXT LINE
01962  2067              ;*********************************
01963  2067  20 29 22    COMET  JSR PRTOTH      ;PRINT LINE DATA
01964  206A  20 CB 20           JSR SEMIC       ;PRINT COMMENT
01965  206D  AD 1C 10           LDA FOROPT
01966  2070  D0 03              BNE CSHORT
01967  2072  A0 20              LDY #$20        ;COUNTER
01968  2074  2C                 .BYTE $2C
01969  2075  A0 10       CSHORT LDY #$10
01970  2077  A9 2A       COMPT  LDA #'*'        ;STAR
01971  2079  20 11 1C           JSR PCHAR       ;PRINT CHAR
01972  207C  88                 DEY             ;DEC COUNTER
01973  207D  D0 F8              BNE COMPT       ;20 OR 10 STARS
01974  207F  60                 RTS             ;RETURN
01975  2080              ;*********************************
01976  2080              ;     PRINT SELECTED ADDRESS
01977  2080              ;*********************************
01978  2080  A9 58       PRLA   LDA #'X'        ;XX LABEL
01979  2082  20 11 1C           JSR PCHAR       ;
01980  2085  A9 58              LDA #'X'        ;
01981  2087  4C 11 1C           JMP PCHAR       ;
01982  208A              ;*********************************
01983  208A              ; PRINT CODE ADDRESS
01984  208A              ;*********************************
01985  208A  20 48 2B    PRAD   JSR SYM         ;CHECK FOR SYMBOLIC
01986  208D  B0 1F              BCS NPRAD1      ;C=1 SYMBOLIC LABEL
01987  208F  AD 17 10           LDA XOPT        ;CHECK GENERATION
01988  2092  F0 10              BEQ P1          ;NO LABELS
01989  2094  20 12 23           JSR INTCHA      ;IS ADDRESS IN TAB
01990  2097  B0 0B              BCS P1          ;C=1 YES
01991  2099  AD 1C 10           LDA FOROPT      ;CHECK FORMAT
01992  209C  F0 03              BEQ POVER       ;STD FORMAT
01993  209E  4C 05 21           JMP SPACE       ;ONE SPACE
01994  20A1  4C F8 20    POVER  JMP SPAC6       ;SPACE OVER
01995  20A4              ;*********************************
01996  20A4              ; PRINT ADDRESS AS LABEL






PDISASS64.ASM......PAGE 0040

LINE# LOC   CODE        LINE


01997  20A4              ;*********************************
01998  20A4  20 80 20    P1     JSR PRLA        ;PRINT XX
01999  20A7  20 B6 20           JSR PSELEC      ;PRINT ADDRESS
02000  20AA  EA                 NOP
02001  20AB  EA                 NOP
02002  20AC  EA                 NOP
02003  20AD  60          NPRAD  RTS             ;RETURN
02004  20AE              ;*********************************
02005  20AE  AD 1C 10    NPRAD1 LDA FOROPT
02006  20B1  D0 FA              BNE NPRAD
02007  20B3  4C F9 2B           JMP FIXSYM
02008  20B6              ;*********************************
02009  20B6              ; PRINT SELECT ADDRESS
02010  20B6              ;*********************************
02011  20B6  AD 22 10    PSELEC LDA SELECT      ;LOW BYTE
02012  20B9  AC 23 10           LDY SELECT+1    ;HIGH BYTE
02013  20BC  4C 9F 1B           JMP PRBYTS      ;PRINT THEM
02014  20BF              ;*********************************
02015  20BF              ; PRINT WORKED ADDRESS WITH XX
02016  20BF              ;*********************************
02017  20BF  20 80 20    PWORK  JSR PRLA        ;PRINT XX
02018  20C2              ;*********************************
02019  20C2              ; PRINT WORKED ADDRESS
02020  20C2              ;*********************************
02021  20C2  AD 45 10    PWORKD LDA WORKED      ;LOW BYTE
02022  20C5  AC 46 10           LDY WORKED+1    ;HIGH BYTE
02023  20C8  4C 9F 1B           JMP PRBYTS      ;PRINT THEM
02024  20CB              ;********************************
02025  20CB              ; PRINT SEMICOLON FOR COMMENT
02026  20CB              ;********************************
02027  20CB  A9 3B       SEMIC  LDA #';'
02028  20CD  4C 11 1C           JMP PCHAR
02029  20D0              ;********************************
02030  20D0              ; PRINT DOLLAR SIGN FOR HEX
02031  20D0              ;********************************
02032  20D0  A9 24       DOLLAR LDA #'$'
02033  20D2  4C 11 1C           JMP PCHAR
02034  20D5              ;********************************
02035  20D5              ; PRINT LEFT PARENTTHESES
02036  20D5              ;********************************
02037  20D5  A9 28       LPAREN LDA #'('
02038  20D7  4C 11 1C           JMP PCHAR
02039  20DA              ;********************************
02040  20DA              ; PRINT RIGHT PARENTTHESES
02041  20DA              ;********************************
02042  20DA  A9 29       RPAREN LDA #')'
02043  20DC  4C 11 1C           JMP PCHAR
02044  20DF              ;********************************
02045  20DF              ; PRINT A COMMA AND AN "X"
02046  20DF              ;********************************
02047  20DF  A9 2C       XINDEX LDA #','
02048  20E1  20 11 1C           JSR PCHAR
02049  20E4  A9 58              LDA #'X'
02050  20E6  4C 11 1C           JMP PCHAR
02051  20E9              ;********************************






PDISASS64.ASM......PAGE 0041

LINE# LOC   CODE        LINE


02052  20E9              ; PRINT A COMMA AND A "Y"
02053  20E9              ;********************************
02054  20E9  A9 2C       YINDEX LDA #','
02055  20EB  20 11 1C           JSR PCHAR
02056  20EE  A9 59              LDA #'Y'
02057  20F0  4C 11 1C           JMP PCHAR
02058  20F3              ;********************************
02059  20F3              ; PRINT CARRAIGE RETURN
02060  20F3              ;*********************************
02061  20F3  A9 0D       CRLF   LDA #$0D        ;ASCII CR
02062  20F5  4C 11 1C           JMP PCHAR       ;PRINT
02063  20F8              ;*********************************
02064  20F8              ; PRINT SIX SPACES
02065  20F8              ;*********************************
02066  20F8  A9 05       SPAC6  LDA #$05
02067  20FA  8D 51 10    SPACM  STA TEMP
02068  20FD  20 05 21    SPAC   JSR SPACE
02069  2100  CE 51 10           DEC TEMP
02070  2103  D0 F8              BNE SPAC
02071  2105              ;*********************************
02072  2105              ; PRINT SPACE
02073  2105              ;*********************************
02074  2105  A9 20       SPACE  LDA #$20        ;ASCII SPACE
02075  2107  4C 11 1C           JMP PCHAR       ;PRINT
02076  210A              ;*********************************
02077  210A              ; SELECT NEXT BYTE
02078  210A              ;*********************************
02079  210A  AD 23 10    NEXTSL LDA SELECT+1
02080  210D  CD 21 10           CMP EA+1
02081  2110  90 0A              BCC SLOK
02082  2112  D0 0D              BNE NOINC
02083  2114  AD 22 10           LDA SELECT
02084  2117  CD 20 10           CMP EA
02085  211A  B0 05              BCS NOINC
02086  211C  20 23 21    SLOK   JSR INCSL
02087  211F  18                 CLC
02088  2120  60                 RTS
02089  2121  38          NOINC  SEC
02090  2122  60                 RTS
02091  2123              ;*********************************
02092  2123              ; INC SELECTED BYTE
02093  2123              ;*********************************
02094  2123  EE 22 10    INCSL  INC SELECT
02095  2126  D0 03              BNE *+5
02096  2128  EE 23 10           INC SELECT+1
02097  212B  60                 RTS
02098  212C              ;*********************************
02099  212C              ; GET SELECTED BYTE
02100  212C              ;*********************************
02101  212C  18          GETSL  CLC
02102  212D  AD 22 10           LDA SELECT
02103  2130  6D 24 10           ADC OFFSET
02104  2133  85 DD              STA ZEROUR
02105  2135  AD 23 10           LDA SELECT+1
02106  2138  6D 25 10           ADC OFFSET+1






PDISASS64.ASM......PAGE 0042

LINE# LOC   CODE        LINE


02107  213B  85 DE              STA ZEROUR+1
02108  213D  A0 00              LDY #$00
02109  213F  B1 DD              LDA (ZEROUR),Y
02110  2141  60                 RTS
02111  2142              ;*********************************
02112  2142              ; DEC SLECTED BYTE
02113  2142              ;*********************************
02114  2142  AD 22 10    DECSL  LDA SELECT
02115  2145  D0 03              BNE *+5
02116  2147  CE 23 10           DEC SELECT+1
02117  214A  CE 22 10           DEC SELECT
02118  214D  60                 RTS
02119  214E              ;*********************************
02120  214E              ; INITIALIZE SELECT
02121  214E              ;*********************************
02122  214E  AD 1E 10    INTSA  LDA SA
02123  2151  8D 22 10           STA SELECT
02124  2154  AD 1F 10           LDA SA+1
02125  2157  8D 23 10           STA SELECT+1
02126  215A  60                 RTS
02127  215B              ;*********************************
02128  215B              ; ASCII STRING DATA
02129  215B              ;*********************************
02130  215B  2E 42       MSGBIT .BYTE '.BYTE $',0
02130  2162  00 
02131  2163  20 3B       MSGBZP .BYTE '         ;BIT ZP SKIP',0
02131  2170  00 
02132  2171  2A 2B 24    POSREL .BYTE '*+$',0
02132  2174  00 
02133  2175  2A 2D 24    NEGREL .BYTE '*-$',0
02133  2178  00 
02134  2179  2E 45       MSGEND .BYTE '.END',0
02134  217D  00 
02135  217E  3B 3F       ILLMSG .BYTE ';??? ILLEGAL OPCODE',0
02135  2191  00 
02136  2192              ;*********************************
02137  2192              ; PRINT ONE BYTE OPCODE DATA
02138  2192              ;*********************************
02139  2192  20 2C 21    PRTONE JSR GETSL       ;GET BYTE
02140  2195  20 A5 1B           JSR PRBYT       ;PRINT BYTE
02141  2198  AD 1C 10           LDA FOROPT
02142  219B  F0 03              BEQ PRTON1
02143  219D  A9 07              LDA #$07
02144  219F  2C                 .BYTE $2C
02145  21A0  A9 09       PRTON1 LDA #$09        ;10 SPACES
02146  21A2  20 FA 20           JSR SPACM       ;
02147  21A5  4C FE 21           JMP PRTEST      ;RESET I/O DEVICE
02148  21A8              ;*********************************
02149  21A8              ; PRINT TWO BYTE OPCODE DATA
02150  21A8              ;*********************************
02151  21A8  20 2C 21    PRTTWO JSR GETSL       ;GET BYTE
02152  21AB  20 A5 1B           JSR PRBYT       ;PRINT BYTE
02153  21AE  20 05 21           JSR SPACE       ;
02154  21B1  20 23 21           JSR INCSL       ;INC TO OPERAND
02155  21B4  20 2C 21           JSR GETSL       ;GET BYTE






PDISASS64.ASM......PAGE 0043

LINE# LOC   CODE        LINE


02156  21B7  20 A5 1B           JSR PRBYT       ;PRINT IT
02157  21BA  AD 1C 10           LDA FOROPT
02158  21BD  F0 03              BEQ PRTTW1
02159  21BF  A9 04              LDA #$04
02160  21C1  2C                 .BYTE $2C
02161  21C2  A9 06       PRTTW1 LDA #$06        ;7 SPACES
02162  21C4  20 FA 20           JSR SPACM       ;
02163  21C7  20 42 21           JSR DECSL       ;RESET POINTER
02164  21CA  4C FE 21           JMP PRTEST      ;RESET I/O DEVICE
02165  21CD              ;*********************************
02166  21CD              ; PRINT THREE BYTE OPCODE DATA
02167  21CD              ;*********************************
02168  21CD  20 2C 21    PRTTHE JSR GETSL       ;GET BYTE
02169  21D0  20 A5 1B           JSR PRBYT       ;PRINT BYTE
02170  21D3  20 05 21           JSR SPACE       ;
02171  21D6  20 23 21           JSR INCSL       ;INC TO OPERAND
02172  21D9  20 2C 21           JSR GETSL       ;GET BYTE
02173  21DC  20 A5 1B           JSR PRBYT       ;PRINT IT
02174  21DF  20 05 21           JSR SPACE       ;
02175  21E2  20 23 21           JSR INCSL       ;INC TO LAST BYTE
02176  21E5  20 2C 21           JSR GETSL       ;GET BYTE
02177  21E8  20 A5 1B           JSR PRBYT       ;PRINT IT
02178  21EB  AD 1C 10           LDA FOROPT
02179  21EE  F0 03              BEQ PRTTH1
02180  21F0  A9 01              LDA #$01
02181  21F2  2C                 .BYTE $2C
02182  21F3  A9 03       PRTTH1 LDA #$03        ;4 SPACES
02183  21F5  20 FA 20           JSR SPACM       ;
02184  21F8  20 42 21           JSR DECSL       ;DEC POINTER
02185  21FB  20 42 21           JSR DECSL       ;DEC POINTER
02186  21FE              ;*********************************
02187  21FE              ; RESET I/O DEVICE (DISK IF USED)
02188  21FE              ;*********************************
02189  21FE  AD 1A 10    PRTEST LDA OUTPUT      ;GET I/O DEVICE
02190  2201  8D 19 10           STA DEVICE      ;RESET I/O
02191  2204  60                 RTS             ;RETURN
02192  2205              ;*********************************
02193  2205              ; PRINT LINE DATA FOR OPCODE
02194  2205              ;*********************************
02195  2205  AD 19 10    PRTDAT LDA DEVICE      ;OUTPUT DEVICE
02196  2208  29 07              AND #$07        ;MASK DISK
02197  220A  8D 19 10           STA DEVICE      ;RESET
02198  220D  AD 1C 10           LDA FOROPT      ;CHECK FORMAT
02199  2210  D0 0F              BNE PRTDAF      ;SKIP LINE #
02200  2212  AD 59 10           LDA LINECT+1    ;HIH BYTE LINE
02201  2215  AE 58 10           LDX LINECT      ;LOW BYTE LINE
02202  2218  20 D7 1B           JSR PRTNUM      ;PRINT NUMBER
02203  221B  20 05 21           JSR SPACE       ;
02204  221E  20 05 21           JSR SPACE       ;
02205  2221  20 B6 20    PRTDAF JSR PSELEC      ;PRINT ADDRESS
02206  2224  A9 01              LDA #$01        ;2 SPACES
02207  2226  4C FA 20           JMP SPACM       ;
02208  2229              ;*********************************
02209  2229              ; PRINT LINE DATA FOR OTHER LINES
02210  2229              ;*********************************






PDISASS64.ASM......PAGE 0044

LINE# LOC   CODE        LINE


02211  2229  20 05 22    PRTOTH JSR PRTDAT      ;PRINT LINE
02212  222C  AD 1C 10           LDA FOROPT
02213  222F  F0 03              BEQ PRTOT1
02214  2231  A9 09              LDA #$09
02215  2233  2C                 .BYTE $2C
02216  2234  A9 0B       PRTOT1 LDA #$0B        ;12 SPACES
02217  2236  20 FA 20           JSR SPACM       ;
02218  2239  4C FE 21           JMP PRTEST      ;RESET I/O
02219  223C              ;********************************
02220  223C              ;.FIL 0:INTERNAL.ASM
02221  223C              ;********************************
02222  223C              ;.END
02223  223C              ;*********************************
02224  223C              ; FILE INTERNAL.ASM
02225  223C              ;*********************************
02226  223C              ;
02227  223C              ;        DISASSEMBLER64
02228  223C              ;    SYMBOLIC DISASSEMBLER
02229  223C              ;       BY DENTON MARLOWE
02230  223C              ;
02231  223C              ;  (C)1986 BY DENTON MARLOWE
02232  223C              ;
02233  223C              ;*********************************
02234  223C              ; INTERNAL ADDRESS TABLE ROUTINES
02235  223C              ;*********************************
02236  223C              ; CHECK FOR OUT OF RANGE ADDRESS
02237  223C              ;*********************************
02238  223C  AD 46 10    RANGE  LDA WORKED+1    ;GET HIGH
02239  223F  CD 29 10           CMP EAGOL+1     ;COMPARE
02240  2242  90 0A              BCC RANG        ;< CHECK START
02241  2244  D0 1A              BNE ROUT        ;> OUT OF RANGE
02242  2246  AD 45 10           LDA WORKED      ;GET LOW
02243  2249  CD 28 10           CMP EAGOL       ;COMPARE
02244  224C  B0 12              BCS ROUT        ;> OUT OF RANGE
02245  224E              ;*********************************
02246  224E  AD 46 10    RANG   LDA WORKED+1    ;GET HIGH
02247  2251  CD 27 10           CMP SAGOL+1     ;COMPARE
02248  2254  90 0A              BCC ROUT        ;< OUT OF RANGE
02249  2256  AD 45 10           LDA WORKED      ;GET LOW
02250  2259  CD 26 10           CMP SAGOL       ;COMPARE
02251  225C  90 02              BCC ROUT        ;< OUT OF RANGE
02252  225E              ;*********************************
02253  225E  18                 CLC             ;C=0 IN RANGE
02254  225F  60                 RTS
02255  2260  38          ROUT   SEC             ;C=1 OUT RANGE
02256  2261  60                 RTS
02257  2262              ;*********************************
02258  2262              ; INITIALIZE INTERNAL TABLE
02259  2262              ;*********************************
02260  2262  AD EF 10    INITIN LDA DATABE
02261  2265  8D 30 10           STA TABINS
02262  2268  8D 32 10           STA TABINE
02263  226B  AD F0 10           LDA DATABE+1
02264  226E  8D 31 10           STA TABINS+1
02265  2271  8D 33 10           STA TABINE+1






PDISASS64.ASM......PAGE 0045

LINE# LOC   CODE        LINE


02266  2274              ;*********************************
02267  2274              ; INITIALIZE INTERNAL TABLE POINT
02268  2274              ;*********************************
02269  2274  AD 30 10    INTSET LDA TABINS
02270  2277  8D 2E 10           STA TABINP
02271  227A  AD 31 10           LDA TABINS+1
02272  227D  8D 2F 10           STA TABINP+1
02273  2280  60                 RTS
02274  2281              ;*********************************
02275  2281              ; SAVE INTERNAL TABLE POINTERS
02276  2281              ;*********************************
02277  2281  AD 30 10    SAVINT LDA TABINS
02278  2284  8D 4B 10           STA SAVES
02279  2287  AD 31 10           LDA TABINS+1
02280  228A  8D 4C 10           STA SAVES+1
02281  228D  AD 32 10           LDA TABINE
02282  2290  8D 4D 10           STA SAVEE
02283  2293  AD 33 10           LDA TABINE+1
02284  2296  8D 4E 10           STA SAVEE+1
02285  2299  60                 RTS
02286  229A              ;*********************************
02287  229A              ; RESTORE INTERNAL TABLE POINTERS
02288  229A              ;*********************************
02289  229A  AD 4B 10    RESINT LDA SAVES
02290  229D  8D 30 10           STA TABINS
02291  22A0  AD 4C 10           LDA SAVES+1
02292  22A3  8D 31 10           STA TABINS+1
02293  22A6  AD 4D 10           LDA SAVEE
02294  22A9  8D 32 10           STA TABINE
02295  22AC  AD 4E 10           LDA SAVEE+1
02296  22AF  8D 33 10           STA TABINE+1
02297  22B2  60                 RTS
02298  22B3              ;*********************************
02299  22B3              ; PUT ADDRESS IN INTERNAL TABLE
02300  22B3              ;*********************************
02301  22B3  38          PUTI   SEC
02302  22B4  AD 30 10           LDA TABINS
02303  22B7  ED 32 10           SBC TABINE
02304  22BA  8D 51 10           STA TEMP
02305  22BD  AD 31 10           LDA TABINS+1
02306  22C0  ED 33 10           SBC TABINE+1
02307  22C3  0D 51 10           ORA TEMP
02308  22C6  F0 05              BEQ PUIT
02309  22C8              ;
02310  22C8  20 1E 23           JSR INTCHK      ;IS ADDRESS IN TAB
02311  22CB  B0 23              BCS INTEXT      ;IF SO EXIT
02312  22CD              ;
02313  22CD  AD 32 10    PUIT   LDA TABINE      ;GET LOW END
02314  22D0  85 DD              STA ZEROUR      ;STORE
02315  22D2  AD 33 10           LDA TABINE+1    ;GET HIGH END
02316  22D5  85 DE              STA ZEROUR+1    ;STORE
02317  22D7  A0 00              LDY #$00        ;OFFSET
02318  22D9  AD 45 10           LDA WORKED      ;GET LOW ADDRESS
02319  22DC  91 DD              STA (ZEROUR),Y  ;PUT IN TABLE
02320  22DE  C8                 INY             ;OFFSET TO HIGH






PDISASS64.ASM......PAGE 0046

LINE# LOC   CODE        LINE


02321  22DF  AD 46 10           LDA WORKED+1    ;GET HIGH ADDRESS
02322  22E2  91 DD              STA (ZEROUR),Y  ;PUT IN TABLE
02323  22E4              ;
02324  22E4  20 CB 20           JSR SEMIC       ;PRINT ;
02325  22E7  20 C2 20           JSR PWORKD      ;PRINT ADDRESS
02326  22EA              ;*********************************
02327  22EA  20 F2 22           JSR INCIE       ;INC TO HIGH & LOW
02328  22ED  4C F2 22           JMP INCIE       ;INC TO HIGH & LOW
02329  22F0              ;
02330  22F0              INTEXT = *
02331  22F0  18                 CLC             ;C=0 FOR NO MATCH
02332  22F1  60                 RTS             ;RETURN
02333  22F2              ;*********************************
02334  22F2              ; INC INTERNAL END TABLE POINTER
02335  22F2              ;*********************************
02336  22F2  EE 32 10    INCIE  INC TABINE
02337  22F5  D0 03              BNE *+5
02338  22F7  EE 33 10           INC TABINE+1
02339  22FA              ;*********************************
02340  22FA              ; INC INTERNAL ADDRESS POINTER
02341  22FA              ;*********************************
02342  22FA  EE 2E 10    INCI   INC TABINP
02343  22FD  D0 03              BNE *+5
02344  22FF  EE 2F 10           INC TABINP+1
02345  2302  60                 RTS
02346  2303              ;*********************************
02347  2303              ; GET BYTE FROM INTERNAL TABLE
02348  2303              ;*********************************
02349  2303  AD 2E 10    GETI   LDA TABINP
02350  2306  85 DD              STA ZEROUR
02351  2308  AD 2F 10           LDA TABINP+1
02352  230B  85 DE              STA ZEROUR+1
02353  230D  A0 00              LDY #$00
02354  230F  B1 DD              LDA (ZEROUR),Y
02355  2311  60                 RTS
02356  2312              ;*********************************
02357  2312              ; CHECK IF ADDRESS IN TABLE
02358  2312              ;*********************************
02359  2312  AD 22 10    INTCHA LDA SELECT
02360  2315  8D 45 10           STA WORKED
02361  2318  AD 23 10           LDA SELECT+1
02362  231B  8D 46 10           STA WORKED+1
02363  231E              ;*********************************
02364  231E  20 74 22    INTCHK JSR INTSET
02365  2321  20 03 23    INTCH  JSR GETI
02366  2324  8D 47 10           STA WORKER
02367  2327  20 FA 22           JSR INCI
02368  232A  20 03 23           JSR GETI
02369  232D  8D 48 10           STA WORKER+1
02370  2330  38                 SEC
02371  2331  AD 46 10           LDA WORKED+1
02372  2334  ED 48 10           SBC WORKER+1
02373  2337  8D 51 10           STA TEMP
02374  233A  AD 45 10           LDA WORKED
02375  233D  ED 47 10           SBC WORKER






PDISASS64.ASM......PAGE 0047

LINE# LOC   CODE        LINE


02376  2340  0D 51 10           ORA TEMP
02377  2343  F0 17              BEQ INTMAT
02378  2345              ;*********************************
02379  2345  20 FA 22           JSR INCI
02380  2348  AD 2F 10           LDA TABINP+1
02381  234B  CD 33 10           CMP TABINE+1
02382  234E  90 D1              BCC INTCH
02383  2350  D0 08              BNE INTEND
02384  2352  AD 2E 10           LDA TABINP
02385  2355  CD 32 10           CMP TABINE
02386  2358  90 C7              BCC INTCH
02387  235A              ;*********************************
02388  235A  18          INTEND CLC
02389  235B  60                 RTS
02390  235C  38          INTMAT SEC
02391  235D  60                 RTS
02392  235E              ;*********************************
02393  235E              ; 2 BYTE TABLE SORT ROUTINE
02394  235E              ;*********************************
02395  235E  20 74 22    SORT   JSR INTSET      ;SET POINTERS
02396  2361  AD 30 10           LDA TABINS
02397  2364  8D 34 10           STA SMALLS
02398  2367  8D 36 10           STA SMALLP
02399  236A  AD 31 10           LDA TABINS+1
02400  236D  8D 35 10           STA SMALLS+1
02401  2370  8D 37 10           STA SMALLP+1
02402  2373              ;*********************************
02403  2373              ; PUT FIRST WORD INTO TEMP
02404  2373              ;*********************************
02405  2373  20 03 23    SORT1  JSR GETI
02406  2376  8D 51 10           STA TEMP
02407  2379  20 FA 22           JSR INCI
02408  237C  20 03 23           JSR GETI
02409  237F  8D 52 10           STA TEMP+1
02410  2382              ;*********************************
02411  2382              ; INC TO NEXT WORD AND COMPARE
02412  2382              ; SMALLP POINTS TO LOW BYTE
02413  2382              ;*********************************
02414  2382  20 FA 22    SORT2  JSR INCI
02415  2385  AD 2E 10           LDA TABINP
02416  2388  8D 36 10           STA SMALLP
02417  238B  AD 2F 10           LDA TABINP+1
02418  238E  8D 37 10           STA SMALLP+1
02419  2391  20 03 23           JSR GETI
02420  2394  8D 45 10           STA WORKED
02421  2397  20 FA 22           JSR INCI
02422  239A  AD 2F 10           LDA TABINP+1
02423  239D  CD 33 10           CMP TABINE+1
02424  23A0  90 0D              BCC T2
02425  23A2  D0 08              BNE S3
02426  23A4  AD 2E 10           LDA TABINP
02427  23A7  CD 32 10           CMP TABINE
02428  23AA  90 03              BCC T2
02429  23AC  4C 04 24    S3     JMP SORT3
02430  23AF  20 03 23    T2     JSR GETI






PDISASS64.ASM......PAGE 0048

LINE# LOC   CODE        LINE


02431  23B2  8D 46 10           STA WORKED+1
02432  23B5  CD 52 10           CMP TEMP+1
02433  23B8  90 0D              BCC SMALL
02434  23BA  D0 08              BNE LARGE
02435  23BC  AD 45 10           LDA WORKED
02436  23BF  CD 51 10           CMP TEMP
02437  23C2  90 03              BCC SMALL
02438  23C4  4C 82 23    LARGE  JMP SORT2
02439  23C7              ;*********************************
02440  23C7              ; WORD IS SMALL THAN TEMP PUT IT
02441  23C7              ; WHERE TEMP CAME FROM (SMALLS)
02442  23C7              ;*********************************
02443  23C7  AD 34 10    SMALL  LDA SMALLS
02444  23CA  85 DD              STA ZEROUR
02445  23CC  AD 35 10           LDA SMALLS+1
02446  23CF  85 DE              STA ZEROUR+1
02447  23D1  A0 00              LDY #$00
02448  23D3  AD 45 10           LDA WORKED
02449  23D6  91 DD              STA (ZEROUR),Y
02450  23D8  C8                 INY
02451  23D9  AD 46 10           LDA WORKED+1
02452  23DC  91 DD              STA (ZEROUR),Y
02453  23DE              ;*********************************
02454  23DE              ; PUT TEMP IN PLACE OF WORD
02455  23DE              ; SMALLP POINTS TO LO ADDRESS
02456  23DE              ;*********************************
02457  23DE  AD 36 10           LDA SMALLP
02458  23E1  85 DD              STA ZEROUR
02459  23E3  AD 37 10           LDA SMALLP+1
02460  23E6  85 DE              STA ZEROUR+1
02461  23E8  A0 00              LDY #$00
02462  23EA  AD 51 10           LDA TEMP
02463  23ED  91 DD              STA (ZEROUR),Y
02464  23EF  C8                 INY
02465  23F0  AD 52 10           LDA TEMP+1
02466  23F3  91 DD              STA (ZEROUR),Y
02467  23F5              ;*********************************
02468  23F5  AD 34 10           LDA SMALLS
02469  23F8  8D 2E 10           STA TABINP
02470  23FB  AD 35 10           LDA SMALLS+1
02471  23FE  8D 2F 10           STA TABINP+1
02472  2401  4C 73 23           JMP SORT1
02473  2404              ;*********************************
02474  2404              ; IF AFTER SCAN TO TABLE GOTO NEXT
02475  2404              ; WORD IN TABLE FOR CHECK
02476  2404              ;*********************************
02477  2404  18          SORT3  CLC
02478  2405  AD 34 10           LDA SMALLS
02479  2408  69 02              ADC #$02
02480  240A  8D 34 10           STA SMALLS
02481  240D  8D 2E 10           STA TABINP
02482  2410  AD 35 10           LDA SMALLS+1
02483  2413  69 00              ADC #$00
02484  2415  8D 35 10           STA SMALLS+1
02485  2418  8D 2F 10           STA TABINP+1






PDISASS64.ASM......PAGE 0049

LINE# LOC   CODE        LINE


02486  241B  AD 35 10           LDA SMALLS+1
02487  241E  CD 33 10           CMP TABINE+1
02488  2421  90 0A              BCC SORTOK
02489  2423  D0 0B              BNE SORT4
02490  2425  AD 34 10           LDA SMALLS
02491  2428  CD 32 10           CMP TABINE
02492  242B  B0 03              BCS SORT4
02493  242D  4C 73 23    SORTOK JMP SORT1
02494  2430              ;*********************************
02495  2430  4C 74 22    SORT4  JMP INTSET
02496  2433              ;*********************************
02497  2433              ; PRINT INTERNAL ADDRESS TABLE
02498  2433              ;*********************************
02499  2433  38          INTPRT SEC
02500  2434  AD 30 10           LDA TABINS
02501  2437  ED 32 10           SBC TABINE
02502  243A  8D 51 10           STA TEMP
02503  243D  AD 31 10           LDA TABINS+1
02504  2440  ED 33 10           SBC TABINE+1
02505  2443  0D 51 10           ORA TEMP
02506  2446  D0 01              BNE INTOUT
02507  2448  60                 RTS
02508  2449              ;*********************************
02509  2449  20 E8 1C    INTOUT JSR HEADSY
02510  244C  20 5E 23           JSR SORT
02511  244F              ;*********************************
02512  244F  A9 03       LOOP1  LDA #$03
02513  2451  8D 52 10           STA SAVA
02514  2454  20 03 23    INTPR  JSR GETI
02515  2457  8D 45 10           STA WORKED
02516  245A  20 FA 22           JSR INCI
02517  245D  20 03 23           JSR GETI
02518  2460  8D 46 10           STA WORKED+1
02519  2463  20 05 21           JSR SPACE
02520  2466  20 5C 2B           JSR SYMOP
02521  2469  90 0B              BCC INTPRS
02522  246B  20 F9 2B           JSR FIXSYM
02523  246E  A9 02              LDA #$02
02524  2470  20 FA 20           JSR SPACM
02525  2473  4C 7B 24           JMP INTPRM
02526  2476  A9 08       INTPRS LDA #$08
02527  2478  20 FA 20           JSR SPACM
02528  247B  20 C2 20    INTPRM JSR PWORKD
02529  247E  20 FA 22           JSR INCI
02530  2481  AD 2F 10           LDA TABINP+1
02531  2484  CD 33 10           CMP TABINE+1
02532  2487  90 0A              BCC PRTOK
02533  2489  D0 15              BNE PREND
02534  248B  AD 2E 10           LDA TABINP
02535  248E  CD 32 10           CMP TABINE
02536  2491  B0 0D              BCS PREND
02537  2493  CE 52 10    PRTOK  DEC SAVA
02538  2496  30 0B              BMI LOOP2
02539  2498  A9 02              LDA #$02
02540  249A  20 FA 20           JSR SPACM






PDISASS64.ASM......PAGE 0050

LINE# LOC   CODE        LINE


02541  249D  4C 54 24           JMP INTPR
02542  24A0  4C BD 1C    PREND  JMP NEXPTS
02543  24A3  20 BD 1C    LOOP2  JSR NEXPTS
02544  24A6  4C 4F 24           JMP LOOP1
02545  24A9              ;*********************************
02546  24A9              ;.FIL 0:ASC.ASM
02547  24A9              ;*********************************
02548  24A9              ;.END
02549  24A9              ;*********************************
02550  24A9              ; FILE ASC.ASM
02551  24A9              ;*********************************
02552  24A9              ;
02553  24A9              ;        DISASSEMBLER64
02554  24A9              ;    SYMBOLIC DISASSEMBLER
02555  24A9              ;       BY DENTON MARLOWE
02556  24A9              ;
02557  24A9              ;  (C)1986 BY DENTON MARLOWE
02558  24A9              ;
02559  24A9              ;*********************************
02560  24A9              ; DATA TABLE HANDLER
02561  24A9              ;*********************************
02562  24A9  AD E9 10    DATAOP LDA NDATA       ;GET NUM TABLES
02563  24AC  F0 07              BEQ ENDAX       ;IF ZERO EXIT
02564  24AE  A9 00              LDA #$00        ;ZERO BYTE
02565  24B0  8D E7 10           STA CDATA       ;SET FIRST TABLE
02566  24B3  F0 03              BEQ DATAO1      ;
02567  24B5  4C 99 25    ENDAX  JMP ENDDAT      ;
02568  24B8              ;*********************************
02569  24B8  AD E7 10    DATAO1 LDA CDATA       ;CURRENT TABLE
02570  24BB  CD E9 10           CMP NDATA       ;LAST TABLE DONE
02571  24BE  F0 F5              BEQ ENDAX       ;IF SO EXIT
02572  24C0  0A                 ASL A           ;CDATA*2
02573  24C1  0A                 ASL A           ;CDATA*4
02574  24C2  18                 CLC
02575  24C3  6D E7 10           ADC CDATA       ;CDATA*5
02576  24C6  A8                 TAY             ;PUT INTO INDEX
02577  24C7  B9 F1 10           LDA TDATA,Y     ;START LOW
02578  24CA  8D 47 10           STA WORKER      ;STORE
02579  24CD  C8                 INY             ;INC OFFSET
02580  24CE  B9 F1 10           LDA TDATA,Y     ;START HIGH
02581  24D1  8D 48 10           STA WORKER+1    ;STORE
02582  24D4  38                 SEC             ;C=1
02583  24D5  AD 47 10           LDA WORKER      ;
02584  24D8  ED 22 10           SBC SELECT      ;
02585  24DB  8D 51 10           STA TEMP        ;
02586  24DE  AD 48 10           LDA WORKER+1    ;
02587  24E1  ED 23 10           SBC SELECT+1    ;
02588  24E4  0D 51 10           ORA TEMP        ;
02589  24E7  F0 05              BEQ DATAO2      ;MATCH
02590  24E9  EE E7 10           INC CDATA       ;NEXT TABLE
02591  24EC  D0 CA              BNE DATAO1      ;CHECK FOR MATCH
02592  24EE              ;*********************************
02593  24EE              ; GET TABLE DATA
02594  24EE              ;*********************************
02595  24EE  C8          DATAO2 INY             ;INC OFFSET






PDISASS64.ASM......PAGE 0051

LINE# LOC   CODE        LINE


02596  24EF  B9 F1 10           LDA TDATA,Y     ;END LOW
02597  24F2  8D E4 10           STA EAS         ;STORE
02598  24F5  C8                 INY             ;INC OFFSET
02599  24F6  B9 F1 10           LDA TDATA,Y     ;END HIGH
02600  24F9  8D E5 10           STA EAS+1       ;STORE
02601  24FC  C8                 INY             ;INC OFFSET
02602  24FD  B9 F1 10           LDA TDATA,Y     ;DATA TYPE
02603  2500  8D E6 10           STA TEXTER      ;STORE
02604  2503  C9 53              CMP #'S'        ;IS IT SKIPPER
02605  2505  D0 23              BNE ASCCCC      ;
02606  2507              ;*********************************
02607  2507              ; SKIP RANGE OF ADDRESSES
02608  2507              ;*********************************
02609  2507  AD 12 10           LDA PASS
02610  250A  CD 15 10           CMP CPASS
02611  250D  D0 1B              BNE ASCCCC
02612  250F  AD E4 10           LDA EAS
02613  2512  8D 22 10           STA SELECT
02614  2515  AD E5 10           LDA EAS+1
02615  2518  8D 23 10           STA SELECT+1
02616  251B  20 23 21           JSR INCSL
02617  251E  20 3B 20           JSR ORGIN
02618  2521  20 42 21           JSR DECSL
02619  2524  20 61 20           JSR COMENT
02620  2527  4C 96 25           JMP DATUT
02621  252A              ;*********************************
02622  252A              ; CHECK PASS
02623  252A              ;*********************************
02624  252A  AD 12 10    ASCCCC LDA PASS
02625  252D  CD 14 10           CMP EPASS       ;EXTERNAL
02626  2530  D0 0F              BNE ASCKK
02627  2532  AD E4 10    SKIPER LDA EAS
02628  2535  8D 22 10           STA SELECT
02629  2538  AD E5 10           LDA EAS+1
02630  253B  8D 23 10           STA SELECT+1
02631  253E  4C 96 25           JMP DATUT
02632  2541              ;*********************************
02633  2541              ; DISASSEMBLER LOOP FOR DATA
02634  2541              ;*********************************
02635  2541  AD 12 10    ASCKK  LDA PASS        ;GET PASS
02636  2544  CD 15 10           CMP CPASS       ;IS IT LAST
02637  2547  D0 0E              BNE ASCI1       ;NO PRINT
02638  2549  20 61 20           JSR COMENT      ;COMMENT LINE
02639  254C  AD 12 10    ASCII  LDA PASS        ;GET PASS
02640  254F  CD 15 10           CMP CPASS       ;IS IT LAST
02641  2552  D0 03              BNE ASCI1       ;NO PRINT
02642  2554  20 05 22           JSR PRTDAT      ;PRINT LINE
02643  2557  20 9C 25    ASCI1  JSR ACHECK      ;DIS ONE LINE
02644  255A  B0 29              BCS ASCIIQ      ;IF EA STOP
02645  255C              ;*********************************
02646  255C  20 E1 FF           JSR STOP
02647  255F  F0 24              BEQ ASCIIQ
02648  2561  20 E4 FF           JSR GETIN
02649  2564  F0 E6              BEQ ASCII
02650  2566  C9 20              CMP #' '






PDISASS64.ASM......PAGE 0052

LINE# LOC   CODE        LINE


02651  2568  D0 E2              BNE ASCII
02652  256A  AD 19 10           LDA DEVICE
02653  256D  48                 PHA
02654  256E  A9 03              LDA #$03
02655  2570  8D 19 10           STA DEVICE
02656  2573  A9 F8              LDA #<PMSG
02657  2575  A0 11              LDY #>PMSG
02658  2577  20 BB 1B           JSR STRPNT
02659  257A  68                 PLA
02660  257B  8D 19 10           STA DEVICE
02661  257E  20 E4 FF    PAUS1  JSR GETIN
02662  2581  F0 FB              BEQ PAUS1
02663  2583  D0 C7              BNE ASCII
02664  2585              ;*********************************
02665  2585  AD 12 10    ASCIIQ LDA PASS        ;GET PASS
02666  2588  CD 15 10           CMP CPASS       ;IS IT LAST
02667  258B  D0 09              BNE DATUT       ;EXIT
02668  258D  20 23 21           JSR INCSL
02669  2590  20 61 20           JSR COMENT      ;COMMENT LINE
02670  2593  20 42 21           JSR DECSL
02671  2596              ;*********************************
02672  2596              ; EXIT TO NEXTSL
02673  2596              ;*********************************
02674  2596  A9 FF       DATUT  LDA #$FF        ;SET N=1
02675  2598  60                 RTS             ;RETURN
02676  2599  A9 00       ENDDAT LDA #$00        ;SET N=0
02677  259B  60                 RTS             ;RETURN
02678  259C              ;*********************************
02679  259C              ; CHECK OPTIONS
02680  259C              ;*********************************
02681  259C  AD E6 10    ACHECK LDA TEXTER      ;GET DATA TYPE
02682  259F  C9 34              CMP #'4'         ;WORD-1
02683  25A1  F0 0B              BEQ AC0
02684  25A3  C9 33              CMP #'3'         ;DBYTE
02685  25A5  F0 0A              BEQ AC1
02686  25A7  C9 32              CMP #'2'         ;WORD
02687  25A9  F0 03              BEQ AC0
02688  25AB  4C B4 25           JMP BYTES       ;BYTE OR ASCII
02689  25AE  4C 70 26    AC0    JMP WORDS       ;WORD OR WORD-1
02690  25B1  4C 40 26    AC1    JMP DBYTES      ;DBYTES
02691  25B4              ;*********************************
02692  25B4              ; .BYTE DIRECTIVE
02693  25B4              ;*********************************
02694  25B4  AD 12 10    BYTES  LDA PASS        ;GET PASS
02695  25B7  CD 15 10           CMP CPASS       ;IS IT LAST
02696  25BA  D0 20              BNE BYTESX      ;IF NOT EXIT
02697  25BC  20 92 21           JSR PRTONE      ;PRINT BYTE
02698  25BF  20 8A 20           JSR PRAD        ;PRINT ADDRESS
02699  25C2  A0 27              LDY #>MBYTE     ;.BYTE
02700  25C4  A9 2C              LDA #<MBYTE     ;
02701  25C6  20 BB 1B           JSR STRPNT      ;PRINT IT
02702  25C9  AD E6 10           LDA TEXTER      ;GET TYPE
02703  25CC  C9 30              CMP #'0'          ;ASCII
02704  25CE  F0 0F              BEQ ALINE       ;ASCII BYTES
02705  25D0  20 D0 20           JSR DOLLAR      ;PRINT $






PDISASS64.ASM......PAGE 0053

LINE# LOC   CODE        LINE


02706  25D3  20 2C 21           JSR GETSL       ;GET BYTE
02707  25D6  20 A5 1B           JSR PRBYT       ;PRINT BYTE
02708  25D9  20 FE 1A           JSR NEWLIN      ;NEXT LINE
02709  25DC  4C 13 27    BYTESX JMP NEXTBY      ;NEXT BYTE
02710  25DF              ;*********************************
02711  25DF              ; ASCII TEXT
02712  25DF              ;*********************************
02713  25DF  A9 00       ALINE  LDA #$00        ;ZERO BYTE
02714  25E1  8D 51 10           STA TEMP        ;STORE IN COUNT
02715  25E4              ;*********************************
02716  25E4              ; CHECK FIRST BYTE OF LINE
02717  25E4              ;*********************************
02718  25E4  20 2C 21           JSR GETSL       ;GET BYTE
02719  25E7  20 34 26           JSR CASCII      ;CHECK FOR ASCII
02720  25EA  B0 39              BCS NASCII      ;IF NOT BRANCH
02721  25EC  A9 27              LDA #'''        ;PRINT ONE QUOTE
02722  25EE  20 11 1C           JSR PCHAR       ;PRINT IT
02723  25F1              ;*********************************
02724  25F1  20 2C 21    ALOP   JSR GETSL       ;GET BYTE
02725  25F4  20 34 26           JSR CASCII      ;IS IT ASCII
02726  25F7  B0 24              BCS EASCII      ;IF NOT END LINE
02727  25F9  20 11 1C           JSR PCHAR       ;PRINT ASCII
02728  25FC              ; REV 2-12-2018 START
02729  25FC              ; IF CHAR = ' THEN PRINT SECOND '
02730  25FC  20 2C 21           JSR GETSL       ; GET BYTE AGAIN
02731  25FF  C9 27              CMP #$27        ;'''
02732  2601  D0 03              BNE Q00000
02733  2603  20 11 1C           JSR PCHAR       ;PRINT ASCII
02734  2606              Q00000 = *
02735  2606              ; REV 2-12-2018 END
02736  2606  20 13 27           JSR NEXTBY      ;INC SELECT
02737  2609  B0 0D              BCS EASCI1      ;C=1 IF END
02738  260B  EE 51 10           INC TEMP        ;INC COUNT
02739  260E  AD 51 10           LDA TEMP        ;LOAD COUNT
02740  2611  C9 28              CMP #$28        ;40 CHAR
02741  2613  F0 08              BEQ EASCII      ;IF SO END
02742  2615  4C F1 25           JMP ALOP        ;NEXT
02743  2618              ;*********************************
02744  2618  20 1D 26    EASCI1 JSR EASCII
02745  261B  38                 SEC
02746  261C  60                 RTS
02747  261D              ;*********************************
02748  261D  A9 27       EASCII LDA #'''        ;PRINT ONE QUOTE
02749  261F  20 11 1C           JSR PCHAR       ;
02750  2622  4C FE 1A           JMP NEWLIN      ;PRINT CR
02751  2625              ;*********************************
02752  2625  20 D0 20    NASCII JSR DOLLAR      ;PRINT $
02753  2628  20 2C 21           JSR GETSL       ;GET BYTE
02754  262B  20 A5 1B           JSR PRBYT       ;PRINT IT
02755  262E  20 FE 1A           JSR NEWLIN      ;PRINT CR
02756  2631  4C 13 27           JMP NEXTBY      ;NEXT SL
02757  2634              ;*********************************
02758  2634              ; CHECK ACCUM FOR PRINTABLE ASCII
02759  2634              ;*********************************
02760  2634  C9 20       CASCII CMP #$20        ;< SPACE






PDISASS64.ASM......PAGE 0054

LINE# LOC   CODE        LINE


02761  2636  30 06              BMI NOASC       ;IF LESS NOASCII
02762  2638  C9 60              CMP #$60        ;> _
02763  263A  B0 02              BCS NOASC       ;IF GREATER NO
02764  263C  18                 CLC             ;CLEAR CARRY OK
02765  263D  60                 RTS             ;RETURN
02766  263E  38          NOASC  SEC             ;SET CARRY BAD
02767  263F  60                 RTS             ;RETURN
02768  2640              ;*********************************
02769  2640              ; .DBYTE DIRECTIVE
02770  2640              ;*********************************
02771  2640  AD 12 10    DBYTES LDA PASS        ;CHECK PASS
02772  2643  CD 15 10           CMP CPASS       ;LAST PASS
02773  2646  D0 25              BNE DBYTEX      ;EXIT
02774  2648  20 A8 21           JSR PRTTWO      ;PRINT 2 BYTES
02775  264B  20 8A 20           JSR PRAD        ;PRINT ADDRESS
02776  264E  A0 27              LDY #>MDBYTE    ;.DBYTE
02777  2650  A9 3C              LDA #<MDBYTE    ;
02778  2652  20 BB 1B           JSR STRPNT      ;PRINT IT
02779  2655  20 2C 21           JSR GETSL       ;GET BYTE
02780  2658  8D 46 10           STA WORKED+1    ;STORE
02781  265B  20 23 21           JSR INCSL       ;GET BYTE
02782  265E  20 2C 21           JSR GETSL       ;GET BYTE
02783  2661  8D 45 10           STA WORKED      ;STORE
02784  2664  20 D0 20           JSR DOLLAR      ;PRINT $
02785  2667  20 C2 20           JSR PWORKD      ;PRINT WORD
02786  266A  20 FE 1A           JSR NEWLIN      ;PRINT CR
02787  266D  4C 13 27    DBYTEX JMP NEXTBY      ;NEXT SL
02788  2670              ;*********************************
02789  2670              ; .WORD DIRECTIVE
02790  2670              ;*********************************
02791  2670  AD 12 10    WORDS  LDA PASS        ;GET PASS
02792  2673  CD 15 10           CMP CPASS         ;LAST
02793  2676  D0 0D              BNE WORD1       ;IF NOT BRANCH
02794  2678  20 A8 21           JSR PRTTWO      ;PRINT 2 BYTES
02795  267B  20 8A 20           JSR PRAD        ;PRINT ADDRESS
02796  267E  A0 27              LDY #>MWORD     ;.WORD
02797  2680  A9 34              LDA #<MWORD     ;
02798  2682  20 BB 1B           JSR STRPNT      ;PRINT IT
02799  2685              ;*********************************
02800  2685              ; GET WORD INTO WORKED
02801  2685              ;*********************************
02802  2685  20 2C 21    WORD1  JSR GETSL       ;GET BYTE
02803  2688  8D 45 10           STA WORKED      ;STORE BYTE
02804  268B  8D 36 10           STA SMALLP      ;STORE BYTE
02805  268E  20 23 21           JSR INCSL       ;GET BYTE
02806  2691  20 2C 21           JSR GETSL       ;GET BYTE
02807  2694  8D 46 10           STA WORKED+1    ;STORE BYTE
02808  2697  8D 37 10           STA SMALLP+1    ;STORE BYTE
02809  269A  AD E6 10           LDA TEXTER      ;GET OPTION
02810  269D  C9 34              CMP #'4'          ;.WORD ADRS-1
02811  269F  F0 2A              BEQ WORDM       ;BRANCH
02812  26A1              ;*********************************
02813  26A1              ; CHECK PASS
02814  26A1              ;*********************************
02815  26A1  AD 12 10           LDA PASS        ;CHECK PASS






PDISASS64.ASM......PAGE 0055

LINE# LOC   CODE        LINE


02816  26A4  CD 13 10           CMP IPASS       ;INTERNAL
02817  26A7  F0 16              BEQ WORDPT      ;TABLE WORD
02818  26A9  CD 14 10           CMP EPASS
02819  26AC  F0 17              BEQ WORDSY
02820  26AE              ;*********************************
02821  26AE              ; PRINT WORD
02822  26AE              ;*********************************
02823  26AE  20 5C 2B           JSR SYMOP       ;CHECK SYMBOL
02824  26B1  B0 5A              BCS WORDS3      ;C=1 SYMBOL
02825  26B3  20 D0 20           JSR DOLLAR      ;PRINT $
02826  26B6  20 C2 20           JSR PWORKD      ;PRINT WORD
02827  26B9  20 FE 1A           JSR NEWLIN      ;PRINT CR
02828  26BC  4C 13 27    WORDSX JMP NEXTBY      ;NEXT SL
02829  26BF  20 B3 22    WORDPT JSR PUTI        ;PUT IN TABLE
02830  26C2  4C 13 27           JMP NEXTBY      ;NEXT SL
02831  26C5  20 5C 2B    WORDSY JSR SYMOP
02832  26C8  4C 13 27           JMP NEXTBY
02833  26CB              ;*********************************
02834  26CB              ; .WORD ADDRESS-1
02835  26CB              ;*********************************
02836  26CB  18          WORDM  CLC
02837  26CC  AD 45 10           LDA WORKED
02838  26CF  69 01              ADC #$01
02839  26D1  8D 45 10           STA WORKED
02840  26D4  AD 46 10           LDA WORKED+1
02841  26D7  69 00              ADC #$00
02842  26D9  8D 46 10           STA WORKED+1
02843  26DC              ;*********************************
02844  26DC              ; CHECK PASS
02845  26DC              ;*********************************
02846  26DC  AD 12 10           LDA PASS        ;CHECK PASS
02847  26DF  CD 13 10           CMP IPASS       ;INTERNAL
02848  26E2  F0 DB              BEQ WORDPT      ;TABLE WORD
02849  26E4  CD 14 10           CMP EPASS       ;EXTERNAL
02850  26E7  F0 DC              BEQ WORDSY      ;TABLE WORD
02851  26E9              ;*********************************
02852  26E9              ; PRINT WORD
02853  26E9              ;*********************************
02854  26E9  20 5C 2B           JSR SYMOP       ;CHECK SYMBOL
02855  26EC  90 0D              BCC WORDS2      ;C=0 NO SYMBOL
02856  26EE  A9 2D              LDA #'-'
02857  26F0  20 11 1C           JSR PCHAR
02858  26F3  A9 31              LDA #'1'
02859  26F5  20 11 1C           JSR PCHAR
02860  26F8  4C 0D 27           JMP WORDS3
02861  26FB              ;*********************************
02862  26FB  20 D0 20    WORDS2 JSR DOLLAR      ;PRINT $
02863  26FE  AD 36 10           LDA SMALLP
02864  2701  8D 45 10           STA WORKED
02865  2704  AD 37 10           LDA SMALLP+1
02866  2707  8D 46 10           STA WORKED+1
02867  270A  20 C2 20           JSR PWORKD      ;PRINT WORD
02868  270D  20 FE 1A    WORDS3 JSR NEWLIN      ;PRINT CR
02869  2710  4C 13 27    WORDXX JMP NEXTBY      ;NEXT SL
02870  2713              ;*********************************






PDISASS64.ASM......PAGE 0056

LINE# LOC   CODE        LINE


02871  2713              ; SELECT NEXT BYTE OF DATA
02872  2713              ;*********************************
02873  2713  AD 23 10    NEXTBY LDA SELECT+1
02874  2716  CD E5 10           CMP EAS+1
02875  2719  90 0A              BCC SBLOK
02876  271B  D0 0D              BNE NOBINC
02877  271D  AD 22 10           LDA SELECT
02878  2720  CD E4 10           CMP EAS
02879  2723  B0 05              BCS NOBINC
02880  2725  20 23 21    SBLOK  JSR INCSL
02881  2728  18                 CLC
02882  2729  60                 RTS
02883  272A  38          NOBINC SEC
02884  272B  60                 RTS
02885  272C              ;*********************************
02886  272C  20 2E       MBYTE  .BYTE ' .BYTE ',0
02886  2733  00 
02887  2734  20 2E       MWORD  .BYTE ' .WORD ',0
02887  273B  00 
02888  273C  20 2E       MDBYTE .BYTE ' .DBYTE ',0
02888  2744  00 
02889  2745              ;*********************************
02890  2745              ;.FIL 0:TABLE.ASM
02891  2745              ;*********************************
02892  2745              ;.END
02893  2745              ;*********************************
02894  2745              ; FILE TABLE.ASM
02895  2745              ;*********************************
02896  2745              ;
02897  2745              ;        DISASSEMBLER64
02898  2745              ;    SYMBOLIC DISASSEMBLER
02899  2745              ;       BY DENTON MARLOWE
02900  2745              ;
02901  2745              ;  (C)1986 BY DENTON MARLOWE
02902  2745              ;
02903  2745              ;*********************************
02904  2745              ;       PRINT MNEMONIC
02905  2745              ;
02906  2745              ; OPCODE IN A
02907  2745              ;
02908  2745              ; BUG ILLEGAL OPCODE WOULD PRINT OUT AS
02909  2745              ;
02910  2745              ; ZZZZ XX                 ...  .BYTE $XX ;??? ILL
EGAL OPCODE
02911  2745              ; WHERE THE "..." WERE THREE NULLS
02912  2745              ; BECAUSE ILLEGAL OPCODE MNEMONIC IS CODES AS 0,0
,0
02913  2745              ;
02914  2745              ;*********************************
02915  2745  A2 03       MNEMON LDX #3          ;3 CHARACTERS
02916  2747  8E 51 10           STX TEMP        ;COUNTER
02917  274A  AA                 TAX             ;CODE IS INDEX
02918  274B  BD C0 28           LDA MCODES,X    ;GET OFFSET
02919  274E  AA                 TAX             ;INDEX OFFSET
02920  274F  BD E8 27    MNLOOP LDA MNAMES,X    ;GET CHARACTER
02921  2752              ;BEGIN REV 2017-0
02922  2752  F0 09              BEQ ILLOP       ;ILLEGAL OPCODE MNEMONIC C
HAR IS A NULL






PDISASS64.ASM......PAGE 0057

LINE# LOC   CODE        LINE


02923  2754              ;END REV 2017-0
02924  2754  8E 53 10           STX SAVX        ;SAVE INDEX
02925  2757  20 11 1C           JSR PCHAR       ;PRINT CHAR
02926  275A  AE 53 10           LDX SAVX        ;GET INDEX
02927  275D              ;BEGIN REV 2017-1
02928  275D              ILLOP  = *
02929  275D              ;END REV 2017-0
02930  275D  E8                 INX             ;NEXT CHAR
02931  275E  CE 51 10           DEC TEMP        ;DEC COUNT
02932  2761  D0 EC              BNE MNLOOP      ;LOOP TILL 0
02933  2763  60                 RTS             ;RETURN
02934  2764              ;*********************************
02935  2764              ;        PRINT OPERAND
02936  2764              ;*********************************
02937  2764  48          PRTASS PHA             ;STACK INDEX
02938  2765  20 05 22           JSR PRTDAT      ;PRINT LINE DATA
02939  2768  68                 PLA             ;PULL INDEX
02940  2769  A8                 TAY             ;SAVE INDEX
02941  276A  A9 94              LDA #<SUBP
02942  276C  A2 27              LDX #>SUBP
02943  276E  4C 7E 27           JMP GETOPE      ;LOOK UP ROUTINE
02944  2771              ;*********************************
02945  2771  A8          OPERN1 TAY             ;SAVE INDEX
02946  2772  A9 B0              LDA #<SUBS1
02947  2774  A2 27              LDX #>SUBS1
02948  2776  4C 7E 27           JMP GETOPE      ;LOOK UP ROUTINE
02949  2779              ;*********************************
02950  2779  A8          OPERND TAY             ;SAVE INDEX
02951  277A  A9 CC              LDA #<SUBS
02952  277C  A2 27              LDX #>SUBS
02953  277E              ;*********************************
02954  277E              ; LOOK UP AND JMP TO ROUTINE
02955  277E              ;*********************************
02956  277E  85 DD       GETOPE STA ZEROUR      ;LOW TABLE
02957  2780  86 DE              STX ZEROUR+1    ;HIGH TABLE
02958  2782  B9 C0 29           LDA MODES,Y     ;GET OFFSET
02959  2785  A8                 TAY             ;INDEX OFFSET
02960  2786  B1 DD              LDA (ZEROUR),Y  ;GET LOW BYTE
02961  2788  8D 4F 10           STA ADRS        ;STORE
02962  278B  C8                 INY             ;INC INDEX
02963  278C  B1 DD              LDA (ZEROUR),Y  ;GET HIGH BYTE
02964  278E  8D 50 10           STA ADRS+1      ;STORE
02965  2791  6C 4F 10           JMP (ADRS)      ;INDIRECT JMP
02966  2794              ;*********************************
02967  2794              ; TABLE OF ADDRESSING MODE SUBS
02968  2794              ;*********************************
02969  2794              ; MACHINE LANGUAGE ROUTINES
02970  2794              ;*********************************
02971  2794              SUBP   = *             ; MODES
02972  2794  92 21       .WORD  PRTONE          ; 0  $00
02973  2796  92 21       .WORD  PRTONE          ; 2  $02
02974  2798  A8 21       .WORD  PRTTWO          ; 4  $04
02975  279A  A8 21       .WORD  PRTTWO          ; 6  $06
02976  279C  A8 21       .WORD  PRTTWO          ; 8  $08
02977  279E  A8 21       .WORD  PRTTWO          ; 10 $0A






PDISASS64.ASM......PAGE 0058

LINE# LOC   CODE        LINE


02978  27A0  CD 21       .WORD  PRTTHE          ; 12 $0C
02979  27A2  CD 21       .WORD  PRTTHE          ; 14 $0E
02980  27A4  CD 21       .WORD  PRTTHE          ; 16 $10
02981  27A6  92 21       .WORD  PRTONE          ; 18 $12
02982  27A8  A8 21       .WORD  PRTTWO          ; 20 $14
02983  27AA  A8 21       .WORD  PRTTWO          ; 22 $16
02984  27AC  A8 21       .WORD  PRTTWO          ; 24 $18
02985  27AE  CD 21       .WORD  PRTTHE          ; 26 $1A
02986  27B0              ;*********************************
02987  27B0              ; CODE ANALYSIS ROUTINES
02988  27B0              ;*********************************
02989  27B0              SUBS1  = *             ; MODES
02990  27B0  89 1F       .WORD  IMPONE          ; 0  $00
02991  27B2  89 1F       .WORD  IMPONE          ; 2  $02
02992  27B4  04 1F       .WORD  IMMEDT          ; 4  $04
02993  27B6  4D 1E       .WORD  ONEBYT          ; 6  $06
02994  27B8  4D 1E       .WORD  ONEBYT          ; 8  $08
02995  27BA  4D 1E       .WORD  ONEBYT          ; 10 $0A
02996  27BC  82 1E       .WORD  TWOBYT          ; 12 $0C
02997  27BE  82 1E       .WORD  TWOBYT          ; 14 $0E
02998  27C0  82 1E       .WORD  TWOBYT          ; 16 $10
02999  27C2  89 1F       .WORD  IMPONE          ; 18 $12
03000  27C4  C0 1F       .WORD  RELATV          ; 20 $14
03001  27C6  4D 1E       .WORD  ONEBYT          ; 22 $16
03002  27C8  4D 1E       .WORD  ONEBYT          ; 24 $18
03003  27CA  82 1E       .WORD  TWOBYT          ; 26 $1A
03004  27CC              ;*********************************
03005  27CC              ; FINAL PASS ADDRESSING MODES
03006  27CC              ;*********************************
03007  27CC              SUBS   = *             ; MODES
03008  27CC  BE 1E       .WORD  ILLEGL          ; 0  $00
03009  27CE  FF 1E       .WORD  ACC             ; 2  $02
03010  27D0  04 1F       .WORD  IMMEDT          ; 4  $04
03011  27D2  3B 1F       .WORD  ZEROPG          ; 6  $06
03012  27D4  3E 1F       .WORD  ZEROX           ; 8  $08
03013  27D6  44 1F       .WORD  ZEROY           ; 10 $0A
03014  27D8  4B 1F       .WORD  ABSLUT          ; 12 $0C
03015  27DA  70 1F       .WORD  ABSX            ; 14 $0E
03016  27DC  76 1F       .WORD  ABSY            ; 16 $10
03017  27DE  7C 1F       .WORD  IMPLID          ; 18 $12
03018  27E0  C0 1F       .WORD  RELATV          ; 20 $14
03019  27E2  AB 1F       .WORD  INDX            ; 22 $16
03020  27E4  B4 1F       .WORD  INDY            ; 24 $18
03021  27E6  96 1F       .WORD  INDRCT          ; 26 $1A
03022  27E8              ;*********************************
03023  27E8              ; LIST OF MNEMONICS
03024  27E8              ;*********************************
03025  27E8              MNAMES = *             ; MCODES
03026  27E8  00          .BYTE  0,0,0           ; 0   $00
03026  27E9  00 
03026  27EA  00 
03027  27EB  41 44 43    .BYTE  'ADC'           ; 3   $03
03028  27EE  41 4E 44    .BYTE  'AND'           ; 6   $06
03029  27F1  41 53 4C    .BYTE  'ASL'           ; 9   $09
03030  27F4  42 43 43    .BYTE  'BCC'           ; 12  $0C






PDISASS64.ASM......PAGE 0059

LINE# LOC   CODE        LINE


03031  27F7  42 43 53    .BYTE  'BCS'           ; 15  $0F
03032  27FA  42 45 51    .BYTE  'BEQ'           ; 18  $12
03033  27FD  42 49 54    .BYTE  'BIT'           ; 21  $15
03034  2800  42 4D 49    .BYTE  'BMI'           ; 24  $18
03035  2803  42 4E 45    .BYTE  'BNE'           ; 27  $1B
03036  2806  42 50 4C    .BYTE  'BPL'           ; 30  $1E
03037  2809  42 52 4B    .BYTE  'BRK'           ; 33  $21
03038  280C  42 56 43    .BYTE  'BVC'           ; 36  $24
03039  280F  42 56 53    .BYTE  'BVS'           ; 39  $27
03040  2812  43 4C 43    .BYTE  'CLC'           ; 42  $2A
03041  2815  43 4C 44    .BYTE  'CLD'           ; 45  $2D
03042  2818  43 4C 49    .BYTE  'CLI'           ; 48  $30
03043  281B  43 4C 56    .BYTE  'CLV'           ; 51  $33
03044  281E  43 4D 50    .BYTE  'CMP'           ; 54  $36
03045  2821  43 50 58    .BYTE  'CPX'           ; 57  $39
03046  2824  43 50 59    .BYTE  'CPY'           ; 60  $3C
03047  2827  44 45 43    .BYTE  'DEC'           ; 63  $3F
03048  282A  44 45 58    .BYTE  'DEX'           ; 66  $42
03049  282D  44 45 59    .BYTE  'DEY'           ; 69  $45
03050  2830  45 4F 52    .BYTE  'EOR'           ; 72  $48
03051  2833  49 4E 43    .BYTE  'INC'           ; 75  $4B
03052  2836  49 4E 58    .BYTE  'INX'           ; 78  $4E
03053  2839  49 4E 59    .BYTE  'INY'           ; 81  $51
03054  283C  4A 4D 50    .BYTE  'JMP'           ; 84  $54
03055  283F  4A 53 52    .BYTE  'JSR'           ; 87  $57
03056  2842  4C 44 41    .BYTE  'LDA'           ; 90  $5A
03057  2845  4C 44 58    .BYTE  'LDX'           ; 93  $5D
03058  2848  4C 44 59    .BYTE  'LDY'           ; 96  $60
03059  284B  4C 53 52    .BYTE  'LSR'           ; 99  $63
03060  284E  4E 4F 50    .BYTE  'NOP'           ; 102 $66
03061  2851  4F 52 41    .BYTE  'ORA'           ; 105 $69
03062  2854  50 48 41    .BYTE  'PHA'           ; 108 $6C
03063  2857  50 48 50    .BYTE  'PHP'           ; 111 $6F
03064  285A  50 4C 41    .BYTE  'PLA'           ; 114 $72
03065  285D  50 4C 50    .BYTE  'PLP'           ; 117 $75
03066  2860  52 4F 4C    .BYTE  'ROL'           ; 120 $78
03067  2863  52 4F 52    .BYTE  'ROR'           ; 123 $7B
03068  2866  52 54 49    .BYTE  'RTI'           ; 126 $7E
03069  2869  52 54 53    .BYTE  'RTS'           ; 129 $81
03070  286C  53 42 43    .BYTE  'SBC'           ; 132 $84
03071  286F  53 45 43    .BYTE  'SEC'           ; 135 $87
03072  2872  53 45 44    .BYTE  'SED'           ; 138 $8A
03073  2875  53 45 49    .BYTE  'SEI'           ; 141 $8D
03074  2878  53 54 41    .BYTE  'STA'           ; 144 $90
03075  287B  53 54 58    .BYTE  'STX'           ; 147 $93
03076  287E  53 54 59    .BYTE  'STY'           ; 150 $96
03077  2881  54 41 58    .BYTE  'TAX'           ; 153 $99
03078  2884  54 41 59    .BYTE  'TAY'           ; 156 $9C
03079  2887  54 53 58    .BYTE  'TSX'           ; 159 $9F
03080  288A  54 58 41    .BYTE  'TXA'           ; 162 $A2
03081  288D  54 58 53    .BYTE  'TXS'           ; 165 $A5
03082  2890  54 59 41    .BYTE  'TYA'           ; 168 $A8
03083  2893              ;*********************************
03084  2893              ; QUASI-OPCODES
03085  2893              ;*********************************






PDISASS64.ASM......PAGE 0060

LINE# LOC   CODE        LINE


03086  2893  41 53 4F    .BYTE  'ASO'           ; 171 $AB
03087  2896  52 4C 41    .BYTE  'RLA'           ; 174 $AE
03088  2899  4C 53 45    .BYTE  'LSE'           ; 177 $B1
03089  289C  52 52 41    .BYTE  'RRA'           ; 180 $B4
03090  289F  41 58 53    .BYTE  'AXS'           ; 183 $B7
03091  28A2  4C 41 58    .BYTE  'LAX'           ; 186 $BA
03092  28A5  44 43 4D    .BYTE  'DCM'           ; 189 $BD
03093  28A8  49 4E 53    .BYTE  'INS'           ; 192 $C0
03094  28AB  41 4C 52    .BYTE  'ALR'           ; 195 $C3
03095  28AE  41 52 52    .BYTE  'ARR'           ; 198 $C6
03096  28B1  4F 41 4C    .BYTE  'OAL'           ; 201 $C9
03097  28B4  53 41 58    .BYTE  'SAX'           ; 204 $CC
03098  28B7  4E 4F 50    .BYTE  'NOP'           ; 207 $CF
03099  28BA  53 4B 42    .BYTE  'SKB'           ; 210 $D2
03100  28BD  53 4B 57    .BYTE  'SKW'           ; 213 $D5
03101  28C0              ;*********************************
03102  28C0              ; TABLE OF MNEMONIC CODES
03103  28C0              ;*********************************
03104  28C0              ;
03105  28C0              ;A MNEMONIC'S CODE IS ITS OFFSET
03106  28C0              ;    INTO MNAMES, THE LIST OF
03107  28C0              ;         MNEONIC NAMES.
03108  28C0              ;
03109  28C0              ;*********************************
03110  28C0              MCODES = *
03111  28C0              ;     0X  1X  2X  3X  4X  5X  6X  7X
03112  28C0              ; 0X  BRK ORA KIL SLO NOP ORA ASL SLO
03113  28C0  21          .BYTE  $21,$69,$00,$00,$00,$69,$09,$00
03113  28C1  69 
03113  28C2  00 
03113  28C3  00 
03113  28C4  00 
03113  28C5  69 
03113  28C6  09 
03113  28C7  00 
03114  28C8              ;     8X  9X  AX  BX  CX  DX  EX  FX
03115  28C8                                     ;PHP ORA ASL ANC NOP ORA A
SL SLO
03116  28C8  6F          .BYTE  $6F,$69,$09,$00,$00,$69,$09,$00
03116  28C9  69 
03116  28CA  09 
03116  28CB  00 
03116  28CC  00 
03116  28CD  69 
03116  28CE  09 
03116  28CF  00 
03117  28D0              ; 1X  BPL ORA KIL SLO NOP ORA ASL SLO
03118  28D0  1E          .BYTE  $1E,$69,$00,$00,$00,$69,$09,$00
03118  28D1  69 
03118  28D2  00 
03118  28D3  00 
03118  28D4  00 
03118  28D5  69 
03118  28D6  09 
03118  28D7  00 
03119  28D8                                     ;CLC ORA NOP SLO NOP ORA A
SL SLO






PDISASS64.ASM......PAGE 0061

LINE# LOC   CODE        LINE


03120  28D8  2A          .BYTE  $2A,$69,$00,$00,$00,$69,$09,$00
03120  28D9  69 
03120  28DA  00 
03120  28DB  00 
03120  28DC  00 
03120  28DD  69 
03120  28DE  09 
03120  28DF  00 
03121  28E0              ; 2X  JSR AND KIL RLA BIT AND ROL RLA
03122  28E0  57          .BYTE  $57,$06,$00,$00,$15,$06,$78,$00
03122  28E1  06 
03122  28E2  00 
03122  28E3  00 
03122  28E4  15 
03122  28E5  06 
03122  28E6  78 
03122  28E7  00 
03123  28E8                                     ;PLP ABD ROL ANC BIT AND R
OL RLA
03124  28E8  75          .BYTE  $75,$06,$78,$00,$15,$06,$78,$00
03124  28E9  06 
03124  28EA  78 
03124  28EB  00 
03124  28EC  15 
03124  28ED  06 
03124  28EE  78 
03124  28EF  00 
03125  28F0              ; 3X  BMI AND KIL RLA NOP AND ROL RLA
03126  28F0  18          .BYTE  $18,$06,$00,$00,$00,$06,$78,$00
03126  28F1  06 
03126  28F2  00 
03126  28F3  00 
03126  28F4  00 
03126  28F5  06 
03126  28F6  78 
03126  28F7  00 
03127  28F8              ;     SEC AND NOP RLA NOP AND ROL RLA
03128  28F8  87          .BYTE  $87,$06,$00,$00,$00,$06,$78,$00
03128  28F9  06 
03128  28FA  00 
03128  28FB  00 
03128  28FC  00 
03128  28FD  06 
03128  28FE  78 
03128  28FF  00 
03129  2900              ; 4X  RTI EOR KIL SRE NOP EOR LSR SRE
03130  2900  7E          .BYTE  $7E,$48,$00,$00,$00,$48,$63,$00
03130  2901  48 
03130  2902  00 
03130  2903  00 
03130  2904  00 
03130  2905  48 
03130  2906  63 
03130  2907  00 
03131  2908              ;     PHA EOR LSR ALR JMP EOR LSR SRE
03132  2908  6C          .BYTE  $6C,$48,$63,$00,$54,$48,$63,$00






PDISASS64.ASM......PAGE 0062

LINE# LOC   CODE        LINE


03132  2909  48 
03132  290A  63 
03132  290B  00 
03132  290C  54 
03132  290D  48 
03132  290E  63 
03132  290F  00 
03133  2910              ; 5X  BVC EOR KIL SRE NOP EOR LSR SRE
03134  2910  24          .BYTE  $24,$48,$00,$00,$00,$48,$63,$00
03134  2911  48 
03134  2912  00 
03134  2913  00 
03134  2914  00 
03134  2915  48 
03134  2916  63 
03134  2917  00 
03135  2918              ;     CLI EOR NOP SRE NOP EOR LSR SRE
03136  2918  30          .BYTE  $30,$48,$00,$00,$00,$48,$63,$00
03136  2919  48 
03136  291A  00 
03136  291B  00 
03136  291C  00 
03136  291D  48 
03136  291E  63 
03136  291F  00 
03137  2920              ; 6X  RTS ADC KIL RRA NOP ADC ROR RRA
03138  2920  81          .BYTE  $81,$03,$00,$00,$00,$03,$7B,$00
03138  2921  03 
03138  2922  00 
03138  2923  00 
03138  2924  00 
03138  2925  03 
03138  2926  7B 
03138  2927  00 
03139  2928              ;     PLA ADC ROR ARR JMP ADC ROR RRA
03140  2928  72          .BYTE  $72,$03,$7B,$00,$54,$03,$7B,$00
03140  2929  03 
03140  292A  7B 
03140  292B  00 
03140  292C  54 
03140  292D  03 
03140  292E  7B 
03140  292F  00 
03141  2930              ; 7X  BVS ADC KIL RRA NOP ADC ROR RRA
03142  2930  27          .BYTE  $27,$03,$00,$00,$00,$03,$7B,$00
03142  2931  03 
03142  2932  00 
03142  2933  00 
03142  2934  00 
03142  2935  03 
03142  2936  7B 
03142  2937  00 
03143  2938              ;     SEI ADC NOP RRA NOP ADC ROR RRA
03144  2938  8D          .BYTE  $8D,$03,$00,$00,$00,$03,$7B,$00
03144  2939  03 






PDISASS64.ASM......PAGE 0063

LINE# LOC   CODE        LINE


03144  293A  00 
03144  293B  00 
03144  293C  00 
03144  293D  03 
03144  293E  7B 
03144  293F  00 
03145  2940              ; 8X  NOP STA NOP SAX STY STA STX SAX
03146  2940  00          .BYTE  $00,$90,$00,$00,$96,$90,$93,$00
03146  2941  90 
03146  2942  00 
03146  2943  00 
03146  2944  96 
03146  2945  90 
03146  2946  93 
03146  2947  00 
03147  2948              ;     DEY NOP TXA XXA STY STA STX SAX
03148  2948  45          .BYTE  $45,$00,$A2,$00,$96,$90,$93,$00
03148  2949  00 
03148  294A  A2 
03148  294B  00 
03148  294C  96 
03148  294D  90 
03148  294E  93 
03148  294F  00 
03149  2950              ; 9X  BCC STA KIL AHX STY STA STX SAX 
03150  2950  0C          .BYTE  $0C,$90,$00,$00,$96,$90,$93,$00
03150  2951  90 
03150  2952  00 
03150  2953  00 
03150  2954  96 
03150  2955  90 
03150  2956  93 
03150  2957  00 
03151  2958              ;     TYA STA TXS TAS SHY STA SHX AHX
03152  2958  A8          .BYTE  $A8,$90,$A5,$00,$00,$90,$00,$00
03152  2959  90 
03152  295A  A5 
03152  295B  00 
03152  295C  00 
03152  295D  90 
03152  295E  00 
03152  295F  00 
03153  2960              ; AX  LDY LDA LDX LAX LDY LDA LDX LAX
03154  2960  60          .BYTE  $60,$5A,$5D,$00,$60,$5A,$5D,$00
03154  2961  5A 
03154  2962  5D 
03154  2963  00 
03154  2964  60 
03154  2965  5A 
03154  2966  5D 
03154  2967  00 
03155  2968              ;     TAY LDA TAX LAX LDY LDA LDX LAX
03156  2968  9C          .BYTE  $9C,$5A,$99,$00,$60,$5A,$5D,$00
03156  2969  5A 
03156  296A  99 






PDISASS64.ASM......PAGE 0064

LINE# LOC   CODE        LINE


03156  296B  00 
03156  296C  60 
03156  296D  5A 
03156  296E  5D 
03156  296F  00 
03157  2970              ; BX  BCS LDA KIL LAX LDY LDA LDX LAX
03158  2970  0F          .BYTE  $0F,$5A,$00,$00,$60,$5A,$5D,$00
03158  2971  5A 
03158  2972  00 
03158  2973  00 
03158  2974  60 
03158  2975  5A 
03158  2976  5D 
03158  2977  00 
03159  2978              ;     CLV LDA TSX LAS LDY LDA LDX LAX
03160  2978  33          .BYTE  $33,$5A,$9F,$00,$60,$5A,$5D,$00
03160  2979  5A 
03160  297A  9F 
03160  297B  00 
03160  297C  60 
03160  297D  5A 
03160  297E  5D 
03160  297F  00 
03161  2980              ; CX  CPY CMP NOP DCP CPY CMP DEC DCP
03162  2980  3C          .BYTE  $3C,$36,$00,$00,$3C,$36,$3F,$00
03162  2981  36 
03162  2982  00 
03162  2983  00 
03162  2984  3C 
03162  2985  36 
03162  2986  3F 
03162  2987  00 
03163  2988              ;     INY CMP DEX AXS CPY CMP DEC DCP
03164  2988  51          .BYTE  $51,$36,$42,$00,$3C,$36,$3F,$00
03164  2989  36 
03164  298A  42 
03164  298B  00 
03164  298C  3C 
03164  298D  36 
03164  298E  3F 
03164  298F  00 
03165  2990              ; DX  BNE CMP KIL DCP NOP CMP DEC DCP
03166  2990  1B          .BYTE  $1B,$36,$00,$00,$00,$36,$3F,$00
03166  2991  36 
03166  2992  00 
03166  2993  00 
03166  2994  00 
03166  2995  36 
03166  2996  3F 
03166  2997  00 
03167  2998              ;     CLD CMP NOP DCP NOP CMP DEC DCP
03168  2998  2D          .BYTE  $2D,$36,$00,$00,$00,$36,$3F,$00
03168  2999  36 
03168  299A  00 
03168  299B  00 






PDISASS64.ASM......PAGE 0065

LINE# LOC   CODE        LINE


03168  299C  00 
03168  299D  36 
03168  299E  3F 
03168  299F  00 
03169  29A0              ; EX  CPX SBC NOP ISC CPX SBC INC ISC
03170  29A0  39          .BYTE  $39,$84,$00,$00,$39,$84,$4B,$00
03170  29A1  84 
03170  29A2  00 
03170  29A3  00 
03170  29A4  39 
03170  29A5  84 
03170  29A6  4B 
03170  29A7  00 
03171  29A8              ;     INX SBC NOP SBC CPX SBC INC ISC
03172  29A8  4E          .BYTE  $4E,$84,$66,$00,$39,$84,$4B,$00
03172  29A9  84 
03172  29AA  66 
03172  29AB  00 
03172  29AC  39 
03172  29AD  84 
03172  29AE  4B 
03172  29AF  00 
03173  29B0              ; FX  BEQ SBC KIL ISC NOP SBC INC ISC
03174  29B0  12          .BYTE  $12,$84,$00,$00,$00,$84,$4B,$00
03174  29B1  84 
03174  29B2  00 
03174  29B3  00 
03174  29B4  00 
03174  29B5  84 
03174  29B6  4B 
03174  29B7  00 
03175  29B8              ;     SED SBC NOP ISC NOP SBC INC ISC
03176  29B8  8A          .BYTE  $8A,$84,$00,$00,$00,$84,$4B,$00
03176  29B9  84 
03176  29BA  00 
03176  29BB  00 
03176  29BC  00 
03176  29BD  84 
03176  29BE  4B 
03176  29BF  00 
03177  29C0              ;*********************************
03178  29C0              ; TABLE OF ADDRESSING MODE CODES
03179  29C0              ;*********************************
03180  29C0              ;
03181  29C0              ; AN ADDRESSING MODE'S CODE IS
03182  29C0              ; ITS OFFSET INTO SUBS, THE TABLE
03183  29C0              ; OF ADDRESSING MODE SUBROUTINES
03184  29C0              ;
03185  29C0              ; ILLEGL ; 0  $00
03186  29C0              ; ACC    ; 2  $02
03187  29C0              ; IMMEDT ; 4  $04
03188  29C0              ; ZEROPG ; 6  $06
03189  29C0              ; ZEROX  ; 8  $08
03190  29C0              ; ZEROY  ; 10 $0A
03191  29C0              ; ABSLUT ; 12 $0C






PDISASS64.ASM......PAGE 0066

LINE# LOC   CODE        LINE


03192  29C0              ; ABSX   ; 14 $0E
03193  29C0              ; ABSY   ; 16 $10
03194  29C0              ; IMPLID ; 18 $12
03195  29C0              ; RELATV ; 20 $14
03196  29C0              ; INDX   ; 22 $16
03197  29C0              ; INDY   ; 24 $18
03198  29C0              ; INDRCT ; 26 $1A
03199  29C0              ;*********************************
03200  29C0              MODES  = * 
03201  29C0              ; 0X   0  1 2 3 4 5 6 7
03202  29C0  12          .BYTE  18,22,0,0,0,6,6,0
03202  29C1  16 
03202  29C2  00 
03202  29C3  00 
03202  29C4  00 
03202  29C5  06 
03202  29C6  06 
03202  29C7  00 
03203  29C8              ;      8  9 A B C D E F
03204  29C8  12          .BYTE  18,4,2,0,0,12,12,0
03204  29C9  04 
03204  29CA  02 
03204  29CB  00 
03204  29CC  00 
03204  29CD  0C 
03204  29CE  0C 
03204  29CF  00 
03205  29D0              ; 1X   0  1 2 3 4 5 6 7
03206  29D0  14          .BYTE  20,24,0,0,0,8,8,0
03206  29D1  18 
03206  29D2  00 
03206  29D3  00 
03206  29D4  00 
03206  29D5  08 
03206  29D6  08 
03206  29D7  00 
03207  29D8              ;      8  9 A B C D E F
03208  29D8  12          .BYTE  18,16,0,0,0,14,14,0
03208  29D9  10 
03208  29DA  00 
03208  29DB  00 
03208  29DC  00 
03208  29DD  0E 
03208  29DE  0E 
03208  29DF  00 
03209  29E0              ; 2X   0  1 2 3 4 5 6 7
03210  29E0  0C          .BYTE  12,22,0,0,6,6,6,0
03210  29E1  16 
03210  29E2  00 
03210  29E3  00 
03210  29E4  06 
03210  29E5  06 
03210  29E6  06 
03210  29E7  00 
03211  29E8              ;.BYTE 12,22,0,0,28,6,6,0






PDISASS64.ASM......PAGE 0067

LINE# LOC   CODE        LINE


03212  29E8              ;      8  9 A B C D E F
03213  29E8  12          .BYTE  18,4,2,0,12,12,12,0
03213  29E9  04 
03213  29EA  02 
03213  29EB  00 
03213  29EC  0C 
03213  29ED  0C 
03213  29EE  0C 
03213  29EF  00 
03214  29F0              ;.BYTE 18,4,2,0,30,12,12,0
03215  29F0              ; 3X   0  1 2 3 4 5 6 7
03216  29F0  14          .BYTE  20,24,0,0,0,8,8,0
03216  29F1  18 
03216  29F2  00 
03216  29F3  00 
03216  29F4  00 
03216  29F5  08 
03216  29F6  08 
03216  29F7  00 
03217  29F8              ;      8  9 A B C D E F
03218  29F8  12          .BYTE  18,16,0,0,0,14,14,0
03218  29F9  10 
03218  29FA  00 
03218  29FB  00 
03218  29FC  00 
03218  29FD  0E 
03218  29FE  0E 
03218  29FF  00 
03219  2A00              ; 4X   0  1 2 3 4 5 6 7
03220  2A00  12          .BYTE  18,22,0,0,0,6,6,0
03220  2A01  16 
03220  2A02  00 
03220  2A03  00 
03220  2A04  00 
03220  2A05  06 
03220  2A06  06 
03220  2A07  00 
03221  2A08              ;      8  9 A B C D E F
03222  2A08  12          .BYTE  18,4,2,0,12,12,12,0
03222  2A09  04 
03222  2A0A  02 
03222  2A0B  00 
03222  2A0C  0C 
03222  2A0D  0C 
03222  2A0E  0C 
03222  2A0F  00 
03223  2A10              ; 5X   0  1 2 3 4 5 6 7
03224  2A10  14          .BYTE  20,24,0,0,0,8,8,0
03224  2A11  18 
03224  2A12  00 
03224  2A13  00 
03224  2A14  00 
03224  2A15  08 
03224  2A16  08 
03224  2A17  00 






PDISASS64.ASM......PAGE 0068

LINE# LOC   CODE        LINE


03225  2A18              ;      8  9 A B C D E F
03226  2A18  12          .BYTE  18,16,0,0,0,14,14,0
03226  2A19  10 
03226  2A1A  00 
03226  2A1B  00 
03226  2A1C  00 
03226  2A1D  0E 
03226  2A1E  0E 
03226  2A1F  00 
03227  2A20              ; 6X   0  1 2 3 4 5 6 7
03228  2A20  12          .BYTE  18,22,0,0,0,6,6,0
03228  2A21  16 
03228  2A22  00 
03228  2A23  00 
03228  2A24  00 
03228  2A25  06 
03228  2A26  06 
03228  2A27  00 
03229  2A28              ;      8  9 A B C D E F
03230  2A28  12          .BYTE  18,4,2,0,26,12,12,0
03230  2A29  04 
03230  2A2A  02 
03230  2A2B  00 
03230  2A2C  1A 
03230  2A2D  0C 
03230  2A2E  0C 
03230  2A2F  00 
03231  2A30              ; 7X   0  1 2 3 4 5 6 7
03232  2A30  14          .BYTE  20,24,0,0,0,8,8,0
03232  2A31  18 
03232  2A32  00 
03232  2A33  00 
03232  2A34  00 
03232  2A35  08 
03232  2A36  08 
03232  2A37  00 
03233  2A38              ;      8  9 A B C D E F
03234  2A38  12          .BYTE  18,16,0,0,0,14,14,0
03234  2A39  10 
03234  2A3A  00 
03234  2A3B  00 
03234  2A3C  00 
03234  2A3D  0E 
03234  2A3E  0E 
03234  2A3F  00 
03235  2A40              ; 8X   0  1 2 3 4 5 6 7
03236  2A40  00          .BYTE  0,22,0,0,6,6,6,0
03236  2A41  16 
03236  2A42  00 
03236  2A43  00 
03236  2A44  06 
03236  2A45  06 
03236  2A46  06 
03236  2A47  00 
03237  2A48              ;      8  9 A B C D E F






PDISASS64.ASM......PAGE 0069

LINE# LOC   CODE        LINE


03238  2A48  12          .BYTE  18,0,18,0,12,12,12,0
03238  2A49  00 
03238  2A4A  12 
03238  2A4B  00 
03238  2A4C  0C 
03238  2A4D  0C 
03238  2A4E  0C 
03238  2A4F  00 
03239  2A50              ; 9X   0  1 2 3 4 5 6 7
03240  2A50  14          .BYTE  20,24,0,0,8,8,10,0
03240  2A51  18 
03240  2A52  00 
03240  2A53  00 
03240  2A54  08 
03240  2A55  08 
03240  2A56  0A 
03240  2A57  00 
03241  2A58              ;      8  9 A B C D E F
03242  2A58  12          .BYTE  18,16,18,0,0,14,0,0
03242  2A59  10 
03242  2A5A  12 
03242  2A5B  00 
03242  2A5C  00 
03242  2A5D  0E 
03242  2A5E  00 
03242  2A5F  00 
03243  2A60              ; AX   0  1 2 3 4 5 6 7
03244  2A60  04          .BYTE  4,22,4,0,6,6,6,0
03244  2A61  16 
03244  2A62  04 
03244  2A63  00 
03244  2A64  06 
03244  2A65  06 
03244  2A66  06 
03244  2A67  00 
03245  2A68              ;      8  9 A B C D E F
03246  2A68  12          .BYTE  18,4,18,0,12,12,12,0
03246  2A69  04 
03246  2A6A  12 
03246  2A6B  00 
03246  2A6C  0C 
03246  2A6D  0C 
03246  2A6E  0C 
03246  2A6F  00 
03247  2A70              ; BX   0  1 2 3 4 5 6 7
03248  2A70  14          .BYTE  20,24,0,0,8,8,10,0
03248  2A71  18 
03248  2A72  00 
03248  2A73  00 
03248  2A74  08 
03248  2A75  08 
03248  2A76  0A 
03248  2A77  00 
03249  2A78              ;      8  9 A B C D E F
03250  2A78  12          .BYTE  18,16,18,0,14,14,16,0






PDISASS64.ASM......PAGE 0070

LINE# LOC   CODE        LINE


03250  2A79  10 
03250  2A7A  12 
03250  2A7B  00 
03250  2A7C  0E 
03250  2A7D  0E 
03250  2A7E  10 
03250  2A7F  00 
03251  2A80              ; CX   0  1 2 3 4 5 6 7
03252  2A80  04          .BYTE  4,22,0,0,6,6,6,0
03252  2A81  16 
03252  2A82  00 
03252  2A83  00 
03252  2A84  06 
03252  2A85  06 
03252  2A86  06 
03252  2A87  00 
03253  2A88              ;      8  9 A B C D E F
03254  2A88  12          .BYTE  18,4,18,0,12,12,12,0
03254  2A89  04 
03254  2A8A  12 
03254  2A8B  00 
03254  2A8C  0C 
03254  2A8D  0C 
03254  2A8E  0C 
03254  2A8F  00 
03255  2A90              ; DX   0  1 2 3 4 5 6 7
03256  2A90  14          .BYTE  20,24,0,0,0,8,8,0
03256  2A91  18 
03256  2A92  00 
03256  2A93  00 
03256  2A94  00 
03256  2A95  08 
03256  2A96  08 
03256  2A97  00 
03257  2A98              ;      8  9 A B C D E F
03258  2A98  12          .BYTE  18,16,0,0,0,14,14,0
03258  2A99  10 
03258  2A9A  00 
03258  2A9B  00 
03258  2A9C  00 
03258  2A9D  0E 
03258  2A9E  0E 
03258  2A9F  00 
03259  2AA0              ; EX   0  1 2 3 4 5 6 7
03260  2AA0  04          .BYTE  4,22,0,0,6,6,6,0
03260  2AA1  16 
03260  2AA2  00 
03260  2AA3  00 
03260  2AA4  06 
03260  2AA5  06 
03260  2AA6  06 
03260  2AA7  00 
03261  2AA8              ;      8  9 A B C D E F
03262  2AA8  12          .BYTE  18,4,18,0,12,12,12,0
03262  2AA9  04 






PDISASS64.ASM......PAGE 0071

LINE# LOC   CODE        LINE


03262  2AAA  12 
03262  2AAB  00 
03262  2AAC  0C 
03262  2AAD  0C 
03262  2AAE  0C 
03262  2AAF  00 
03263  2AB0              ; FX   0  1 2 3 4 5 6 7
03264  2AB0  14          .BYTE  20,24,0,0,0,8,8,0
03264  2AB1  18 
03264  2AB2  00 
03264  2AB3  00 
03264  2AB4  00 
03264  2AB5  08 
03264  2AB6  08 
03264  2AB7  00 
03265  2AB8              ;      8  9 A B C D E F
03266  2AB8  12          .BYTE  18,16,0,0,0,14,14,0
03266  2AB9  10 
03266  2ABA  00 
03266  2ABB  00 
03266  2ABC  00 
03266  2ABD  0E 
03266  2ABE  0E 
03266  2ABF  00 
03267  2AC0              ;*********************************
03268  2AC0              ;.FIL 0:SYM.ASM
03269  2AC0              ;*********************************
03270  2AC0              ;.END
03271  2AC0              ;*********************************
03272  2AC0              ; FILE SYMBOL.ASM
03273  2AC0              ;*********************************
03274  2AC0              ;
03275  2AC0              ;        DISASSEMBLER64
03276  2AC0              ;    SYMBOLIC DISASSEMBLER
03277  2AC0              ;       BY DENTON MARLOWE
03278  2AC0              ;
03279  2AC0              ;  (C)1986 BY DENTON MARLOWE
03280  2AC0              ;
03281  2AC0              ;*********************************
03282  2AC0              ; SYMBOLIC ROUTINES
03283  2AC0              ;*********************************
03284  2AC0              ; SYMBOLIC DISASSEMBLY OPTION
03285  2AC0              ;*********************************
03286  2AC0  A9 2D       SOP    LDA #<MSS1      ;LOW BYTE MESSAGE
03287  2AC2  A0 2E              LDY #>MSS1      ;HIGH BYTE MESSAGE
03288  2AC4  20 BB 1B           JSR STRPNT      ;OUTPUT MESSAGE
03289  2AC7              ;      JSR CRNO    ;GET KEY PRESS
03290  2AC7  20 83 1B           JSR CRYS
03291  2ACA  90 08              BCC SOP1        ;C=0 YES
03292  2ACC              ;*********************************
03293  2ACC              ; ABSOLUTE DISASSEMBLY SELECTED
03294  2ACC              ;*********************************
03295  2ACC  A9 00              LDA #$00        ;SET SYMBLOIC FLAG
03296  2ACE  8D 38 10           STA SYMBOL      ;STORE FLAG
03297  2AD1  4C 1D 2B           JMP SY          ;FOR INTERNAL






PDISASS64.ASM......PAGE 0072

LINE# LOC   CODE        LINE


03298  2AD4              ;*********************************
03299  2AD4              ; SYMBOLIC DISASSEMBLY SELECTED
03300  2AD4              ;*********************************
03301  2AD4  A9 01       SOP1   LDA #$01        ;SET SYMBOLIC FLAG
03302  2AD6  8D 38 10           STA SYMBOL      ;STORE FLAG
03303  2AD9              ;*********************************
03304  2AD9              ; SETUP START OF TABLE POINTER
03305  2AD9              ;*********************************
03306  2AD9  A9 70              LDA #<STABLE
03307  2ADB  8D 3B 10           STA SYMBOS
03308  2ADE  8D 39 10           STA SYMBOP
03309  2AE1  A9 37              LDA #>STABLE
03310  2AE3  8D 3C 10           STA SYMBOS+1
03311  2AE6  8D 3A 10           STA SYMBOP+1
03312  2AE9              ;*********************************
03313  2AE9              ; CHECK FOR SYMBOL TABLE OPTION
03314  2AE9              ;*********************************
03315  2AE9  A9 51       SYTAB  LDA #<MSS2      ;LOW BYTE MESSAGE
03316  2AEB  A0 2E              LDY #>MSS2      ;HIGH BYTE MESSAGE
03317  2AED  20 BB 1B           JSR STRPNT      ;OUTPUT MESSAGE
03318  2AF0  20 90 1B           JSR CRNO        ;GET KEY PRESS
03319  2AF3  B0 28              BCS SY          ;C=1 NO
03320  2AF5              ;*********************************
03321  2AF5              ; APPEND SYMBOL TABLE
03322  2AF5              ;*********************************
03323  2AF5  A9 95              LDA #<MSS4
03324  2AF7  A0 2E              LDY #>MSS4
03325  2AF9  20 BB 1B           JSR STRPNT
03326  2AFC  20 90 1B           JSR CRNO
03327  2AFF  B0 0A              BCS SOP4
03328  2B01  A9 F3              LDA #<UTABLE
03329  2B03  8D 39 10           STA SYMBOP
03330  2B06  A9 38              LDA #>UTABLE
03331  2B08  8D 3A 10           STA SYMBOP+1
03332  2B0B              ;*********************************
03333  2B0B              ; GO AND LOAD TABLE
03334  2B0B              ;*********************************
03335  2B0B  20 B0 2C    SOP4   JSR READXX      ;READ FILE
03336  2B0E  B0 0D              BCS SY          ;C=1 ERROR
03337  2B10              ;*********************************
03338  2B10              ; SETUP END OF TABLE POINTER
03339  2B10              ;*********************************
03340  2B10  AD 39 10           LDA SYMBOP      ;XREF POINTER
03341  2B13  8D 3D 10           STA SYMBOE
03342  2B16  AD 3A 10           LDA SYMBOP+1
03343  2B19  8D 3E 10           STA SYMBOE+1
03344  2B1C  60                 RTS
03345  2B1D              ;*********************************
03346  2B1D              ; DEFAULT SYMBOL TABLE END
03347  2B1D              ;*********************************
03348  2B1D  A9 F3       SY     LDA #<UTABLE
03349  2B1F  8D 3D 10           STA SYMBOE
03350  2B22  A9 38              LDA #>UTABLE
03351  2B24  8D 3E 10           STA SYMBOE+1
03352  2B27  60                 RTS






PDISASS64.ASM......PAGE 0073

LINE# LOC   CODE        LINE


03353  2B28              ;*********************************
03354  2B28              ; SET OR RESET SYMBOL TABLE
03355  2B28              ;*********************************
03356  2B28  AD 3B 10    SSET   LDA SYMBOS
03357  2B2B  8D 39 10           STA SYMBOP
03358  2B2E  AD 3C 10           LDA SYMBOS+1
03359  2B31  8D 3A 10           STA SYMBOP+1
03360  2B34  60                 RTS
03361  2B35              ;*********************************
03362  2B35              ; EQUATE TABLE SETUP
03363  2B35              ;*********************************
03364  2B35  AD 32 10    EQUINT LDA TABINE
03365  2B38  8D 2E 10           STA TABINP
03366  2B3B  8D 30 10           STA TABINS
03367  2B3E  AD 33 10           LDA TABINE+1
03368  2B41  8D 2F 10           STA TABINP+1
03369  2B44  8D 31 10           STA TABINS+1
03370  2B47  60                 RTS
03371  2B48              ;*********************************
03372  2B48              ; ENTRY POINT FOR ADDRESS
03373  2B48              ;*********************************
03374  2B48  AD 38 10    SYM    LDA SYMBOL
03375  2B4B  F0 43              BEQ SYMEND
03376  2B4D  AD 22 10           LDA SELECT      ;COPY SELECT
03377  2B50  8D 45 10           STA WORKED      ;ADDRESS INTO
03378  2B53  AD 23 10           LDA SELECT+1    ;WORKED
03379  2B56  8D 46 10           STA WORKED+1
03380  2B59  4C 61 2B           JMP SYM1        ;CHECK FOR MATCH
03381  2B5C              ;*********************************
03382  2B5C              ; ENTRY POINT FOR OPCODES
03383  2B5C              ;*********************************
03384  2B5C  AD 38 10    SYMOP  LDA SYMBOL
03385  2B5F  F0 2F              BEQ SYMEND
03386  2B61              ;*********************************
03387  2B61              ; COMPARE ADDRESS TO SYMBOL TABLE
03388  2B61              ;*********************************
03389  2B61  20 28 2B    SYM1   JSR SSET
03390  2B64  20 31 2C    SYM2   JSR GETC
03391  2B67  8D 48 10           STA WORKER+1
03392  2B6A  20 28 2C           JSR INCC
03393  2B6D  20 31 2C           JSR GETC
03394  2B70  8D 47 10           STA WORKER
03395  2B73              ;*********************************
03396  2B73  38                 SEC             ;SET CARRY
03397  2B74  AD 47 10           LDA WORKER
03398  2B77  ED 45 10           SBC WORKED      ;SUB FROM LOW
03399  2B7A  8D 51 10           STA TEMP        ;STORE RESULT
03400  2B7D  AD 48 10           LDA WORKER+1
03401  2B80  ED 46 10           SBC WORKED+1    ;SUB FROM HIGH
03402  2B83  0D 51 10           ORA TEMP        ;OR RESULTS
03403  2B86  F0 0A              BEQ MATCH       ;CHECK FOR MATCH
03404  2B88  20 04 2C           JSR NEXTC       ;IF NOT NEXT
03405  2B8B  B0 03              BCS SYMEND      ;END OF TABLE?
03406  2B8D  4C 64 2B           JMP SYM2        ;NO CHECK NEXT
03407  2B90  18          SYMEND CLC             ;NO MATCHES CLEAR






PDISASS64.ASM......PAGE 0074

LINE# LOC   CODE        LINE


03408  2B91  60                 RTS             ;RETURN
03409  2B92              ;*********************************
03410  2B92              ; FOUND MATCH
03411  2B92              ;*********************************
03412  2B92  AD 12 10    MATCH  LDA PASS        ;CHECK PASS
03413  2B95  CD 15 10           CMP CPASS       ;IS IT LAST
03414  2B98  F0 18              BEQ MATCHS      ;IF SO PRINT
03415  2B9A  CD 16 10           CMP SPASS
03416  2B9D  F0 3A              BEQ MATCHT
03417  2B9F  20 3C 22           JSR RANGE       ;SYMBOL IN RANGE
03418  2BA2  90 3F              BCC MATEXT      ;NO INTERNAL EQ
03419  2BA4  20 28 2C           JSR INCC        ;INC TO SYMBOL
03420  2BA7  20 31 2C           JSR GETC        ;GET FIRST CHAR
03421  2BAA  C9 20              CMP #$20        ;SPACE
03422  2BAC  F0 03              BEQ MATONE      ;NOT EQUATE
03423  2BAE  4C B3 22           JMP PUTI        ;PUT IN EQUATE
03424  2BB1  60          MATONE RTS             ;RETURN
03425  2BB2              ;*********************************
03426  2BB2              ; CHECK FOR SYMBOL+1
03427  2BB2              ;*********************************
03428  2BB2  20 28 2C    MATCHS JSR INCC        ;INC TO LABEL
03429  2BB5  20 31 2C           JSR GETC        ;GET CHARARCTER
03430  2BB8  C9 20              CMP #$20        ;IS IT SPACE
03431  2BBA  D0 1D              BNE MATCHT      ;IF NOT GO ON
03432  2BBC  38                 SEC             ;SET CARRY
03433  2BBD  AD 39 10           LDA SYMBOP      ;GET LOW POINT
03434  2BC0  E9 09              SBC #$09        ;LAST SYMBOL
03435  2BC2  48                 PHA             ;PUSH ON STACK
03436  2BC3  AD 3A 10           LDA SYMBOP+1    ;GET HIGH POINT
03437  2BC6  E9 00              SBC #$00        ;LAST SYMBOL
03438  2BC8  A8                 TAY             ;PUT IN Y
03439  2BC9  68                 PLA             ;GET LO POINT
03440  2BCA  20 E4 2B           JSR STRSYM      ;PRINT SYMBOL
03441  2BCD  A9 2B              LDA #'+'         ;ASCII +
03442  2BCF  20 11 1C           JSR PCHAR       ;PRINT IT
03443  2BD2  A9 31              LDA #'1'         ;ASCII 1
03444  2BD4  20 11 1C           JSR PCHAR       ;PRINT IT
03445  2BD7  38                 SEC             ;C=1 SYMBOL
03446  2BD8  60                 RTS             ;RETURN
03447  2BD9              ;*********************************
03448  2BD9  AD 39 10    MATCHT LDA SYMBOP      ;LOW BYTE LABEL
03449  2BDC  AC 3A 10           LDY SYMBOP+1    ;HIGH BYTE LABEL
03450  2BDF  20 E4 2B           JSR STRSYM      ;PRINT LABEL
03451  2BE2              ;*********************************
03452  2BE2  38                 SEC             ;MATCH SET CARRY
03453  2BE3  60          MATEXT RTS             ;RETURN
03454  2BE4              ;*********************************
03455  2BE4              ; PRINT SYMBOL
03456  2BE4              ;*********************************
03457  2BE4  85 DD       STRSYM STA ZEROUR
03458  2BE6  84 DE              STY ZEROUR+1
03459  2BE8  A0 00              LDY #$00
03460  2BEA  B1 DD       STRSY1 LDA (ZEROUR),Y
03461  2BEC  F0 0A              BEQ SYEXIT
03462  2BEE  C9 20              CMP #$20






PDISASS64.ASM......PAGE 0075

LINE# LOC   CODE        LINE


03463  2BF0  F0 06              BEQ SYEXIT
03464  2BF2  20 11 1C           JSR PCHAR
03465  2BF5  C8                 INY
03466  2BF6  D0 F2              BNE STRSY1
03467  2BF8  60          SYEXIT RTS
03468  2BF9  B1 DD       FIXSYM LDA (ZEROUR),Y
03469  2BFB  F0 FB              BEQ SYEXIT
03470  2BFD  20 11 1C           JSR PCHAR
03471  2C00  C8                 INY
03472  2C01  4C F9 2B           JMP FIXSYM
03473  2C04              ;*********************************
03474  2C04              ; INC SYMBOL ADDRESS TABLE POINTER
03475  2C04              ;*********************************
03476  2C04  18          NEXTC  CLC
03477  2C05  AD 39 10           LDA SYMBOP
03478  2C08  69 08              ADC #$08
03479  2C0A  8D 39 10           STA SYMBOP
03480  2C0D  AD 3A 10           LDA SYMBOP+1
03481  2C10  69 00              ADC #$00
03482  2C12  8D 3A 10           STA SYMBOP+1
03483  2C15  CD 3E 10           CMP SYMBOE+1
03484  2C18  90 0A              BCC COK
03485  2C1A  D0 0A              BNE NCOK
03486  2C1C  AD 39 10           LDA SYMBOP
03487  2C1F  CD 3D 10           CMP SYMBOE
03488  2C22  B0 02              BCS NCOK
03489  2C24  18          COK    CLC
03490  2C25  60                 RTS
03491  2C26  38          NCOK   SEC
03492  2C27  60                 RTS
03493  2C28              ;*********************************
03494  2C28  EE 39 10    INCC   INC SYMBOP
03495  2C2B  D0 03              BNE *+5
03496  2C2D  EE 3A 10           INC SYMBOP+1
03497  2C30  60                 RTS
03498  2C31              ;*********************************
03499  2C31              ; GET BYTE FROM ADDRESS TABLE
03500  2C31              ;*********************************
03501  2C31  AD 39 10    GETC   LDA SYMBOP
03502  2C34  85 DD              STA ZEROUR
03503  2C36  AD 3A 10           LDA SYMBOP+1
03504  2C39  85 DE              STA ZEROUR+1
03505  2C3B  A0 00              LDY #$00
03506  2C3D  B1 DD              LDA (ZEROUR),Y
03507  2C3F  60                 RTS
03508  2C40              ;*********************************
03509  2C40              ; PRINT EQUATE TABLE
03510  2C40              ;*********************************
03511  2C40  38          EQUPRT SEC
03512  2C41  AD 30 10           LDA TABINS
03513  2C44  ED 32 10           SBC TABINE
03514  2C47  8D 51 10           STA TEMP
03515  2C4A  AD 31 10           LDA TABINS+1
03516  2C4D  ED 33 10           SBC TABINE+1
03517  2C50  0D 51 10           ORA TEMP






PDISASS64.ASM......PAGE 0076

LINE# LOC   CODE        LINE


03518  2C53  F0 55              BEQ EQUEND
03519  2C55  20 5E 23           JSR SORT
03520  2C58  20 61 20           JSR COMENT
03521  2C5B  20 29 22           JSR PRTOTH
03522  2C5E  A9 27              LDA #<EQUATE
03523  2C60  A0 2F              LDY #>EQUATE
03524  2C62  20 BB 1B           JSR STRPNT
03525  2C65  20 FE 1A           JSR NEWLIN
03526  2C68  20 61 20           JSR COMENT
03527  2C6B  20 03 23    EQUOP  JSR GETI
03528  2C6E  8D 45 10           STA WORKED
03529  2C71  20 FA 22           JSR INCI
03530  2C74  20 03 23           JSR GETI
03531  2C77  8D 46 10           STA WORKED+1
03532  2C7A  20 29 22           JSR PRTOTH
03533  2C7D  20 5C 2B           JSR SYMOP
03534  2C80  B0 03              BCS EQUOP1
03535  2C82  20 BF 20           JSR PWORK
03536  2C85  A9 3D       EQUOP1 LDA #'='
03537  2C87  20 11 1C           JSR PCHAR
03538  2C8A  A9 24              LDA #'$'
03539  2C8C  20 11 1C           JSR PCHAR
03540  2C8F  20 C2 20           JSR PWORKD
03541  2C92  20 FE 1A           JSR NEWLIN
03542  2C95              ;*********************************
03543  2C95  20 FA 22           JSR INCI
03544  2C98  AD 2F 10           LDA TABINP+1
03545  2C9B  CD 33 10           CMP TABINE+1
03546  2C9E  90 CB              BCC EQUOP
03547  2CA0  D0 08              BNE EQUEND
03548  2CA2  AD 2E 10           LDA TABINP
03549  2CA5  CD 32 10           CMP TABINE
03550  2CA8  90 C1              BCC EQUOP
03551  2CAA              ;*********************************
03552  2CAA  20 61 20    EQUEND JSR COMENT
03553  2CAD  4C 9A 22           JMP RESINT
03554  2CB0              ;*********************************
03555  2CB0              ; READ CROSS REFERENCE SEQ FILE
03556  2CB0              ;      INTO SYMBOL TABLE
03557  2CB0              ;*********************************
03558  2CB0              ; READ FILE NAME DEFAULT ON CR
03559  2CB0              ;*********************************
03560  2CB0  A9 77       READXX LDA #<MSS3
03561  2CB2  A0 2E              LDY #>MSS3
03562  2CB4  20 BB 1B           JSR STRPNT
03563  2CB7  20 E4 FF    SOP2   JSR GETIN
03564  2CBA  F0 FB              BEQ SOP2
03565  2CBC  C9 30              CMP #'0'
03566  2CBE  F0 04              BEQ SOP3
03567  2CC0  C9 31              CMP #'1'
03568  2CC2  D0 F3              BNE SOP2
03569  2CC4  20 D2 FF    SOP3   JSR CHROUT
03570  2CC7  8D E6 10           STA TEXTER
03571  2CCA              ;*********************************
03572  2CCA  A9 B9              LDA #<LOADF






PDISASS64.ASM......PAGE 0077

LINE# LOC   CODE        LINE


03573  2CCC  A0 2E              LDY #>LOADF
03574  2CCE  20 BB 1B           JSR STRPNT
03575  2CD1              ;*********************************
03576  2CD1  20 1C 1B           JSR INSTNG
03577  2CD4  F0 20              BEQ READXF
03578  2CD6  98                 TYA
03579  2CD7  48                 PHA
03580  2CD8  20 AB 14           JSR INITD
03581  2CDB  68                 PLA
03582  2CDC  A8                 TAY
03583  2CDD  A2 00              LDX #$00
03584  2CDF  BD 29 2E    XFILE1 LDA NAMS,X
03585  2CE2  99 5C 10           STA BUF,Y
03586  2CE5  C8                 INY
03587  2CE6  E8                 INX
03588  2CE7  E0 04              CPX #$04
03589  2CE9  D0 F4              BNE XFILE1
03590  2CEB  98                 TYA
03591  2CEC  A0 10              LDY #>BUF
03592  2CEE  A2 5C              LDX #<BUF
03593  2CF0  20 BD FF           JSR SETNAM
03594  2CF3  4C FF 2C           JMP REOPEN
03595  2CF6              ;*********************************
03596  2CF6              ; DEFAULT FILENAME XRFF0000
03597  2CF6              ;********************************
03598  2CF6  A9 0E       READXF LDA #$0E
03599  2CF8  A0 2E              LDY #>NAME
03600  2CFA  A2 1F              LDX #<NAME
03601  2CFC  20 BD FF           JSR SETNAM
03602  2CFF              ;*********************************
03603  2CFF              ; OPEN FILE
03604  2CFF              ;********************************
03605  2CFF  A9 03       REOPEN LDA #$03
03606  2D01  A2 08              LDX #$08
03607  2D03  A0 03              LDY #$03
03608  2D05  20 BA FF           JSR SETLFS
03609  2D08  20 C0 FF           JSR OPEN
03610  2D0B              ;********************************
03611  2D0B              ; CHECK FOR DISK ERROR
03612  2D0B              ;*********************************
03613  2D0B  20 C4 1A           JSR DISERR
03614  2D0E  B0 3F              BCS QUITXX
03615  2D10              ;*********************************
03616  2D10              ; OUTPUT LOADING MESSAGE
03617  2D10              ;*********************************
03618  2D10  A9 D7              LDA #<LOADM     ;MSG LOW
03619  2D12  A0 2E              LDY #>LOADM     ;MSG HIGH
03620  2D14  20 BB 1B           JSR STRPNT      ;OUTPUT MSG
03621  2D17              ;*********************************
03622  2D17  A9 00              LDA #$00        ;COL COUNTER
03623  2D19  8D 51 10           STA TEMP
03624  2D1C              ;*********************************
03625  2D1C              ; INPUT AND LOAD SYMBOL TABLE
03626  2D1C              ;*********************************
03627  2D1C  20 60 2D    READX  JSR READS       ;INPUT SYMBOL






PDISASS64.ASM......PAGE 0078

LINE# LOC   CODE        LINE


03628  2D1F  20 DE 2D           JSR PUTC
03629  2D22  20 06 2E           JSR LINES       ;SCREEN OUT
03630  2D25  20 E1 FF           JSR STOP
03631  2D28  F0 05              BEQ QUITX
03632  2D2A  20 B7 FF           JSR READST
03633  2D2D  F0 ED              BEQ READX
03634  2D2F              ;*********************************
03635  2D2F              ;    CLOSE OPEN FILE
03636  2D2F              ;*********************************
03637  2D2F  A9 03       QUITX  LDA #$03
03638  2D31  20 C3 FF           JSR CLOSE
03639  2D34  20 CC FF           JSR CLRCHN
03640  2D37  20 F3 20           JSR CRLF
03641  2D3A              ;*********************************
03642  2D3A              ; SET END OF TABLE
03643  2D3A              ;*********************************
03644  2D3A  AD 39 10           LDA SYMBOP
03645  2D3D  8D 3D 10           STA SYMBOE
03646  2D40  AD 3A 10           LDA SYMBOP+1
03647  2D43  8D 3E 10           STA SYMBOE+1
03648  2D46              ;*********************************
03649  2D46              ; OUTPUT LOADED MESSAGE
03650  2D46              ;*********************************
03651  2D46  A9 F5              LDA #<LOADC
03652  2D48  A0 2E              LDY #>LOADC
03653  2D4A  20 BB 1B           JSR STRPNT
03654  2D4D  18                 CLC
03655  2D4E  60                 RTS
03656  2D4F              ;*********************************
03657  2D4F              ; OUTPUT ERROR MESSAGE
03658  2D4F              ;*********************************
03659  2D4F  A9 03       QUITXX LDA #$03
03660  2D51  20 C3 FF           JSR CLOSE
03661  2D54  20 CC FF           JSR CLRCHN
03662  2D57  A9 0C              LDA #<LOADE
03663  2D59  A0 2F              LDY #>LOADE
03664  2D5B  20 BB 1B           JSR STRPNT
03665  2D5E  38                 SEC
03666  2D5F  60                 RTS
03667  2D60              ;*********************************
03668  2D60              ; READ SYMBOL FROM FILE
03669  2D60              ;*********************************
03670  2D60  A2 03       READS  LDX #$03        ;FILE NUMBER
03671  2D62  20 C6 FF           JSR CHKIN       ;FILE IS INPUT
03672  2D65  A0 02              LDY #$02        ;COUNTER
03673  2D67  20 CF FF           JSR CHRIN       ;INPUT CHAR
03674  2D6A  99 DA 10           STA SYMBUF,Y    ;1ST CHAR
03675  2D6D  20 D2 FF           JSR CHROUT      ;PRITN IT
03676  2D70  C8                 INY             ;INC POINTER
03677  2D71  20 CF FF    READY  JSR CHRIN       ;NEXT CHAR
03678  2D74  99 DA 10           STA SYMBUF,Y    ;STORE
03679  2D77  20 D2 FF           JSR CHROUT      ;PRINT IT
03680  2D7A  C8                 INY             ;INC OFFSET
03681  2D7B  C0 08              CPY #$08        ;8 IS FOR NULL
03682  2D7D  D0 F2              BNE READY       ;BRANCH IF NOT






PDISASS64.ASM......PAGE 0079

LINE# LOC   CODE        LINE


03683  2D7F  A9 00              LDA #$00        ;NULL MARKER
03684  2D81  99 DA 10           STA SYMBUF,Y    ;STORE AT END
03685  2D84              ;*********************************
03686  2D84  20 05 21           JSR SPACE       ;PRINT SPACE
03687  2D87  20 D0 20           JSR DOLLAR      ;PRINT $ SIGN
03688  2D8A              ;*********************************
03689  2D8A  AD E6 10           LDA TEXTER
03690  2D8D  C9 30              CMP #'0'
03691  2D8F  F0 2F              BEQ STDREF
03692  2D91              ;*********************************
03693  2D91  A0 00              LDY #$00
03694  2D93  20 A0 2D           JSR XGET
03695  2D96  C8                 INY
03696  2D97  20 A0 2D           JSR XGET
03697  2D9A  20 CF FF           JSR CHRIN       ;GET $0D
03698  2D9D  4C CC FF           JMP CLRCHN
03699  2DA0              ;*********************************
03700  2DA0  20 CF FF    XGET   JSR CHRIN
03701  2DA3  20 D2 FF           JSR CHROUT
03702  2DA6  20 6C 1B           JSR BINARY
03703  2DA9  0A                 ASL A
03704  2DAA  0A                 ASL A
03705  2DAB  0A                 ASL A
03706  2DAC  0A                 ASL A
03707  2DAD  99 DA 10           STA SYMBUF,Y
03708  2DB0  20 CF FF           JSR CHRIN
03709  2DB3  20 D2 FF           JSR CHROUT
03710  2DB6  20 6C 1B           JSR BINARY
03711  2DB9  19 DA 10           ORA SYMBUF,Y
03712  2DBC  99 DA 10           STA SYMBUF,Y
03713  2DBF  60                 RTS
03714  2DC0              ;*********************************
03715  2DC0  A0 00       STDREF LDY #$00        ;ZERO OFFSET
03716  2DC2  20 CF FF           JSR CHRIN       ;HIGH BYTES
03717  2DC5  99 DA 10           STA SYMBUF,Y    ;
03718  2DC8  8C 54 10           STY SAVY        ;
03719  2DCB  20 A5 1B           JSR PRBYT       ;
03720  2DCE  AC 54 10           LDY SAVY        ;
03721  2DD1  C8                 INY             ;
03722  2DD2  20 CF FF           JSR CHRIN       ;LOW BYTE
03723  2DD5  99 DA 10           STA SYMBUF,Y    ;
03724  2DD8  20 A5 1B           JSR PRBYT       ;
03725  2DDB  4C CC FF           JMP CLRCHN      ;KEYBOARD INPUT
03726  2DDE              ;*********************************
03727  2DDE              ; MOVE SYMBOL FROM BUFFER TO TABLE
03728  2DDE              ;*********************************
03729  2DDE  A0 00       PUTC   LDY #$00
03730  2DE0  AD 39 10           LDA SYMBOP
03731  2DE3  85 DD              STA ZEROUR
03732  2DE5  AD 3A 10           LDA SYMBOP+1
03733  2DE8  85 DE              STA ZEROUR+1
03734  2DEA  B9 DA 10    PUT    LDA SYMBUF,Y
03735  2DED  91 DD              STA (ZEROUR),Y
03736  2DEF  C8                 INY
03737  2DF0  C0 09              CPY #$09






PDISASS64.ASM......PAGE 0080

LINE# LOC   CODE        LINE


03738  2DF2  D0 F6              BNE PUT
03739  2DF4  18                 CLC
03740  2DF5  AD 39 10           LDA SYMBOP
03741  2DF8  69 09              ADC #$09
03742  2DFA  8D 39 10           STA SYMBOP
03743  2DFD  AD 3A 10           LDA SYMBOP+1
03744  2E00  69 00              ADC #$00
03745  2E02  8D 3A 10           STA SYMBOP+1
03746  2E05  60                 RTS
03747  2E06              ;*********************************
03748  2E06              ; OUTPUT SYMBOL IN 4 COLUMNS
03749  2E06              ;*********************************
03750  2E06  EE 51 10    LINES  INC TEMP
03751  2E09  A9 03              LDA #$03
03752  2E0B  CD 51 10           CMP TEMP
03753  2E0E  F0 05              BEQ RESET
03754  2E10  A9 2E              LDA #'.'
03755  2E12  4C D2 FF           JMP CHROUT
03756  2E15  A9 00       RESET  LDA #$00
03757  2E17  8D 51 10           STA TEMP
03758  2E1A  A9 0D              LDA #$0D
03759  2E1C  4C D2 FF           JMP CHROUT
03760  2E1F              ;*********************************
03761  2E1F              ;   COMMAND MESSAGES
03762  2E1F              ;*********************************
03763  2E1F  30 3A       NAME   .BYTE '0:XRLL0000'
03764  2E29  2C 53       NAMS   .BYTE ',S,R'
03765  2E2D              ;*********************************
03766  2E2D  0D          MSS1   .BYTE $0D
03767  2E2E              ; .BYTE 'SYMBOLIC DISASSEMBLY (Y OR N/CR)? '
03768  2E2E  53 59              .BYTE 'SYMBOLIC DISASSEMBLY (Y/CR OR N)? '

03769  2E50  00                 .BYTE 0
03770  2E51  0D          MSS2   .BYTE $0D
03771  2E52  4C 4F              .BYTE 'LOAD USER SYMBOL TABLE (Y OR N/CR)?
 '
03772  2E76  00                 .BYTE 0
03773  2E77  0D          MSS3   .BYTE $0D
03774  2E78  46 4F              .BYTE 'FORMAT 0=STANDARD 1=ASCII : '
03775  2E94  00                 .BYTE 0
03776  2E95  0D          MSS4   .BYTE $0D
03777  2E96  41 50              .BYTE 'APPEND DEFAULT TABLE (Y OR N/CR)? '

03778  2EB8  00                 .BYTE 0
03779  2EB9  0D          LOADF  .BYTE $0D
03780  2EBA  53 59       .BYTE  'SYMBOL TABLE(CR OR D:NAME): '
03781  2ED6  00          .BYTE  0
03782  2ED7  0D          LOADM  .BYTE $0D,$0D
03782  2ED8  0D 
03783  2ED9  52 45       .BYTE  'READING SYMBOL TABLE FILE'
03784  2EF2  0D          .BYTE  $0D,$0D
03784  2EF3  0D 
03785  2EF4  00          .BYTE  0
03786  2EF5  0D          LOADC  .BYTE $0D
03787  2EF6  53 59       .BYTE  'SYMBOL TABLE LOADED'
03788  2F09  0D          .BYTE  $0D,$0D
03788  2F0A  0D 
03789  2F0B  00          .BYTE  0






PDISASS64.ASM......PAGE 0081

LINE# LOC   CODE        LINE


03790  2F0C  0D          LOADE  .BYTE $0D
03791  2F0D  53 59       .BYTE  'SYMBOL TABLE NOT LOADED'
03792  2F24  0D          .BYTE  $0D,$0D
03792  2F25  0D 
03793  2F26  00          .BYTE  0
03794  2F27              ;*********************************
03795  2F27  3B 20       EQUATE .BYTE '; EXTERNAL ADDRESS EQUATES'
03796  2F41  00                 .BYTE 0
03797  2F42              ;*********************************
03798  2F42              ; PATCH CODE AREA
03799  2F42              ;*********************************
03800  2F42              *=*+$0800
03801  3742              ;*********************************
03802  3742              ; BIT INSTRUCTION CODING
03803  3742              ;*********************************
03804  3742              BITOPT = *
03805  3742  A9 04              LDA #<MSB1      ;TABLE TYPE
03806  3744  A0 19              LDY #>MSB1
03807  3746  20 BB 1B           JSR STRPNT
03808  3749  20 E4 FF    BOP0   JSR GETIN
03809  374C  F0 FB              BEQ BOP0
03810  374E  C9 30              CMP #'0'        ;STANDARD
03811  3750  F0 12              BEQ BSC
03812  3752  C9 31              CMP #'1'        ;$2C ABS
03813  3754  F0 0E              BEQ BSC 
03814  3756  C9 32              CMP #'2'        ;$24 ZP
03815  3758  F0 0A              BEQ BSC
03816  375A  C9 33              CMP #'3'        ;$2C AND $24
03817  375C  F0 06              BEQ BSC
03818  375E  C9 0D              CMP #$0D        ;STANDARD
03819  3760  D0 E7              BNE BOP0
03820  3762  A9 30              LDA #'0'
03821  3764              BSC    = *
03822  3764  48                 PHA             ;STASH INPUT
03823  3765  20 D2 FF           JSR CHROUT      ;OUTPUT FEEDBACK
03824  3768  68                 PLA             ;POP INPUT
03825  3769  49 30              EOR #$30        ;MAKE A NUMBER
03826  376B  8D 6F 37           STA BITFLG      ;SET FLAG
03827  376E  60                 RTS
03828  376F              ;*********************************
03829  376F              ; BIT INSTRUCTION CODING FLAG
03830  376F              ;*********************************
03831  376F              BITFLG = *
03832  376F  AA                 .BYTE $AA
03833  3770              ;*********************************
03834  3770              
03835  3770              ;*********************************
03836  3770              ; SYMBOL TABLE
03837  3770              ;*********************************
03838  3770              ;  KERNAL JUMP TABLE
03839  3770              ;*********************************
03840  3770              STABLE = *
03841  3770  FF                 .BYTE $FF,$80,'IDBYTE',0
03841  3771  80 
03841  3772  49 44 






PDISASS64.ASM......PAGE 0082

LINE# LOC   CODE        LINE


03841  3778  00 
03842  3779  FF                 .BYTE $FF,$81,'CINT  ',0
03842  377A  81 
03842  377B  43 49 
03842  3781  00 
03843  3782  FF                 .BYTE $FF,$84,'IOINIT',0
03843  3783  84 
03843  3784  49 4F 
03843  378A  00 
03844  378B  FF                 .BYTE $FF,$87,'RAMTAS',0
03844  378C  87 
03844  378D  52 41 
03844  3793  00 
03845  3794  FF                 .BYTE $FF,$8A,'RESTOR',0
03845  3795  8A 
03845  3796  52 45 
03845  379C  00 
03846  379D  FF                 .BYTE $FF,$8D,'VECTOR',0
03846  379E  8D 
03846  379F  56 45 
03846  37A5  00 
03847  37A6  FF                 .BYTE $FF,$90,'SETMSG',0
03847  37A7  90 
03847  37A8  53 45 
03847  37AE  00 
03848  37AF  FF                 .BYTE $FF,$93,'SECOND',0
03848  37B0  93 
03848  37B1  53 45 
03848  37B7  00 
03849  37B8  FF                 .BYTE $FF,$96,'TKSA  ',0
03849  37B9  96 
03849  37BA  54 4B 
03849  37C0  00 
03850  37C1  FF                 .BYTE $FF,$99,'MEMTOP',0
03850  37C2  99 
03850  37C3  4D 45 
03850  37C9  00 
03851  37CA  FF                 .BYTE $FF,$9C,'MEMBOT',0
03851  37CB  9C 
03851  37CC  4D 45 
03851  37D2  00 
03852  37D3  FF                 .BYTE $FF,$9F,'SCNKEY',0
03852  37D4  9F 
03852  37D5  53 43 
03852  37DB  00 
03853  37DC  FF                 .BYTE $FF,$A2,'SETTMO',0
03853  37DD  A2 
03853  37DE  53 45 
03853  37E4  00 
03854  37E5  FF                 .BYTE $FF,$A5,'ACPTR ',0
03854  37E6  A5 
03854  37E7  41 43 
03854  37ED  00 
03855  37EE  FF                 .BYTE $FF,$A8,'CIOUT ',0
03855  37EF  A8 






PDISASS64.ASM......PAGE 0083

LINE# LOC   CODE        LINE


03855  37F0  43 49 
03855  37F6  00 
03856  37F7  FF                 .BYTE $FF,$AB,'UNTLK ',0
03856  37F8  AB 
03856  37F9  55 4E 
03856  37FF  00 
03857  3800  FF                 .BYTE $FF,$AE,'UNLSN ',0
03857  3801  AE 
03857  3802  55 4E 
03857  3808  00 
03858  3809  FF                 .BYTE $FF,$B1,'LISTEN',0
03858  380A  B1 
03858  380B  4C 49 
03858  3811  00 
03859  3812  FF                 .BYTE $FF,$B4,'TALK  ',0
03859  3813  B4 
03859  3814  54 41 
03859  381A  00 
03860  381B  FF                 .BYTE $FF,$B7,'READST',0
03860  381C  B7 
03860  381D  52 45 
03860  3823  00 
03861  3824  FF                 .BYTE $FF,$BA,'SETLFS',0
03861  3825  BA 
03861  3826  53 45 
03861  382C  00 
03862  382D  FF                 .BYTE $FF,$BD,'SETNAM',0
03862  382E  BD 
03862  382F  53 45 
03862  3835  00 
03863  3836  FF                 .BYTE $FF,$C0,'OPEN  ',0
03863  3837  C0 
03863  3838  4F 50 
03863  383E  00 
03864  383F  FF                 .BYTE $FF,$C3,'CLOSE ',0
03864  3840  C3 
03864  3841  43 4C 
03864  3847  00 
03865  3848  FF                 .BYTE $FF,$C6,'CHKIN ',0
03865  3849  C6 
03865  384A  43 48 
03865  3850  00 
03866  3851  FF                 .BYTE $FF,$C9,'CHKOUT',0
03866  3852  C9 
03866  3853  43 48 
03866  3859  00 
03867  385A  FF                 .BYTE $FF,$CC,'CLRCHN',0
03867  385B  CC 
03867  385C  43 4C 
03867  3862  00 
03868  3863  FF                 .BYTE $FF,$CF,'CHRIN ',0
03868  3864  CF 
03868  3865  43 48 
03868  386B  00 
03869  386C  FF                 .BYTE $FF,$D2,'CHROUT',0






PDISASS64.ASM......PAGE 0084

LINE# LOC   CODE        LINE


03869  386D  D2 
03869  386E  43 48 
03869  3874  00 
03870  3875  FF                 .BYTE $FF,$D5,'LOAD  ',0
03870  3876  D5 
03870  3877  4C 4F 
03870  387D  00 
03871  387E  FF                 .BYTE $FF,$D8,'SAVE  ',0
03871  387F  D8 
03871  3880  53 41 
03871  3886  00 
03872  3887  FF                 .BYTE $FF,$DB,'SETTIM',0
03872  3888  DB 
03872  3889  53 45 
03872  388F  00 
03873  3890  FF                 .BYTE $FF,$DE,'RDTIM ',0
03873  3891  DE 
03873  3892  52 44 
03873  3898  00 
03874  3899  FF                 .BYTE $FF,$E1,'STOP  ',0
03874  389A  E1 
03874  389B  53 54 
03874  38A1  00 
03875  38A2  FF                 .BYTE $FF,$E4,'GETIN ',0
03875  38A3  E4 
03875  38A4  47 45 
03875  38AA  00 
03876  38AB  FF                 .BYTE $FF,$E7,'CLALL ',0
03876  38AC  E7 
03876  38AD  43 4C 
03876  38B3  00 
03877  38B4  FF                 .BYTE $FF,$EA,'UDTIM ',0
03877  38B5  EA 
03877  38B6  55 44 
03877  38BC  00 
03878  38BD  FF                 .BYTE $FF,$ED,'SCREEN',0
03878  38BE  ED 
03878  38BF  53 43 
03878  38C5  00 
03879  38C6  FF                 .BYTE $FF,$F0,'PLOT  ',0
03879  38C7  F0 
03879  38C8  50 4C 
03879  38CE  00 
03880  38CF  FF                 .BYTE $FF,$F3,'IOBASE',0
03880  38D0  F3 
03880  38D1  49 4F 
03880  38D7  00 
03881  38D8              ;*********************************
03882  38D8  FF                 .BYTE $FF,$FA,'NMIVEC',0
03882  38D9  FA 
03882  38DA  4E 4D 
03882  38E0  00 
03883  38E1  FF                 .BYTE $FF,$FC,'RESVEC',0
03883  38E2  FC 
03883  38E3  52 45 






PDISASS64.ASM......PAGE 0085

LINE# LOC   CODE        LINE


03883  38E9  00 
03884  38EA  FF                 .BYTE $FF,$FE,'IRQVEC',0
03884  38EB  FE 
03884  38EC  49 52 
03884  38F2  00 
03885  38F3              ;*********************************
03886  38F3  00          UTABLE .BYTE 0
03887  38F4              ;*********************************
03888  38F4              .END


ERRORS = 00000


SYMBOL TABLE

SYMBOL VALUE
 ABSBIT   1F4A    ABSEXT   1F6F    ABSLUT   1F4B    ABSX     1F70
 ABSY     1F76    AC0      25AE    AC1      25B1    ACC      1EFF
 ACHECK   259C    ADRS     104F    AFILE    1675    AGET     16A9
 AGET1    16B5    ALINE    25DF    ALOP     25F1    AOP      1641
 AOP1     1706    AOP2     1730    AOP3     1755    AOPX     1701
 ASC      1772    ASCCCC   252A    ASCI1    2557    ASCII    254C
 ASCIIQ   2585    ASCKK    2541    B0000    1E18    BASIC    100D
 BINARY   1B6C    BITFLG   376F    BITOPT   3742    BOP      166C
 BOP0     3749    BSC      3764    BSTUB    0001    BUF      105C
 BYABIT   1DE7    BYTES    25B4    BYTESX   25DC    BYTT     1DBF
 BYZBIT   1DC2    CASCII   2634    CDATA    10E7    CHKIN    FFC6
 CHKOUT   FFC9    CHRIN    FFCF    CHROUT   FFD2    CLOSE    FFC3
 CLRCHN   FFCC    COK      2C24    COMENT   2061    COMET    2067
 COMOPT   101D    COMPT    2077    CONST0   1D21    CONST1   1D26
 CPASS    1015    CRLF     20F3    CRLFPR   1C5B    CRNO     1B90
 CRNO1    1B9D    CRYS     1B83    CRYS1    1B9B    CSHORT   2075
 DATABE   10EF    DATABP   10EB    DATABS   10ED    DATAO1   24B8
 DATAO2   24EE    DATAOP   24A9    DATUT    2596    DBYTES   2640
 DBYTEX   266D    DECSL    2142    DEVICE   1019    DISA     1230
 DISASS   1221    DISB     125E    DISC     12ED    DISERR   1AC4
 DISFUL   12EA    DISL     1D94    DISL1    1DA5    DLOOA    1AEF
 DLOOC    1AE5    DLOOE    1AD9    DLOOP    128F    DOLLAR   20D0
 DONE     1364    DONED    1345    DOP      136D    DOP2     1639
 DOP3     163B    DSLINE   1D7D    EA       1020    EAGOL    1028
 EAOUT    102C    EAS      10E4    EASCI1   2618    EASCII   261D
 EFILE    2051    ENDAX    24B5    ENDDAT   2599    EPASS    1014
 EQUATE   2F27    EQUEND   2CAA    EQUINT   2B35    EQUOP    2C6B
 EQUOP1   2C85    EQUPRT   2C40    ERRCT    105A    FILE     158D
 FILEOK   1587    FINAL    1DBC    FINISH   1C48    FIXSYM   2BF9
 FOP1     17AE    FOP2     17B0    FOROPT   101C    FORWRD   1FE9
 GETBYT   1B4F    GETC     2C31    GETI     2303    GETIN    FFE4
 GETOPE   277E    GETSL    212C    GETWRD   1B2B    GFILE0   157B
 HEADER   1C7A    HEADES   1CCD    HEADFX   1CF5    HEADOK   1CE7
 HEADSY   1CE8    HEXA     1D11    ILLEGL   1EBE    ILLMSG   217E
 ILLOP    275D    IMEXIT   1F39    IMMEDT   1F04    IMPLI1   1F8A
 IMPLID   1F7C    IMPONE   1F89    INCC     2C28    INCI     22FA
 INCIE    22F2    INCSL    2123    INDRCT   1F96    INDX     1FAB








SYMBOL TABLE

SYMBOL VALUE
 INDY     1FB4    INEND    1B4E    INENX    1B6B    INIT     1856
 INITD    14AB    INITIN   2262    INSTN1   1B1E    INSTNG   1B1C
 INTCH    2321    INTCHA   2312    INTCHK   231E    INTEND   235A
 INTEXT   22F0    INTMAT   235C    INTOUT   2449    INTPR    2454
 INTPRM   247B    INTPRS   2476    INTPRT   2433    INTSA    214E
 INTSET   2274    IPASS    1013    ISKIP    1EF8    LARGE    23C4
 LINECK   1A85    LINECO   1AC3    LINECT   1058    LINEFL   10C0
 LINEOK   1CBC    LINES    2E06    LISTCT   1057    LOADC    2EF5
 LOADE    2F0C    LOADF    2EB9    LOADM    2ED7    LOOP1    244F
 LOOP2    24A3    LPAREN   20D5    LTITLE   1D46    LTITLS   1D70
 MATCH    2B92    MATCHS   2BB2    MATCHT   2BD9    MATEXT   2BE3
 MATONE   2BB1    MBYTE    272C    MCODES   28C0    MDBYTE   273C
 MEMSIZ   0037    MNAMES   27E8    MNEMON   2745    MNLOOP   274F
 MODES    29C0    MPASS    11F2    MSA1     1989    MSA2     19AB
 MSA3     19C3    MSAOP    196A    MSB1     1904    MSB4     1A45
 MSB5     1A65    MSD1     1871    MSD2     1883    MSD4     1893
 MSD4A    18AD    MSD5     18C0    MSF1     1801    MSF2     181D
 MSG      17B4    MSG1     1831    MSG2     1858    MSG5     19D9
 MSGBIT   215B    MSGBZP   2163    MSGDIS   120E    MSGEND   2179
 MSGERR   1204    MSR1     18DC    MSS1     2E2D    MSS2     2E51
 MSS3     2E77    MSS4     2E95    MWORD    2734    NAME     2E1F
 NAMS     2E29    NASCII   2625    NBUF     10C4    NCHARS   10C3
 NCOK     2C26    NDATA    10E9    NEGREL   2175    NEWEXT   1B1B
 NEWLIN   1AFE    NEXLIN   1C6D    NEXPTR   1C6A    NEXPTS   1CBD
 NEXTBY   2713    NEXTC    2C04    NEXTP    12C0    NEXTSL   210A
 NOASC    263E    NOBINC   272A    NOFILE   158B    NOHEX    1B7F
 NOID     159E    NOINC    2121    NOPRT    161E    NOTABS   16EC
 NPRAD    20AD    NPRAD1   20AE    OFFSET   1024    OFILE    15A1
 OFILE1   15B4    OFILE2   15B9    OFILE3   15DC    OFILE4   15EB
 OFILED   1596    ONEBIT   1E4C    ONEBX    1E7B    ONEBY    1E78
 ONEBYT   1E4D    OPCPUT   1EB7    OPCSYM   1EBA    OPEN     FFC0
 OPERN1   2771    OPERND   2779    ORGIN    203B    OUFILE   1560
 OUTPUT   101A    P1       20A4    PAGECT   1055    PAGER1   1CB6
 PASS     1012    PAUS1    257E    PAUSE    12B9    PCHAR    1C11
 PEXIT    1C46    PFILE0   138D    PFILE1   138F    PMSG     11F8
 POSREL   2171    POVER    20A1    PRAD     208A    PRBYT    1BA5
 PRBYTS   1B9F    PREND    24A0    PRFILE   1485    PRIN     1C26
 PRINT    1620    PRLA     2080    PRO2RD   1461    PROGED   13D5
 PROGM    1852    PROGOK   14AA    PROGRD   13C0    PRTASS   2764
 PRTDAF   2221    PRTDAL   16D0    PRTDAS   16BD    PRTDAT   2205
 PRTEST   21FE    PRTGET   15EC    PRTNEX   16C8    PRTNU1   1BE0
 PRTNU2   1BE7    PRTNU3   1BE8    PRTNUM   1BD7    PRTOK    2493
 PRTON1   21A0    PRTONE   2192    PRTOT1   2234    PRTOTH   2229
 PRTPAG   1BCC    PRTTH1   21F3    PRTTHE   21CD    PRTTW1   21C2
 PRTTWO   21A8    PSELEC   20B6    PUIT     22CD    PUT      2DEA
 PUTC     2DDE    PUTI     22B3    PWORK    20BF    PWORKD   20C2
 Q00000   2606    QUITS    12F3    QUITX    2D2F    QUITXX   2D4F
 QUTERR   130A    RANG     224E    RANGE    223C    READS    2D60
 READST   FFB7    READX    2D1C    READXF   2CF6    READXX   2CB0
 READY    2D71    RELATV   1FC0    RELND    1FF2    RELNEG   201D
 RELP     202F    RELPC    2010    RELPM    2021    RELPUT   200C
 RELSYM   200F    REOPEN   2CFF    RESET    2E15    RESINT   229A
 ROPT     1018    ROUT     2260    RPAREN   20DA    S3       23AC
 SA       101E    SAGOL    1026    SAOUT    102A    SAVA     1052
 SAVEE    104D    SAVEP    1049    SAVES    104B    SAVINT   2281








SYMBOL TABLE

SYMBOL VALUE
 SAVX     1053    SAVY     1054    SBLOK    2725    SCREN    1C3A
 SCRNO1   1D07    SCROFF   1CF8    SCRON    1D08    SELECT   1022
 SEMIC    20CB    SETLFS   FFBA    SETNAM   FFBD    SEXIT    1BCB
 SKIPER   2532    SLOK     211C    SMALL    23C7    SMALLP   1036
 SMALLS   1034    SOP      2AC0    SOP1     2AD4    SOP2     2CB7
 SOP3     2CC4    SOP4     2B0B    SORT     235E    SORT1    2373
 SORT2    2382    SORT3    2404    SORT4    2430    SORTOK   242D
 SOUT     1BC1    SPAC     20FD    SPAC6    20F8    SPACE    2105
 SPACM    20FA    SPASS    1016    SSET     2B28    STABLE   3770
 STARTD   100F    STARTS   14C5    STDREF   2DC0    STOP     FFE1
 STRPNT   1BBB    STRSY1   2BEA    STRSYM   2BE4    SUBP     2794
 SUBS     27CC    SUBS1    27B0    SY       2B1D    SYEXIT   2BF8
 SYM      2B48    SYM1     2B61    SYM2     2B64    SYMBOE   103D
 SYMBOL   1038    SYMBOP   1039    SYMBOS   103B    SYMBUF   10DA
 SYMEND   2B90    SYMOP    2B5C    SYTAB    2AE9    T2       23AF
 TABINE   1032    TABINP   102E    TABINS   1030    TDATA    10F1
 TEMP     1051    TEXTER   10E6    TWOB     1EBD    TWOBIT   1E81
 TWOBX    1EB4    TWOBY    1EB1    TWOBYT   1E82    UTABLE   38F3
 UYMBOE   1043    UYMBOP   103F    UYMBOS   1041    VERSON   10C2
 VICREG   D011    WIND1    1543    WIND2    1545    WINDOP   1507
 WINDOW   101B    WORD1    2685    WORDM    26CB    WORDPT   26BF
 WORDS    2670    WORDS2   26FB    WORDS3   270D    WORDSX   26BC
 WORDSY   26C5    WORDXX   2710    WORKED   1045    WORKER   1047
 WREADY   867E    WRITE    184E    XFILE1   2CDF    XGET     2DA0
 XINDEX   20DF    XOP0     1789    XOP1     1799    XOP2     179B
 XOPT     1017    XTITLE   1D2B    XTITLS   1D63    YINDEX   20E9
 YSHEX    1B81    ZERBIT   1F3A    ZEROPG   1F3B    ZEROUR   00DD
 ZEROX    1F3E    ZEROY    1F44   

END OF ASSEMBLY

CROSS REFERENCE......PAGE    1


* ABSBIT $1F4A  1805
  ABSEXT $1F6F  1818  1823
  ABSLUT $1F4B  1809  3014
  ABSX   $1F70  1827  3015
  ABSY   $1F76  1832  3016
  AC0    $25AE  2683  2687  2689
  AC1    $25B1  2685  2690
  ACC    $1EFF  1756  3009
  ACHECK $259C  2643  2681
  ADRS   $104F   164   432   433   438   440   479   482   567   569   578

                 580   589   591   605   607   613   615   843   864   867

                 879   882  1153  1154  1163  1168  2961  2964  2965
  AFILE  $1675   781   786
  AGET   $16A9   807   811
  AGET1  $16B5   797   806   812
  ALINE  $25DF  2704  2713
  ALOP   $25F1  2724  2742
* AOP    $1641   757
  AOP1   $1706   852   914
* AOP2   $1730   874
  AOP3   $1755   892   893   905
  AOPX   $1701   845   847
  ASC    $1772   895   897   899   901   903   906
  ASCCCC $252A  2605  2611  2624
  ASCI1  $2557  2637  2641  2643
  ASCII  $254C  2639  2649  2651  2663
  ASCIIQ $2585  2644  2647  2665
  ASCKK  $2541  2626  2635
  B0000  $1E18  1556  1558  1560  1562  1582  1584  1586  1589  1592  1595

                1598  1604
  BASIC  $100D    31    36
  BINARY $1B6C  1174  1179  1190  3702  3710
  BITFLG $376F  1493  1543  1569  3826  3831
  BITOPT $3742   753  3804
  BOP    $166C   772   775
  BOP0   $3749  3808  3809  3819
  BSC    $3764  3811  3813  3815  3817  3821
  BSTUB  $0001     9    29
  BUF    $105C   179   412   527   528   647   782   788   789  1143  1173

                1178  3585  3591  3592
  BYABIT $1DE7  1500  1568
  BYTES  $25B4  2688  2694
  BYTESX $25DC  2696  2709
  BYTT   $1DBF  1489  1515  1532  1607
  BYZBIT $1DC2  1498  1542
  CASCII $2634  1735  1772  2719  2725  2760
  CDATA  $10E7   211   242   819   832   848   852   856   910   911  2565

                2569  2575  2590
  CHKIN  $FFC6    72   424   506   799  3671
  CHKOUT $FFC9    81   722  1311  1320
  CHRIN  $FFCF    73   425   427   434   507   508   509   804   807  1142

                1207  1216  3673  3677  3697  3700  3708  3716  3722
  CHROUT $FFD2    71   906  1111  1113  1115  1314  1323  1330  3569  3675

                3679  3701  3709  3755  3759  3823
  CLOSE  $FFC3    82   330   372   448   520   538   559   698   813  1080

                3638  3660







CROSS REFERENCE......PAGE    2


  CLRCHN $FFCC    75   374   449   521   699   726   814  1315  1324  3639

                3661  3698  3725
  COK    $2C24  3484  3489
  COMENT $2061  1086  1611  1951  1960  2619  2638  2669  3520  3526  3552

  COMET  $2067  1630  1821  1846  1856  1960  1963
* COMOPT $101D   117
  COMPT  $2077  1970  1973
  CONST0 $1D21  1286  1293  1455
  CONST1 $1D26  1289  1296  1456
  CPASS  $1015   108   251   305  1059  1512  1606  1763  2610  2636  2640

                2666  2695  2772  2792  3413
  CRLF   $20F3   248   468   500   822  1130  1351  2061  3640
  CRLFPR $1C5B  1338  1349  1358  1404
  CRNO   $1B90   599  1216  3318  3326
  CRNO1  $1B9D  1212  1218  1220  1223
  CRYS   $1B83   712   744   921   933  1207  3290
  CRYS1  $1B9B  1209  1211  1221
  CSHORT $2075  1966  1969
  DATABE $10EF   215   760   765  2260  2263
  DATABP $10EB   213   758   763
  DATABS $10ED   214   759   764
  DATAO1 $24B8  2566  2569  2591
  DATAO2 $24EE  2589  2595
  DATAOP $24A9  1488  2562
  DATUT  $2596  2620  2631  2667  2674
  DBYTES $2640  2690  2771
  DBYTEX $266D  2773  2787
  DECSL  $2142   476  1552  1578  1810  1811  1822  1847  1857  2114  2163

                2184  2185  2618  2670
  DEVICE $1019   113   271   290   293   298   326   334   341   351   356

                 359   367   395  1061  1131  1307  1316  1325  1350  1353

                1367  1372  1385  1436  2190  2195  2197  2652  2655  2660

  DISA   $1230   240   322
  DISASS $1221   101   230
  DISB   $125E   252   259
  DISC   $12ED   307   323
  DISERR $1AC4   535   692   796  1091  3613
  DISFUL $12EA   306   309   322
  DISL   $1D94  1494  1501  1509  1545  1564  1571  1600
  DISL1  $1DA5  1513  1519
  DLOOA  $1AEF  1114  1117
  DLOOC  $1AE5  1099  1109
  DLOOE  $1AD9  1100  1102
  DLOOP  $128F   254   257   278   284   286   301
  DOLLAR $20D0   466  1668  1698  1725  1767  1945  2032  2705  2752  2784

                2825  2862  3687
  DONE   $1364   369   374
  DONED  $1345   353   361
  DOP    $136D   233   394
  DOP2   $1639   745   748
  DOP3   $163B   747   749
  DSLINE $1D7D   278  1488
  EA     $1020   122   318   320   443   445   579   581   628   630  2080

                2084
  EAGOL  $1028   126   629   631  2239  2243
  EAOUT  $102C   128   317   319   614   616







CROSS REFERENCE......PAGE    3


  EAS    $10E4   209  2597  2600  2612  2614  2627  2629  2874  2878
  EASCI1 $2618  2737  2744
  EASCII $261D  2726  2741  2744  2748
  EFILE  $2051   324  1078  1951
  ENDAX  $24B5  2563  2567  2571
  ENDDAT $2599  2567  2676
  EPASS  $1014   107   253  1659  1689  1876  2625  2818  2849
  EQUATE $2F27  3522  3523  3795
  EQUEND $2CAA  3518  3547  3552
  EQUINT $2B35   256  3364
  EQUOP  $2C6B  3527  3546  3550
  EQUOP1 $2C85  3534  3536
  EQUPRT $2C40   276  3511
  ERRCT  $105A   175   266   267   347   348  1719  1721
  FILE   $158D   654   656
* FILEOK $1587   653
  FINAL  $1DBC  1531  1632
  FINISH $1C48   370  1338  1342  1363  1409  1432
  FIXSYM $2BF9  2007  2522  3468  3472
  FOP1   $17AE   934   937
  FOP2   $17B0   936   938
  FOROPT $101C   116   938  1965  1991  2005  2141  2157  2178  2198  2212

  FORWRD $1FE9  1889  1891
  GETBYT $1B4F  1161  1166  1173
  GETC   $2C31  3390  3393  3420  3429  3501
  GETI   $2303  2349  2365  2368  2405  2408  2419  2430  2514  2517  3527

                3530
  GETIN  $FFE4    74   283   299   892  2648  2661  3563  3808
  GETOPE $277E  2943  2948  2956
  GETSL  $212C  1496  1510  1525  1550  1576  1621  1652  1681  1684  1726

                1768  1812  1837  1887  1917  2101  2139  2151  2155  2168

                2172  2176  2706  2718  2724  2730  2753  2779  2782  2802

                2806
  GETWRD $1B2B   566   577   588   604   612   842   862   877  1152
  GFILE0 $157B   647   651
  HEADER $1C7A   273  1367
* HEADES $1CCD  1413
  HEADFX $1CF5  1429  1432
  HEADOK $1CE7  1408  1423
  HEADSY $1CE8  1427  2509
  HEXA   $1D11  1243  1248  1451
  ILLEGL $1EBE  1719  3008
  ILLMSG $217E  1750  1751  2135
  ILLOP  $275D  2922  2928
  IMEXIT $1F39  1764  1773  1783
  IMMEDT $1F04  1761  2992  3010
  IMPLI1 $1F8A  1838  1840  1842  1844
  IMPLID $1F7C  1837  3017
  IMPONE $1F89  1843  2990  2991  2999
  INCC   $2C28  3392  3419  3428  3494
  INCI   $22FA  2342  2367  2379  2407  2414  2421  2516  2529  3529  3543

  INCIE  $22F2  2327  2328  2336
  INCSL  $2123   323   437   516  1549  1575  1651  1680  1683  1761  1814

                1815  1820  1845  1855  1874  2086  2094  2154  2171  2175

                2616  2668  2781  2805  2880
  INDRCT $1F96  1851  3021







CROSS REFERENCE......PAGE    4


  INDX   $1FAB  1861  3019
  INDY   $1FB4  1867  3020
  INEND  $1B4E  1157  1165  1169
  INENX  $1B6B  1177  1186
  INIT   $1856   550   551   966
  INITD  $14AB   418   549   664   777  3580
  INITIN $2262   234  2260
  INSTN1 $1B1E  1142  1146
  INSTNG $1B1C   407   641   771  1141  1155  3576
  INTCH  $2321  2365  2382  2386
  INTCHA $2312  1989  2359
  INTCHK $231E  2310  2364
  INTEND $235A  2383  2388
  INTEXT $22F0  2311  2330
  INTMAT $235C  2377  2390
  INTOUT $2449  2506  2509
  INTPR  $2454  2514  2541
  INTPRM $247B  2525  2528
  INTPRS $2476  2521  2526
  INTPRT $2433   357  2499
  INTSA  $214E   240   429  2122
  INTSET $2274  2269  2364  2395  2495
  IPASS  $1013   106  1657  1687  1898  2816  2847
  ISKIP  $1EF8  1736  1748
  LARGE  $23C4  2434  2438
  LINECK $1A85   280  1058
  LINECO $1AC3  1060  1063  1074  1087
  LINECT $1058   174   260   263  1124  1126  2200  2201
  LINEFL $10C0   193   268   269  1068  1071  1083  1084  1127  1129
  LINEOK $1CBC  1362  1369  1398
  LINES  $2E06  3629  3750
  LISTCT $1057   173   265  1339  1340  1344  1359  1360  1405  1406  1427

  LOADC  $2EF5  3651  3652  3786
  LOADE  $2F0C  3662  3663  3790
  LOADF  $2EB9  3572  3573  3779
  LOADM  $2ED7  3618  3619  3782
  LOOP1  $244F  2512  2544
  LOOP2  $24A3  2538  2543
  LPAREN $20D5  1851  1861  1867  2037
  LTITLE $1D46  1386  1387  1462
  LTITLS $1D70  1419  1420  1468
  MATCH  $2B92  3403  3412
  MATCHS $2BB2  3414  3428
  MATCHT $2BD9  3416  3431  3448
  MATEXT $2BE3  3418  3453
  MATONE $2BB1  3422  3424
  MBYTE  $272C  1722  1723  2699  2700  2886
  MCODES $28C0  2918  3110
  MDBYTE $273C  2776  2777  2888
* MEMSIZ $0037    92
  MNAMES $27E8  2920  3025
  MNEMON $2745  1527  2915
  MNLOOP $274F  2920  2932
  MODES  $29C0  2958  3200
  MPASS  $11F2   223   243   244
  MSA1   $1989   839   840  1011







CROSS REFERENCE......PAGE    5


  MSA2   $19AB   859   860  1014
  MSA3   $19C3   874   875  1017
  MSAOP  $196A   768   769  1008
  MSB1   $1904   997  3805  3806
  MSB4   $1A45   918   919  1032
  MSB5   $1A65   930   931  1036
  MSD1   $1871   563   564   601   602   972
  MSD2   $1883   574   575   609   610   976
  MSD4   $1893   585   586   980
  MSD4A  $18AD   496   497   984
  MSD5   $18C0   596   597   988
  MSF1   $1801   404   405   953
  MSF2   $181D   454   455   956
  MSG    $17B4   398   399   944
  MSG1   $1831   635   636   960
  MSG2   $1858   709   710   968
  MSG5   $19D9   889   890  1020
  MSGBIT $215B  1617  1618  2130
  MSGBZP $2163  1624  1625  2131
  MSGDIS $120E   226   363   364
  MSGEND $2179  1953  1954  2134
  MSGERR $1204   225   344   345
  MSR1   $18DC   741   742   992
  MSS1   $2E2D  3286  3287  3766
  MSS2   $2E51  3315  3316  3770
  MSS3   $2E77  3560  3561  3773
  MSS4   $2E95  3323  3324  3776
  MWORD  $2734  2796  2797  2887
  NAME   $2E1F  3599  3600  3763
  NAMS   $2E29   781  3584  3764
  NASCII $2625  2720  2752
  NBUF   $10C4   196   648   673   678   684   685
  NCHARS $10C3   195   640   645   650   662   667
  NCOK   $2C26  3485  3488  3491
  NDATA  $10E9   212   805   818   844   912  2562  2570
  NEGREL $2175  1923  1924  2133
  NEWEXT $1B1B  1133  1135
  NEWLIN $1AFE   342   343   361   362   366  1124  1531  1628  1819  1844

                1854  1947  1956  1961  2708  2750  2755  2786  2827  2868

                3525  3541
  NEXLIN $1C6D  1134  1359
  NEXPTR $1C6A  1358  1370  1382  1383  1389  1396  1397
  NEXPTS $1CBD  1404  1413  1417  1418  1422  1430  1431  2542  2543
  NEXTBY $2713  2709  2736  2756  2787  2828  2830  2832  2869  2873
  NEXTC  $2C04  3404  3476
  NEXTP  $12C0   279   303
  NEXTSL $210A  1532  2079
  NOASC  $263E  2761  2763  2766
  NOBINC $272A  2876  2879  2883
  NOFILE $158B   642   655
  NOHEX  $1B7F  1192  1197  1200
  NOID   $159E   663   665
  NOINC  $2121  2082  2085  2089
  NOPRT  $161E   713   728   731
  NOTABS $16EC   773   839
  NPRAD  $20AD  2003  2006







CROSS REFERENCE......PAGE    6


  NPRAD1 $20AE  1986  2005
  OFFSET $1024   124   490   494   590   592  2103  2106
  OFILE  $15A1   667  1081
  OFILE1 $15B4   671   675
  OFILE2 $15B9   677   682
* OFILE3 $15DC   697
  OFILE4 $15EB   668   693   705
  OFILED $1596   274   662
* ONEBIT $1E4C  1647
  ONEBX  $1E7B  1669  1671
  ONEBY  $1E78  1667  1670
  ONEBYT $1E4D  1651  1791  1795  1800  1868  2993  2994  2995  3001  3002

  OPCPUT $1EB7  1658  1688  1707
  OPCSYM $1EBA  1660  1690  1709
  OPEN   $FFC0    80   534   557   691   720   795  3609
  OPERN1 $2771  1514  2945
  OPERND $2779  1530  2950
  ORGIN  $203B   275  1085  1940  2617
* OUFILE $1560   635
  OUTPUT $101A   114   270   331   333   338   340   355   360   397   656

                 657   732   733  1352  2189
  P1     $20A4  1988  1990  1998
  PAGECT $1055   172   261   264  1379  1380  1393  1395
  PAGER1 $1CB6  1394  1396
  PASS   $1012   105   236   246   250   303   304  1058  1511  1605  1656

                1686  1762  1875  1897  2609  2624  2635  2639  2665  2694

                2771  2791  2815  2846  3412
  PAUS1  $257E  2661  2662
  PAUSE  $12B9   299   300
  PCHAR  $1C11   247   465  1244  1249  1258  1299  1306  1741  1743  1745

                1757  1766  1778  1780  1782  1942  1944  1971  1979  1981

                2028  2033  2038  2043  2048  2050  2055  2057  2062  2075

                2722  2727  2733  2749  2857  2859  2925  3442  3444  3464

                3470  3537  3539
  PEXIT  $1C46  1327  1331
  PFILE0 $138D   408   410
  PFILE1 $138F   411   416
  PMSG   $11F8   224   294   295  2656  2657
  POSREL $2171  1920  1921  2132
  POVER  $20A1  1992  1994
  PRAD   $208A  1520  1615  1985  2698  2775  2795
  PRBYT  $1BA5   827  1232  1237  1622  1672  1731  1770  1933  2140  2152

                2156  2169  2173  2177  2707  2754  3719  3724
  PRBYTS $1B9F  1230  2013  2023
  PREND  $24A0  2533  2536  2542
  PRFILE $1485   419   504   526
  PRIN   $1C26  1309  1316
  PRINT  $1620   730   732
  PRLA   $2080  1670  1704  1978  1998  2017
  PRO2RD $1461   509   518
  PROGED $13D5   436   442
  PROGM  $1852   411   965
  PROGOK $14AA   536   545
  PROGRD $13C0   434   441
  PRTASS $2764  1519  2937
  PRTDAF $2221  2199  2205







CROSS REFERENCE......PAGE    7


  PRTDAL $16D0   825   831
* PRTDAS $16BD   818
  PRTDAT $2205  1613  2195  2211  2642  2938
  PRTEST $21FE  2147  2164  2189  2218
  PRTGET $15EC   658   709
  PRTNEX $16C8   822   833
  PRTNU1 $1BE0  1269  1280  1301
  PRTNU2 $1BE7  1283  1291
  PRTNU3 $1BE8  1282  1284
  PRTNUM $1BD7   349  1273  2202
  PRTOK  $2493  2532  2537
  PRTON1 $21A0  2142  2145
  PRTONE $2192  1614  2139  2697  2972  2973  2981
  PRTOT1 $2234  2213  2216
  PRTOTH $2229  1940  1952  1963  2211  3521  3532
  PRTPAG $1BCC  1265  1381
  PRTTH1 $21F3  2179  2182
  PRTTHE $21CD  2168  2978  2979  2980  2985
  PRTTW1 $21C2  2158  2161
  PRTTWO $21A8  2151  2774  2794  2974  2975  2976  2977  2982  2983  2984

  PSELEC $20B6   467  1946  1999  2011  2205
  PUIT   $22CD  2308  2313
  PUT    $2DEA  3734  3738
  PUTC   $2DDE  3628  3729
  PUTI   $22B3  1708  1911  2301  2829  3423
  PWORK  $20BF  1908  1936  2017  3535
  PWORKD $20C2   461   499  1706  2021  2325  2528  2785  2826  2867  3540

  Q00000 $2606  2732  2734
  QUITS  $12F3   282   326
  QUITX  $2D2F  3631  3637
  QUITXX $2D4F  3614  3659
  QUTERR $130A   328   338
  RANG   $224E  2240  2246
  RANGE  $223C  1666  1696  2238  3417
  READS  $2D60  3627  3670
  READST $FFB7    77   435   517   723   810  3632
  READX  $2D1C  3627  3633
  READXF $2CF6  3577  3598
  READXX $2CB0  3335  3560
  READY  $2D71  3677  3682
  RELATV $1FC0  1874  3000  3018
  RELND  $1FF2  1893  1895
  RELNEG $201D  1919  1923
  RELP   $202F  1929  1933
  RELPC  $2010  1906  1917
  RELPM  $2021  1922  1925
  RELPUT $200C  1899  1910
  RELSYM $200F  1877  1902  1913
  REOPEN $2CFF  3594  3605
  RESET  $2E15  3753  3756
  RESINT $229A  2289  3553
  ROPT   $1018   112   749  1904
  ROUT   $2260  2241  2244  2248  2251  2255
  RPAREN $20DA  1853  1863  1869  2042
  S3     $23AC  2425  2429
  SA     $101E   121   314   316   426   428   457   459   489   493   568








CROSS REFERENCE......PAGE    8


                 570   624   626  2122  2124
  SAGOL  $1026   125   625   627  2247  2250
  SAOUT  $102A   127   313   315   606   608
  SAVA   $1052   166   417   526  2513  2537
  SAVEE  $104D   160  2282  2284  2293  2295
* SAVEP  $1049   158
  SAVES  $104B   159  2278  2280  2289  2291
  SAVINT $2281   255  2277
  SAVX   $1053   167   824   830  1268  1276  1280  1300  2924  2926
  SAVY   $1054   168   821   825   829   857   863   870   878   885   907

                3718  3720
  SBLOK  $2725  2875  2880
  SCREN  $1C3A  1318  1325
  SCRNO1 $1D07  1438  1442
  SCROFF $1CF8   665  1436
  SCRON  $1D08   375  1444
  SELECT $1022   123   442   444   473   475   478   480   481   483   488

                 492   510   512  1879  1881  2011  2012  2079  2083  2094

                2096  2102  2105  2114  2116  2117  2123  2125  2359  2361

                2584  2587  2613  2615  2628  2630  2873  2877  3376  3378

  SEMIC  $20CB  1739  1776  1935  1964  2027  2324
  SETLFS $FFBA    79   533   556   690   719   794  3608
  SETNAM $FFBD    78   529   552   686   715   790  3593  3601
  SEXIT  $1BCB  1257  1261
* SKIPER $2532  2627
  SLOK   $211C  2081  2086
  SMALL  $23C7  2433  2437  2443
  SMALLP $1036   139  2398  2401  2416  2418  2457  2459  2804  2808  2863

                2865
  SMALLS $1034   138  2397  2400  2443  2445  2468  2470  2478  2480  2482

                2484  2486  2490
  SOP    $2AC0   737  3286
  SOP1   $2AD4  3291  3301
  SOP2   $2CB7  3563  3564  3568
  SOP3   $2CC4  3566  3569
  SOP4   $2B0B  3327  3335
  SORT   $235E  2395  2510  3519
  SORT1  $2373  2405  2472  2493
  SORT2  $2382  2414  2438
  SORT3  $2404  2429  2477
  SORT4  $2430  2489  2492  2495
  SORTOK $242D  2488  2493
  SOUT   $1BC1  1256  1260
  SPAC   $20FD  2068  2070
  SPAC6  $20F8  1775  1934  1994  2066
  SPACE  $2105   828  1521  1528  1616  1732  1738  1746  1993  2068  2074

                2153  2170  2174  2203  2204  2519  3686
  SPACM  $20FA  2067  2146  2162  2183  2207  2217  2524  2527  2540
  SPASS  $1016   109  3415
  SSET   $2B28  3356  3389
  STABLE $3770  3306  3309  3840
* STARTD $100F   101
  STARTS $14C5   409   563
  STDREF $2DC0  3691  3715
  STOP   $FFE1    76   281  2646  3630
  STRPNT $1BBB   245   296   346   365   400   406   456   498   565   576








CROSS REFERENCE......PAGE    9


                 587   598   603   611   637   711   743   770   841   861

                 876   891   920   932  1253  1375  1388  1416  1421  1619

                1626  1724  1752  1925  1955  2658  2701  2778  2798  3288

                3317  3325  3524  3562  3574  3620  3653  3664  3807
  STRSY1 $2BEA  3460  3466
  STRSYM $2BE4  3440  3450  3457
  SUBP   $2794  2941  2942  2971
  SUBS   $27CC  2951  2952  3007
  SUBS1  $27B0  2946  2947  2989
  SY     $2B1D  3297  3319  3336  3348
  SYEXIT $2BF8  3461  3463  3467  3469
  SYM    $2B48  1985  3374
  SYM1   $2B61  3380  3389
  SYM2   $2B64  3390  3406
  SYMBOE $103D   146   757   762  3341  3343  3349  3351  3483  3487  3645

                3647
  SYMBOL $1038   143  3296  3302  3374  3384
  SYMBOP $1039   144  3308  3311  3329  3331  3340  3342  3357  3359  3433

                3436  3448  3449  3477  3479  3480  3482  3486  3494  3496

                3501  3503  3644  3646  3730  3732  3740  3742  3743  3745

  SYMBOS $103B   145  3307  3310  3356  3358
  SYMBUF $10DA   204  3674  3678  3684  3707  3711  3712  3717  3723  3734

  SYMEND $2B90  3375  3385  3405  3407
  SYMOP  $2B5C  1664  1694  1710  1901  2520  2823  2831  2854  3384  3533

* SYTAB  $2AE9  3315
  T2     $23AF  2424  2428  2430
  TABINE $1032   134  2262  2265  2281  2283  2294  2296  2303  2306  2313

                2315  2336  2338  2381  2385  2423  2427  2487  2491  2501

                2504  2531  2535  3364  3367  3513  3516  3545  3549
  TABINP $102E   132  2270  2272  2342  2344  2349  2351  2380  2384  2415

                2417  2422  2426  2469  2471  2481  2485  2530  2534  3365

                3368  3544  3548
  TABINS $1030   133  2261  2264  2269  2271  2277  2279  2290  2292  2302

                2305  2396  2399  2500  2503  3366  3369  3512  3515
  TDATA  $10F1   219   808   826   865   868   880   883   908  2577  2580

                2596  2599  2602
  TEMP   $1051   165  1070  1073  1162  1167  1175  1184  1185  2067  2069

                2304  2307  2373  2376  2406  2409  2432  2436  2462  2465

                2502  2505  2585  2588  2714  2738  2739  2916  2931  3399

                3402  3514  3517  3623  3750  3752  3757
  TEXTER $10E6   210  2603  2681  2702  2809  3570  3689
  TWOB   $1EBD  1665  1695  1711
* TWOBIT $1E81  1676
  TWOBX  $1EB4  1699  1705
  TWOBY  $1EB1  1697  1703
  TWOBYT $1E82  1680  1809  1827  1832  1852  2996  2997  2998  3003
  UTABLE $38F3  3328  3330  3348  3350  3886
* UYMBOE $1043   152
* UYMBOP $103F   150
* UYMBOS $1041   151
  VERSON $10C2   194   644   669   672   675
  VICREG $D011    70  1439  1441  1444  1446
  WIND1  $1543   600   619
  WIND2  $1545   618   620
  WINDOP $1507   522   596
  WINDOW $101B   115   308   620







CROSS REFERENCE......PAGE   10


  WORD1  $2685  2793  2802
  WORDM  $26CB  2811  2836
  WORDPT $26BF  2817  2829  2848
  WORDS  $2670  2689  2791
  WORDS2 $26FB  2855  2862
  WORDS3 $270D  2824  2860  2868
* WORDSX $26BC  2828
  WORDSY $26C5  2819  2831  2850
* WORDXX $2710  2869
  WORKED $1045   156   458   460   491   495  1653  1655  1671  1682  1685

                1880  1882  1883  1885  1890  1892  1894  1895  2021  2022

                2238  2242  2246  2249  2318  2321  2360  2362  2371  2374

                2420  2431  2435  2448  2451  2515  2518  2780  2783  2803

                2807  2837  2839  2840  2842  2864  2866  3377  3379  3398

                3401  3528  3531
  WORKER $1047   157  2366  2369  2372  2375  2578  2581  2583  2586  3391

                3394  3397  3400
  WREADY $867E    87   376   543   704
  WRITE  $184E   677   964
  XFILE1 $2CDF  3584  3589
  XGET   $2DA0  3694  3696  3700
  XINDEX $20DF  1796  1828  2047
  XOP0   $1789   835   846   913   918
  XOP1   $1799   922   925
  XOP2   $179B   924   926
  XOPT   $1017   111   926  1987
  XTITLE $1D2B  1373  1374  1460
  XTITLS $1D63  1414  1415  1467
  YINDEX $20E9  1801  1833  1870  2054
  YSHEX  $1B81  1194  1199  1202
* ZERBIT $1F3A  1787
  ZEROPG $1F3B  1791  3011
  ZEROUR $00DD    97   511   513   515   761   766  1253  1254  1256  1265

                1266  1273  1274  1285  1287  1288  1290  1292  1294  1295

                1297  2104  2107  2109  2314  2316  2319  2322  2350  2352

                2354  2444  2446  2449  2452  2458  2460  2463  2466  2956

                2957  2960  2963  3457  3458  3460  3468  3502  3504  3506

                3731  3733  3735
  ZEROX  $1F3E  1795  1862  3012
  ZEROY  $1F44  1800  3013
























































































